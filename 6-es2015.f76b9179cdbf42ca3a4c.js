(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{gJyg:function(t,a,i){"use strict";i.d(a,"a",(function(){return u}));var e=i("cBSm"),r=i("1adA"),s=i("JSOo"),o=i("fXoL"),h=i("ofXK"),l=i("LPYB");const n=["chart"];function c(t,a){if(1&t){const t=o.Wb();o.Vb(0,"canvas",1),o.dc("chartClick",(function(a){return o.Dc(t),o.gc().onBarClick(a)})),o.Ub()}if(2&t){const t=o.gc();o.oc("datasets",t.barChartData)("labels",t.barChartLabels)("options",t.barChartOptions)("plugins",t.barChartPlugins)("legend",t.barChartLegend)("chartType",t.barChartType)}}let u=(()=>{class t{constructor(t,a){this.drillDownService=t,this.commonSharedService=a,this.chartData=[],this.currentUrl="",this.isDrillDown=null,this.month="month",this.quarter="quarter",this.year="year",this.ShowHideChart=!0,this.values=[],this.legends=[],this.barChartLabels=[],this.barChartData=[],this.barChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.chartReady=!1,this.clicksCount=0,this.reachedYear=!1,this.type="",this.orientation="",this.flipChart=!1,this.showLegend=!0,this.caption="",this.description="",this.padding={left:10,top:5,right:25,bottom:0},this.titlePadding={left:90,top:0,right:0,bottom:10},this.dataSource=this.chartData,this.colorScheme="scheme29",this.animationDuration=400,this.xAxis={dataField:"",unitInterval:1,textRotationAngle:0,valuesOnTicks:!0,tickMarks:{visible:!0,unitInterval:1,color:"#888888"},gridLines:{visible:!1,unitInterval:1,color:"#888888"}},this.valueAxis={unitInterval:10,minValue:0,maxValue:1e10,visible:!0,axisSize:"auto",flip:!1,textRotationAngle:0,tickMarks:{color:"#888888"},gridLines:{color:"#888888"},formatSettings:{decimalPlaces:0}},this.seriesGroups=[]}ngOnInit(){this.getChartData()}onBarClick(t){t.active.length>0&&null==t.detail&&(this.columnData.rowGroup[0]==this.year?(this.isDrillDown=!0,localStorage.setItem("reachedYear","true"),this.getChartData()):this.columnData.rowGroup[0]==this.quarter?("true"==localStorage.getItem("reachedYear")?(this.isDrillDown=!0,localStorage.setItem("reachedYear","false")):this.isDrillDown=!1,this.getChartData()):(this.isDrillDown=!1,this.getChartData()))}getChartData(){this.legends=[],this.barChartData=[],this.caption=this.title?this.title.dataset.value:"",this.desc=this.desc?this.desc.dataset.value:"","/"==this.routeUrl||"/dashboard"==this.routeUrl?(this.chartdynamicWidth="385px",this.chartDynamicHeight="350px",this.leftPadding="-15px"):(this.chartdynamicWidth="1350px",this.chartDynamicHeight="500px");let t=[];this.columnData.rowGroup&&(this.isDrillDown?this.columnData.rowGroup[0]==this.year?this.columnData.rowGroup[0]=this.quarter:this.columnData.rowGroup[0]==this.quarter&&(this.columnData.rowGroup[0]=this.month):!1===this.isDrillDown&&(this.columnData.rowGroup[0]==this.month?this.columnData.rowGroup[0]=this.quarter:this.columnData.rowGroup[0]==this.quarter&&(this.columnData.rowGroup[0]=this.year)),t.push(...this.columnData.rowGroup)),this.columnData.pivot&&t.push(...this.columnData.pivot);let a=["year","quarter","month","customer"],i=null,e=[];for(let p=0;p<t.length;p++)if(-1!=a.indexOf(t[p])){i=t[p],e=this.columnData.rowGroup||p<this.columnData.rowGroup.length-1?this.columnData.pivot:this.columnData.rowGroup;break}let r={};if(("/"==this.routeUrl||"/dashboard"==this.routeUrl)&&this.drillDownService.reportsArrangementData.length>0){let t=this.drillDownService.reportsArrangementData.filter(t=>t.id===this.reportId);this.drillDownService.arrangementsData=null==t[0].data?[]:t[0].data}this.drillDownService.arrangementsData.forEach(t=>{r[t[i]]||(r[t[i]]={});let a=r[t[i]];for(let i of this.columnData.summary){a[i.label]||(a[i.label]={});let r=a[i.label];e&&e.length||(e=["All"]);for(let a of e){let e=t[a];r[e]||(r[e]=0),r[e]+=t[i.name]}}});let s=0,o=[],h=[];if("/"==this.routeUrl||"/dashboard"==this.routeUrl){let t=0,a=0,e=0;for(let l in r){let n=3;if("customer"==i&&(n=4),t<=n){let t={};t[i]=l,e=0;for(let i in r[l]){if(0==e){a=0;for(let e in r[l][i]){if(a<=1){let a=r[l][i][e];t[i+e]=a,a>s&&(s=a),h[i]||(h[i]={}),h[i][e]=""}a++}}e++}o.push(t)}t++}}else for(let p in r){let t={};t[i]=p;for(let a in r[p])for(let i in r[p][a]){let e=r[p][a][i];t[a+i]=e,e>s&&(s=e),h[a]||(h[a]={}),h[a][i]=""}o.push(t)}if("/"!=this.routeUrl&&"/dashboard"!=this.routeUrl&&"customer"==i&&o){let t=o.length;if(t>10){var l=30*t;l>500&&(this.chartDynamicHeight=l+"px")}}for(let p in h){"customer"==i&&(this.orientation="horizontal");let t=!1;this.columnData.pivot||(t=!1);let a={type:"stackedcolumn",orientation:this.orientation,columnsMinWidth:15,columnsMaxWidth:15,columnsGapPercent:50,seriesGapPercent:1e3,series:[],showLabels:t};for(let e in h[p]){let t,r;this.columnData.pivot||(t="customer"==i?{visible:!0,horizontalAlignment:"right",offset:{x:50,y:0}}:{visible:!0,verticalAlignment:"top",offset:{x:0,y:-20}},r=function(t){var a;return Number.isNaN(t)?null:0==t?0:t<1e3?Math.floor(t).toFixed(2):(a=Math.floor(Math.log(t)/Math.log(1e3)),(t/Math.pow(1e3,a)).toFixed(2)+["K","M","G","T","P","E"][a-1])}),a.series.push({dataField:p+e,displayText:("undefined"!=e?e:"")+" "+p,labels:t,formatFunction:r}),this.legends.push(p+e)}this.seriesGroups.push(a)}this.xAxis.dataField=i,this.dataSource=o,this.valueAxis.minValue=0,this.valueAxis.maxValue=s,this.valueAxis.axisSize="auto","customer"==i?(this.valueAxis.flip=!0,this.xAxis.textRotationAngle=90,this.valueAxis.textRotationAngle=-75):this.valueAxis.flip=!1;let n=Math.ceil(s)/10;this.valueAxis.unitInterval=Math.ceil(s+(n+n/2))/10,(this.isDrillDown||!1===this.isDrillDown)&&(this.drillDownService.showChart=!1,setTimeout(()=>{this.drillDownService.showChart=!0},0));let c=[],u=i;for(let p=0;p<this.dataSource.length;p++)c.push(this.dataSource[p][u]);this.barChartLabels=c;let d={};for(let p=0;p<this.legends.length;p++){this.values=[];let t=0;for(;t<o.length;)this.values.push(null!=o[t][this.legends[p]]?o[t][this.legends[p]]:0),t++;d[p]={data:this.values,label:this.legends[p]},this.barChartData.push(d[p])}this.chartReady=!0}}return t.\u0275fac=function(a){return new(a||t)(o.Pb(r.a),o.Pb(s.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["data-chart"]],viewQuery:function(t,a){var i;1&t&&o.Qc(n,!0,e.a),2&t&&o.Ac(i=o.ec())&&(a.chart=i.first)},inputs:{columnData:"columnData",title:"title",desc:"desc",routeUrl:"routeUrl",reportId:"reportId"},features:[o.Db([s.a])],decls:1,vars:1,consts:[["id","barchart","baseChart","","height","200",3,"datasets","labels","options","plugins","legend","chartType","chartClick",4,"ngIf"],["id","barchart","baseChart","","height","200",3,"datasets","labels","options","plugins","legend","chartType","chartClick"]],template:function(t,a){1&t&&o.Kc(0,c,1,6,"canvas",0),2&t&&o.oc("ngIf",a.chartReady&&0!=a.barChartLabels.length)},directives:[h.o,l.a],encapsulation:2}),t})()},puOX:function(t,a,i){"use strict";i.d(a,"a",(function(){return u}));var e=i("cBSm"),r=i("1adA"),s=i("JSOo"),o=i("fXoL"),h=i("ofXK"),l=i("LPYB");const n=["chart"];function c(t,a){if(1&t&&o.Qb(0,"canvas",1),2&t){const t=o.gc();o.oc("data",t.doughnutChartData)("labels",t.doughnutChartLabels)("chartType","doughnut")("options",t.doughnutChartOptions)}}let u=(()=>{class t{constructor(t,a){this.drillDownService=t,this.commonSharedService=a,this.chartData=[],this.currentUrl="",this.doughnutChartType="doughnut",this.chartReady=!1,this.doughnutChartOptions={responsive:!0,legend:{position:"bottom"}},this.formartFunction=function(t){var a;return Number.isNaN(t)?null:0==t?0:t<1e3?Math.floor(t).toFixed(2):(a=Math.floor(Math.log(t)/Math.log(1e3)),(t/Math.pow(1e3,a)).toFixed(2)+["K","M","G","T","P","E"][a-1])},this.type="",this.orientation="",this.flipChart=!1,this.showLegend=!0,this.caption="",this.description="",this.legendPosition={left:520,top:140,width:100,height:100},this.padding={left:5,top:5,right:5,bottom:0},this.titlePadding={left:90,top:0,right:0,bottom:10},this.dataSource=this.chartData,this.colorScheme="scheme29",this.xAxis={dataField:"",unitInterval:1,textRotationAngle:0,valuesOnTicks:!0,tickMarks:{visible:!0,unitInterval:1,color:"#888888"},gridLines:{visible:!1,unitInterval:1,color:"#888888"}},this.valueAxis={unitInterval:1,minValue:0,maxValue:0,visible:!0,axisSize:"auto",flip:!1,textRotationAngle:0,tickMarks:{color:"#888888"},gridLines:{color:"#888888"},formatSettings:{decimalPlaces:0}},this.seriesGroups=[]}ngOnInit(){this.getChartData()}getChartData(){this.caption=this.title?this.title.dataset.value:"",this.description=this.desc?this.desc.dataset.value:"","/"==this.routeUrl||"/dashboard"==this.routeUrl?(this.chartdynamicWidth="350px",this.chartDynamicHeight="350px",this.labelRadius=110,this.initialAngle=15,this.radius=100,this.centerOffset=0):(this.chartdynamicWidth="1350px",this.chartDynamicHeight="500px",this.labelRadius=200,this.initialAngle=15,this.radius=170,this.centerOffset=0);let t=[];this.columnData.rowGroup&&t.push(...this.columnData.rowGroup),this.columnData.pivot&&t.push(...this.columnData.pivot);let a=["year","quarter","month","customer"],i=null,e=[];for(let c=0;c<t.length;c++)if(-1!=a.indexOf(t[c])){i=t[c],this.columnData.rowGroup||c<this.columnData.rowGroup.length-1||(e=this.columnData.rowGroup);break}let r={};if(("/"==this.routeUrl||"/dashboard"==this.routeUrl)&&this.drillDownService.reportsArrangementData.length>0){let t=this.drillDownService.reportsArrangementData.filter(t=>t.id===this.reportId);this.drillDownService.arrangementsData=null==t[0].data?[]:t[0].data}this.drillDownService.arrangementsData.forEach(t=>{r[t[i]]||(r[t[i]]={});let a=r[t[i]];for(let i of this.columnData.summary){a[i.label]||(a[i.label]={});let r=a[i.label];e&&e.length||(e=["All"]);for(let a of e){let e=t[a];r[e]||(r[e]=0),r[e]+=t[i.name]}}});let s,o=[],h=[],l=[];for(let c in r){let t={};t[i]=c;for(let a in r[c])for(let i in r[c][a]){let e="'"+a+"'";t[e]=r[c][a][i],s=e}o.push(t)}"customer"==i&&o.length>10&&o.splice(10,o.length-1-10),this.dataSource=o;let n=i;for(let c=0;c<this.dataSource.length;c++)h.push(this.dataSource[c][n]),l.push(this.dataSource[c][s]);this.doughnutChartLabels=h,this.doughnutChartData=l,this.chartReady=!0}}return t.\u0275fac=function(a){return new(a||t)(o.Pb(r.a),o.Pb(s.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["pie-data-chart"]],viewQuery:function(t,a){var i;1&t&&o.Qc(n,!0,e.a),2&t&&o.Ac(i=o.ec())&&(a.chart=i.first)},inputs:{columnData:"columnData",title:"title",desc:"desc",routeUrl:"routeUrl",reportId:"reportId"},features:[o.Db([s.a])],decls:1,vars:1,consts:[["baseChart","","height","200",3,"data","labels","chartType","options",4,"ngIf"],["baseChart","","height","200",3,"data","labels","chartType","options"]],template:function(t,a){1&t&&o.Kc(0,c,1,4,"canvas",0),2&t&&o.oc("ngIf",a.chartReady&&0!=a.doughnutChartLabels.length)},directives:[h.o,l.a],encapsulation:2}),t})()}}]);