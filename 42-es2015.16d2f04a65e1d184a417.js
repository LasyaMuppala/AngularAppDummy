(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"Kv+q":function(e,t,o){"use strict";o.r(t),o.d(t,"OperationalReportsModule",(function(){return Qa}));var i=o("tyNb"),l=o("JSOo"),a=o("J7oY"),n=o("tk/3"),r=o("fXoL"),s=o("ofXK");const c=o("+yMW"),d={headers:new n.f({"Content-Type":"application/json"})};let u=(()=>{class e{constructor(e,t){this.http=e,this.datePipe=t}getServiceUrl(e,t,o,i,l){let a=c.apiUrl+"/rmanArrgSummaryReportVExport?";0==o&&(a=c.apiUrl+"/rmanArrgSummaryReportVSearch?");let n="";return null!=t.dealArrangementId&&""!=t.dealArrangementId&&(n=n+"dealArrangementId:"+t.dealArrangementId+","),null!=t.dealArrangementNumber&&""!=t.dealArrangementNumber&&(n=n+"dealArrangementNumber:"+t.dealArrangementNumber+","),null!=t.dealArrangementName&&""!=t.dealArrangementName&&(n=n+"dealArrangementName:"+t.dealArrangementName+","),null!=t.dealArrangementStatus&&""!=t.dealArrangementStatus&&(n=n+"dealArrangementStatus:"+t.dealArrangementStatus+","),null!=t.legalEntityName&&""!=t.legalEntityName&&(n=n+"legalEntityName:"+t.legalEntityName+","),null!=t.dealArrangementSource&&""!=t.dealArrangementSource&&(n=n+"dealArrangementSource:"+t.dealArrangementSource+","),null!=t.customerPoNum&&""!=t.customerPoNum&&(n=n+"customerPoNum:"+t.customerPoNum+","),null!=t.bookingCurrency&&""!=t.bookingCurrency&&(n=n+"bookingCurrency:"+t.bookingCurrency+","),null!=t.shipToCustomer&&""!=t.shipToCustomer&&(n=n+"shipToCustomer:"+t.shipToCustomer+","),null!=t.shipToCustomerNumber&&""!=t.shipToCustomerNumber&&(n=n+"shipToCustomerNumber:"+t.shipToCustomerNumber+","),null!=t.billToCustomer&&""!=t.billToCustomer&&(n=n+"billToCustomer:"+t.billToCustomer+","),null!=t.billToCustomerNumber&&""!=t.billToCustomerNumber&&(n=n+"billToCustomerNumber:"+t.billToCustomerNumber+","),null!=t.salesTheater&&""!=t.salesTheater&&(n=n+"salesTheater:"+t.salesTheater+","),null!=t.salesRegion&&""!=t.salesRegion&&(n=n+"salesRegion:"+t.salesRegion+","),null!=t.salesTerritory&&""!=t.salesTerritory&&(n=n+"salesTerritory:"+t.salesTerritory+","),null!=t.bookedAmount&&""!=t.bookedAmount&&(n=n+"bookedAmount:"+t.bookedAmount+","),null!=t.sspAmount&&""!=t.sspAmount&&(n=n+"sspAmount:"+t.sspAmount+","),null!=t.allocationAmount&&""!=t.allocationAmount&&(n=n+"allocationAmount:"+t.allocationAmount+","),null!=t.carveInOutAmount&&""!=t.carveInOutAmount&&(n=n+"carveInOutAmount:"+t.carveInOutAmount+","),null!=t.deliveredAmount&&""!=t.deliveredAmount&&(n=n+"deliveredAmount:"+t.deliveredAmount+","),null!=t.billedAmount&&""!=t.billedAmount&&(n=n+"billedAmount:"+t.billedAmount+","),null!=t.deliveredAllocationAmount&&""!=t.deliveredAllocationAmount&&(n=n+"deliveredAllocationAmount:"+t.deliveredAllocationAmount+","),null!=t.postBillingDeferrals&&""!=t.postBillingDeferrals&&(n=n+"postBillingDeferrals:"+t.postBillingDeferrals+","),null!=t.postBillingAllocationAmount&&""!=t.postBillingAllocationAmount&&(n=n+"postBillingAllocationAmount:"+t.postBillingAllocationAmount+","),null!=t.revBegBal&&""!=t.revBegBal&&(n=n+"revBegBal:"+t.revBegBal+","),null!=t.revCurrBal&&""!=t.revCurrBal&&(n=n+"revCurrBal:"+t.revCurrBal+","),null!=t.revEndBal&&""!=t.revEndBal&&(n=n+"revEndBal:"+t.revEndBal+","),null!=t.unamortizedAmount&&""!=t.unamortizedAmount&&(n=n+"unamortizedAmount:"+t.unamortizedAmount+","),null!=t.revenueUnbilled&&""!=t.revenueUnbilled&&(n=n+"revenueUnbilled:"+t.revenueUnbilled+","),null!=t.allocationAmountFc&&""!=t.allocationAmountFc&&(n=n+"allocationAmountFc:"+t.allocationAmountFc+","),null!=t.deliveredAllocationAmountFc&&""!=t.deliveredAllocationAmountFc&&(n=n+"deliveredAllocationAmountFc:"+t.deliveredAllocationAmountFc+","),null!=t.postBillingDeferralsFc&&""!=t.postBillingDeferralsFc&&(n=n+"postBillingDeferralsFc:"+t.postBillingDeferralsFc+","),null!=t.pbAllocationAmountFc&&""!=t.pbAllocationAmountFc&&(n=n+"pbAllocationAmountFc:"+t.pbAllocationAmountFc+","),null!=t.revBegBalFc&&""!=t.revBegBalFc&&(n=n+"revBegBalFc:"+t.revBegBalFc+","),null!=t.revCurrBalFc&&""!=t.revCurrBalFc&&(n=n+"revCurrBalFc:"+t.revCurrBalFc+","),null!=t.revEndBalFc&&""!=t.revEndBalFc&&(n=n+"revEndBalFc:"+t.revEndBalFc+","),null!=t.unamortizedAmountFc&&""!=t.unamortizedAmountFc&&(n=n+"unamortizedAmountFc:"+t.unamortizedAmountFc+","),null!=t.totalCostFc&&""!=t.totalCostFc&&(n=n+"totalCostFc:"+t.totalCostFc+","),null!=t.grossMarginFc&&""!=t.grossMarginFc&&(n=n+"grossMarginFc:"+t.grossMarginFc),null!=i.fromPeriod&&null!=i.fromPeriod&&(n=n+"lastArrgModifiedDate>"+this.datePipe.transform(i.fromPeriod,"yyyyMMdd")+","),null!=i.toPeriod&&null!=i.toPeriod&&(n=n+"lastArrgModifiedDate<"+this.datePipe.transform(i.toPeriod,"yyyyMMdd")+","),null!=i.fromArrgId&&null!=i.fromArrgId&&(n=n+"dealArrangementId>"+i.fromArrgId+","),null!=i.toArrgId&&null!=i.toArrgId&&(n=n+"dealArrangementId<"+i.toArrgId+","),null!=i.customerPoNum&&""!=i.customerPoNum&&(n=n+"customerPoNum:"+i.customerPoNum+","),null!=i.billToCustomer&&""!=i.billToCustomer&&(n=n+"billToCustomer:"+i.billToCustomer+","),null!=i.billToCustomerNumber&&""!=i.billToCustomerNumber&&(n=n+"billToCustomerNumber:"+i.billToCustomerNumber+","),null!=i.salesRegion&&""!=i.salesRegion&&(n=n+"salesRegion:"+i.salesRegion+","),null!=i.legalEntityName&&""!=i.legalEntityName&&(n=n+"legalEntityName:"+i.legalEntityName+","),null!=i.salesContract&&""!=i.salesContract&&(n=n+"salesContract:"+i.salesContract+","),""==n?a+="search=%25":a=a+"search="+n,null==e.pageNumber||""==e.pageNumber||isNaN(e.pageNumber)||0==e.pageNumber||(a=a+"&page="+e.pageNumber+"&size="+e.pageSize),null!=l&&""!=l&&(a=a+"&exportCols="+l),a}getAllRmanArrgSummaryReportV(e,t,o,i){let l=this.getServiceUrl(e,t,0,o,i);return this.http.get(l).toPromise().then(e=>e)}searchRmanArrgSummaryReportV(e){return this.http.get(c.apiUrl+"/RMAN_ARRG_SUMMARY_REPORT_V/search/findByDealArrangementIdAndDealArrangementNumberAndDealArrangementNameAndDealArrangementStatusAndLegalEntityNameAndDealArrangementSourceAndCustomerPoNumAndBookingCurrencyAndShipToCustomerAndShipToCustomerNumberAndBillToCustomerAndBillToCustomerNumberAndSalesTheaterAndSalesRegionAndSalesTerritoryAndBookedAmountAndSspAmountAndAllocationAmountAndCarveInOutAmountAndDeliveredAmountAndBilledAmountAndDeliveredAllocationAmountAndPostBillingDeferralsAndPostBillingAllocationAmountAndRevBegBalAndRevCurrBalAndRevEndBalAndUnamortizedAmountAndRevenueUnbilledAndAllocationAmountFcAndDeliveredAllocationAmountFcAndPostBillingDeferralsFcAndPbAllocationAmountFcAndRevBegBalFcAndRevCurrBalFcAndRevEndBalFcAndUnamortizedAmountFcAndTotalCostFcAndGrossMarginFc?dealArrangementId="+e.dealArrangementId+"&dealArrangementNumber="+e.dealArrangementNumber+"&dealArrangementName="+e.dealArrangementName+"&dealArrangementStatus="+e.dealArrangementStatus+"&legalEntityName="+e.legalEntityName+"&dealArrangementSource="+e.dealArrangementSource+"&customerPoNum="+e.customerPoNum+"&bookingCurrency="+e.bookingCurrency+"&shipToCustomer="+e.shipToCustomer+"&shipToCustomerNumber="+e.shipToCustomerNumber+"&billToCustomer="+e.billToCustomer+"&billToCustomerNumber="+e.billToCustomerNumber+"&salesTheater="+e.salesTheater+"&salesRegion="+e.salesRegion+"&salesTerritory="+e.salesTerritory+"&bookedAmount="+e.bookedAmount+"&sspAmount="+e.sspAmount+"&allocationAmount="+e.allocationAmount+"&carveInOutAmount="+e.carveInOutAmount+"&deliveredAmount="+e.deliveredAmount+"&billedAmount="+e.billedAmount+"&deliveredAllocationAmount="+e.deliveredAllocationAmount+"&postBillingDeferrals="+e.postBillingDeferrals+"&postBillingAllocationAmount="+e.postBillingAllocationAmount+"&revBegBal="+e.revBegBal+"&revCurrBal="+e.revCurrBal+"&revEndBal="+e.revEndBal+"&unamortizedAmount="+e.unamortizedAmount+"&revenueUnbilled="+e.revenueUnbilled+"&allocationAmountFc="+e.allocationAmountFc+"&deliveredAllocationAmountFc="+e.deliveredAllocationAmountFc+"&postBillingDeferralsFc="+e.postBillingDeferralsFc+"&pbAllocationAmountFc="+e.pbAllocationAmountFc+"&revBegBalFc="+e.revBegBalFc+"&revCurrBalFc="+e.revCurrBalFc+"&revEndBalFc="+e.revEndBalFc+"&unamortizedAmountFc="+e.unamortizedAmountFc+"&totalCostFc="+e.totalCostFc+"&grossMarginFc="+e.grossMarginFc).toPromise().then(e=>e)}saveRmanArrgSummaryReportV(e){let t=JSON.stringify(e);return this.http.post(c.apiUrl+"/RMAN_ARRG_SUMMARY_REPORT_V",t,d).toPromise().then(e=>e)}updateRmanArrgSummaryReportV(e){delete e._links,delete e.interests;let t=JSON.stringify(e);return this.http.put(c.apiUrl+"/RMAN_ARRG_SUMMARY_REPORT_V/"+e.dealArrangementId,t,d).toPromise().then(e=>e)}deleteRmanArrgSummaryReportV(e){return this.http.delete(c.apiUrl+"/RMAN_ARRG_SUMMARY_REPORT_V/"+e.dealArrangementId,d).toPromise().then(e=>e)}fetchRCNumbers(e){return this.http.get(c.apiUrl+"/fetchAllRC?rc="+e).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b),r.Zb(s.f))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var h=o("ElGL"),g=o("DBtk"),b=o("xJ9n"),p=o("/8oK"),m=o("7CaW"),f=o("7zfz"),y=o("rEr+"),C=o("/RsI"),v=o("3Pt+"),A=o("V5BG"),S=o("eO1q"),M=o("7kUa"),R=o("jIHw"),V=o("+07z"),U=o("TjhJ"),w=o("pqzn");function D(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",44),r.dc("click",(function(){return r.Dc(e),r.gc(2).exportExcel()})),r.Qb(1,"em",45),r.Ub()}}function N(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",58),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(3).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(3).onDrop(t)})),r.Vb(2,"div",59),r.Vb(3,"input",60),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(3).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const F=function(){return{color:"grey"}};function x(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",61),r.Vb(2,"div"),r.Vb(3,"input",62),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(3).selectColumns(t)})),r.Ub(),r.Vb(4,"label",63),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,F)),r.Eb(1),r.Nc(e.header)}}function E(e,t){if(1&e&&(r.Kc(0,N,6,3,"div",57),r.Kc(1,x,6,6,"div",57)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const T=function(){return{width:"100%",height:"100%"}};function k(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",46),r.Vb(1,"div",47),r.Vb(2,"div",48),r.Vb(3,"input",49),r.dc("click",(function(){return r.Dc(e),r.gc(2).onSelectAll()})),r.Ub(),r.Vb(4,"label",50),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",51),r.dc("click",(function(t){return r.Dc(e),r.gc(2).closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",52),r.Kc(9,E,2,2,"ng-template",53),r.Ub(),r.Ub(),r.Vb(10,"div",54),r.Vb(11,"a",55),r.dc("click",(function(){return r.Dc(e),r.gc(2).saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",56),r.dc("click",(function(t){return r.Dc(e),r.gc(2).closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc(2);r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,T)),r.oc("options",e.globalCols)}}function L(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",34),r.Vb(1,"a",35),r.dc("click",(function(){return r.Dc(e),r.gc().goToOperationReports()})),r.Qb(2,"em",36),r.Mc(3,"Back"),r.Ub(),r.Vb(4,"a",35),r.dc("click",(function(t){return r.Dc(e),r.gc().onConfiguringColumns(t)})),r.Qb(5,"em",37),r.Mc(6,"Columns"),r.Ub(),r.Vb(7,"a",38),r.dc("click",(function(){return r.Dc(e),r.gc().showDialogToSearch()})),r.Qb(8,"em",39),r.Ub(),r.Vb(9,"a",40),r.dc("click",(function(){r.Dc(e);const t=r.gc(),o=r.Bc(11);return t.reset(o)})),r.Qb(10,"em",41),r.Ub(),r.Kc(11,D,2,0,"a",42),r.Kc(12,k,15,5,"div",43),r.Ub()}if(2&e){const e=r.gc();r.Eb(11),r.oc("ngIf",!e.disableExport),r.Eb(1),r.oc("ngIf",!e.showAddColumns)}}function P(e,t){1&e&&r.Qb(0,"col")}function O(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,P,1,0,"col",64),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const I=function(e){return{display:e}};function B(e,t){if(1&e&&(r.Vb(0,"th",67),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,I,e.display)),r.Eb(1),r.Nc(e.header)}}function z(e,t){if(1&e&&(r.Vb(0,"th",68),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,I,e.display)),r.Eb(1),r.Nc(e.header)}}function Q(e,t){if(1&e&&(r.Tb(0),r.Kc(1,B,2,5,"th",65),r.Kc(2,z,2,5,"th",66),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type||"date"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type||"round"==e.type||"link"==e.type)}}function K(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Q,3,2,"ng-container",64),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function _(e,t){if(1&e&&(r.Vb(0,"td",72),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,I,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function q(e,t){if(1&e&&(r.Vb(0,"td",73),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,I,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function W(e,t){if(1&e&&(r.Vb(0,"td",72),r.hc(1,"date"),r.Mc(2),r.hc(3,"date"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.jc(1,3,t[e.field],"MM/dd/yyyy")),r.oc("ngStyle",r.sc(9,I,e.display)),r.Eb(2),r.Oc(" ",r.jc(3,6,t[e.field],"MM/dd/yyyy")," ")}}function j(e,t){if(1&e&&(r.Vb(0,"td",73),r.hc(1,"round"),r.Mc(2),r.hc(3,"round"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.ic(1,3,t[e.field])),r.oc("ngStyle",r.sc(7,I,e.display)),r.Eb(2),r.Oc(" ",r.ic(3,5,t[e.field])," ")}}function J(e,t){if(1&e&&(r.Tb(0),r.Kc(1,_,2,5,"td",70),r.Kc(2,q,2,5,"td",71),r.Kc(3,W,4,11,"td",70),r.Kc(4,j,4,9,"td",71),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type),r.Eb(1),r.oc("ngIf","date"==e.type),r.Eb(1),r.oc("ngIf","round"==e.type)}}function H(e,t){if(1&e&&(r.Vb(0,"tr",69),r.Kc(1,J,5,4,"ng-container",64),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function G(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",74),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.Eb(1),r.Fb("colspan",e.length),r.Eb(1),r.Nc(o.noData)}}const Y=function(){return{standalone:!0}};let Z=(()=>{class e{constructor(e,t,o,i,l,a,n,r){this.rmanArrgSummaryReportVService=e,this.location=t,this.commonSharedService=o,this.notificationService=i,this.rmanCustomersService=l,this.rmanLookupCodesService=a,this.rmanLegalEntitiesService=n,this.rmanFiscalPeriodsService=r,this.rmanArrgSummaryReportV=new X,this.rmanArrgSummaryReportVSearch=new X,this.isSerached=0,this.searchFields={},this.collapsed=!0,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.customerNames=[],this.customerNumbers=[],this.regions=[],this.legalEntities=[],this.dealArrangementNumbers=[],this.currentPeriod={},this.paginationOptions={pageNumber:0,pageSize:"10000"},this.rmanFiscalPeriodsService.getCurrentfiscalperiod().then(e=>{this.currentPeriod=e})}ngOnInit(){this.globalCols=[{field:"dealArrangementNumber",header:"Revenue Contract Number",showField:!0,display:"table-cell",type:"number",drag:!1},{field:"dealArrangementBasis",header:"Revenue Contract Basis",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealArrangementStatus",header:"Status",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"lastArrgModifiedDate",header:"Revenue Contract Modified Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"legalEntityName",header:"Billing Company",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealArrangementSource",header:"Revenue Contract Source",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesContact",header:"Sales Rep",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"customerPoNum",header:"PO Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"bookingCurrency",header:"Currency",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"billToCustomer",header:"Customer Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"billToCustomerNumber",header:"Customer Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"salesTheater",header:"Sales Theater",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesRegion",header:"Billing Region",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesTerritory",header:"Sales Territory",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"bookedAmount",header:"Booked Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"sspAmount",header:"Extended SSP Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"allocationAmount",header:"Allocation Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"carveInOutAmount",header:"Carve In/Carve Out Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAmount",header:"Delivered Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"billedAmount",header:"Invoice Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAllocationAmount",header:"Delivered Allocation Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"postBillingDeferrals",header:"Post Billing Deferrals (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"postBillingAllocationAmount",header:"Post Billing Allocation Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revBegBal",header:"Revenue Beginning Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revCurrBal",header:"Revenue Current Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revEndBal",header:"Revenue Ending Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"unamortizedAmount",header:"Unamortized Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"allocationAmountFc",header:"Allocation Amount (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAllocationAmountFc",header:"Delivered Allocation Amount (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"postBillingDeferralsFc",header:"Post Billing Deferrals (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"pbAllocationAmountFc",header:"Post Billing Allocation Amount (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revBegBalFc",header:"Revenue Beginning Balance (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revCurrBalFc",header:"Revenue Current Balance (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revEndBalFc",header:"Revenue Ending Balance (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"unamortizedAmountFc",header:"Unamortized Amount (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"totalCostFc",header:"Total Cost (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"grossMarginFc",header:"Gross Margin (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contractAsset",header:"Contract Asset (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contractLiability",header:"Contract Liability (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deferredRevenue",header:"Deferred Revenue Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"clearing",header:"Invoice Revenue (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contractAssetFc",header:"Contract Asset (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contractLiabilityFc",header:"Contract Liability (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deferredRevenueFc",header:"Deferred Revenue (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"clearingFc",header:"Invoice Revenue (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"salesContract",header:"Sales Contract Number",showField:!0,display:"table-cell",type:"text",drag:!0}],this.columns=[],this.getTableColumns("rmanArrgSummaryReportV","Revenue Contract Summary Report")}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("rmanArrgSummaryReportV","Revenue Contract Summary Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}reset(e){this.paginationOptions={},this.searchFields={},e.reset()}getAllRmanArrgSummaryReportV(){this.loading=!0,this.rmanArrgSummaryReportVService.getAllRmanArrgSummaryReportV(this.paginationOptions,this.rmanArrgSummaryReportV,this.searchFields,this.exportCols).then(e=>{this.datasource=e.content,this.rmanArrgSummaryReportVList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.loading=!1,this.disableExport=!1,this.displaySearchDialog=!1})}searchCustomerNames(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerName:e.query},!1).then(e=>{this.customerNames=e.content.map(e=>e.customerName)}).catch(e=>{this.customerNames=[]})}searchCustomerNumbers(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerNumber:e.query},!1).then(e=>{this.customerNumbers=e.content.map(e=>e.customerNumber)}).catch(e=>{this.customerNumbers=[]})}searchRegions(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"REGIONS",enabledFlag:"Y",lookupCode:e.query}).then(e=>{this.regions=e.content.map(e=>e.lookupCode)}).catch(e=>{this.regions=[]})}searchLegalEntities(e){this.rmanLegalEntitiesService.getAllRmanLegalEntities(this.paginationOptions,{name:e.query}).then(e=>{this.legalEntities=e.content.map(e=>e.name)}).catch(e=>{this.legalEntities=[]})}searchRCList(e){this.rmanArrgSummaryReportVService.fetchRCNumbers(e.query).then(e=>{this.dealArrangementNumbers=e.map(e=>e)}).catch(e=>{this.dealArrangementNumbers=[]})}getRmanArrgSummaryReportV(e){this.paginationOptions={pageNumber:e.first/e.rows,pageSize:this.pageSize,sortField:e.sortField,sortOrder:e.sortOrder},this.loading=!0,this.rmanArrgSummaryReportVService.getAllRmanArrgSummaryReportV(this.paginationOptions,this.rmanArrgSummaryReportV,this.searchFields,this.exportCols).then(e=>{this.datasource=e.content,this.rmanArrgSummaryReportVList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.loading=!1,this.disableExport=!1})}exportExcel(){this.exportCols=[],this.loading=!0;for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].field);let e=this.rmanArrgSummaryReportVService.getServiceUrl(this.paginationOptions,this.rmanArrgSummaryReportV,1,this.searchFields,this.exportCols);this.loading=!1,window.location.href=e}findSelectedRmanArrgSummaryReportVIndex(){return this.rmanArrgSummaryReportVList.indexOf(this.selectedRmanArrgSummaryReportV)}onRowSelect(e){}showDialogToSearch(){0==this.isSerached&&(this.rmanArrgSummaryReportVSearch=new X),this.displaySearchDialog=!0,0==this.isSerached&&(this.searchFields.fromPeriod=new Date(this.currentPeriod.startDate),this.searchFields.toPeriod=new Date(this.currentPeriod.endDate))}search(){this.isSerached=1,this.paginationOptions={},this.rmanArrgSummaryReportV=this.rmanArrgSummaryReportVSearch,this.getAllRmanArrgSummaryReportV(),this.displaySearchDialog=!1}onBeforeToggle(e){this.collapsed=e.collapsed}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(u),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a),r.Pb(h.a),r.Pb(g.a),r.Pb(b.a),r.Pb(p.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["rmanArrgSummaryReportV-data"]],features:[r.Db([u,h.a,g.a,b.a,p.a])],decls:71,vars:56,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Consolidated Arrangements Summary Report",3,"toggleable","onBeforeToggle"],["class","pull-right icons-list",4,"ngIf"],[1,"x-scroll"],["id","arrgSummary-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","paginator","lazy","rows","totalRecords","columns","resizableColumns","onRowSelect","onLazyLoad"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Search","width","800","showEffect","fade",3,"visible","draggable","modal","visibleChange"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"md-inputfield"],[1,"selectSpan"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","from",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],[1,"ui-g-6","pull-right"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","to",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["showAnim","slideDown","inputStyleClass","textbox","name","fromPeriod","id","fromPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","From Period",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],["showAnim","slideDown","name","toPeriod","inputStyleClass","textbox","id","toPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","To Period",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Name Type atleast 3 Characters","id","billToCustomer",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Number Type atleast 3 Characters","id","billToCustomerNumber",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Billing Region Type atleast 2 Characters","id","salesRegion",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Billing Company Type atleast 2 Characters","id","legalEntityName",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["pInputText","","name","salesContract","id","salesContract","placeholder","Sales Contract Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","button","pButton","","label","Cancel",1,"secondary-btn",3,"click"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["class","number","pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["pResizableColumn","",3,"ngStyle","title"],["pResizableColumn","",1,"number",3,"ngStyle","title"],[3,"pSelectableRow"],[3,"title","ngStyle",4,"ngIf"],["class","number",3,"title","ngStyle",4,"ngIf"],[3,"title","ngStyle"],[1,"number",3,"title","ngStyle"],[1,"no-data"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Kc(8,L,13,2,"div",7),r.Ub(),r.Vb(9,"div",8),r.Vb(10,"p-table",9,10),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)}))("onLazyLoad",(function(e){return t.getRmanArrgSummaryReportV(e)})),r.Kc(12,O,2,1,"ng-template",11),r.Kc(13,K,2,1,"ng-template",12),r.Kc(14,H,2,2,"ng-template",13),r.Kc(15,G,3,2,"ng-template",14),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(16,"p-dialog",15),r.dc("visibleChange",(function(e){return t.displaySearchDialog=e})),r.Vb(17,"form"),r.Vb(18,"div",16),r.Vb(19,"div",17),r.Vb(20,"div",18),r.Vb(21,"span",19),r.Vb(22,"span",20),r.Mc(23,"Revenue Contract Number From"),r.Ub(),r.Vb(24,"p-autoComplete",21),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.searchFields.fromArrgId=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(25,"div",22),r.Vb(26,"span",19),r.Vb(27,"span",20),r.Mc(28,"Revenue Contract Number To"),r.Ub(),r.Vb(29,"p-autoComplete",23),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.searchFields.toArrgId=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(30,"div",17),r.Vb(31,"div",18),r.Vb(32,"span",20),r.Mc(33,"From Period"),r.Ub(),r.Vb(34,"p-calendar",24),r.dc("ngModelChange",(function(e){return t.searchFields.fromPeriod=e})),r.Ub(),r.Ub(),r.Vb(35,"div",22),r.Vb(36,"span",20),r.Mc(37,"To Period"),r.Ub(),r.Vb(38,"p-calendar",25),r.dc("ngModelChange",(function(e){return t.searchFields.toPeriod=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(39,"div",17),r.Vb(40,"div",18),r.Vb(41,"span",19),r.Vb(42,"span",20),r.Mc(43,"Customer Name"),r.Ub(),r.Vb(44,"p-autoComplete",26),r.dc("completeMethod",(function(e){return t.searchCustomerNames(e)}))("ngModelChange",(function(e){return t.searchFields.billToCustomer=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(45,"div",22),r.Vb(46,"span",19),r.Vb(47,"span",20),r.Mc(48,"Customer Number"),r.Ub(),r.Vb(49,"p-autoComplete",27),r.dc("completeMethod",(function(e){return t.searchCustomerNumbers(e)}))("ngModelChange",(function(e){return t.searchFields.billToCustomerNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(50,"div",17),r.Vb(51,"div",18),r.Vb(52,"span",19),r.Vb(53,"span",20),r.Mc(54,"Billing Region"),r.Ub(),r.Vb(55,"p-autoComplete",28),r.dc("completeMethod",(function(e){return t.searchRegions(e)}))("ngModelChange",(function(e){return t.searchFields.salesRegion=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(56,"div",22),r.Vb(57,"span",19),r.Vb(58,"span",20),r.Mc(59,"Billing Company"),r.Ub(),r.Vb(60,"p-autoComplete",29),r.dc("completeMethod",(function(e){return t.searchLegalEntities(e)}))("ngModelChange",(function(e){return t.searchFields.legalEntityName=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(61,"div",17),r.Vb(62,"div",18),r.Vb(63,"span",19),r.Vb(64,"span",20),r.Mc(65,"Sales Contract Number"),r.Ub(),r.Vb(66,"input",30),r.dc("ngModelChange",(function(e){return t.searchFields.salesContract=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(67,"p-footer"),r.Vb(68,"div",31),r.Vb(69,"button",32),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(70,"button",33),r.dc("click",(function(){return t.displaySearchDialog=!1})),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(2),r.oc("ngIf",t.collapsed),r.Eb(2),r.oc("loading",t.loading)("value",t.rmanArrgSummaryReportVList)("paginator",t.showPaginator)("lazy",!0)("rows",t.pageSize)("totalRecords",t.totalElements)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("visible",t.displaySearchDialog)("draggable",!0)("modal",!0),r.Eb(8),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(47,Y))("ngModel",t.searchFields.fromArrgId),r.Eb(5),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(48,Y))("ngModel",t.searchFields.toArrgId),r.Eb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(49,Y))("ngModel",t.searchFields.fromPeriod),r.Eb(4),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(50,Y))("ngModel",t.searchFields.toPeriod),r.Eb(6),r.oc("suggestions",t.customerNames)("minLength",3)("ngModelOptions",r.rc(51,Y))("ngModel",t.searchFields.billToCustomer),r.Eb(5),r.oc("suggestions",t.customerNumbers)("minLength",3)("ngModelOptions",r.rc(52,Y))("ngModel",t.searchFields.billToCustomerNumber),r.Eb(6),r.oc("suggestions",t.regions)("minLength",2)("ngModelOptions",r.rc(53,Y))("ngModel",t.searchFields.salesRegion),r.Eb(5),r.oc("suggestions",t.legalEntities)("minLength",2)("ngModelOptions",r.rc(54,Y))("ngModel",t.searchFields.legalEntityName),r.Eb(6),r.oc("ngModelOptions",r.rc(55,Y))("ngModel",t.searchFields.salesContract))},directives:[m.a,f.c,s.o,y.j,f.f,C.a,v.v,v.l,v.m,A.a,v.k,v.n,S.a,v.b,M.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i],pipes:[s.f,w.a],encapsulation:2}),e})();class X{constructor(e,t,o,i,l,a,n,r,s,c,d,u,h,g,b,p,m,f,y,C,v,A,S,M,R,V,U,w,D,N,F,x,E,T,k,L,P,O,I,B,z,Q,$,K,_,q,W){this.dealArrangementNumber=e,this.revEndBal=t,this.postBillingDeferrals=o,this.revenueUnbilled=i,this.pbAllocationAmountFc=l,this.deliveredAllocationAmount=a,this.revCurrBal=n,this.revBegBalFc=r,this.salesTheater=s,this.salesTerritory=c,this.dealArrangementName=d,this.allocationAmount=u,this.billToCustomerNumber=h,this.unamortizedAmount=g,this.revCurrBalFc=b,this.salesRegion=p,this.shipToCustomerNumber=m,this.carveInOutAmount=f,this.billToCustomer=y,this.sspAmount=C,this.revBegBal=v,this.bookedAmount=A,this.postBillingDeferralsFc=S,this.shipToCustomer=M,this.dealArrangementSource=R,this.bookingCurrency=V,this.revEndBalFc=U,this.customerPoNum=w,this.dealArrangementId=D,this.billedAmount=N,this.allocationAmountFc=F,this.deliveredAllocationAmountFc=x,this.legalEntityName=E,this.grossMarginFc=T,this.postBillingAllocationAmount=k,this.unamortizedAmountFc=L,this.deliveredAmount=P,this.totalCostFc=O,this.dealArrangementStatus=I,this.contractAsset=B,this.contractLiability=z,this.deferredRevenue=Q,this.clearing=$,this.contractAssetFc=K,this.contractLiabilityFc=_,this.deferredRevenueFc=q,this.clearingFc=W}}const ee=o("+yMW");let te=(()=>{class e{constructor(e){this.http=e}getAllRmanArrgWaterfallReportV(e,t){let o=ee.apiUrl+"/rmanArrgWaterfallReportNvSearch?";return o+="search=%25",this.http.get(o).toPromise().then(e=>e)}getRmanWaterFallDetailsReport(e,t,o,i,l,a,n,r,s,c,d,u,h,g){return null==o&&(o=""),null==i&&(i=""),null==l&&(l=""),null==a&&(a=""),null==n&&(n=""),null==e&&(e=0),null==t&&(t=0),null==r&&(r=""),null==s&&(s=""),null==c&&(c=""),null==d&&(d=""),null==u&&(u=""),null==h&&(h=""),null==g&&(g=""),this.http.get(ee.apiUrl+"/revmantra/wfr/?fromArrgId="+e+"&toArrgId="+t+"&fromPeriod="+o+"&toPeriod="+i+"&po="+l+"&so="+a+"&legalEntity="+n+"&customerName="+r+"&customerNumber="+s+"&region="+c+"&productFamily="+d+"&productLine="+u+"&assetId="+h+"&salesContract="+g).toPromise().then(e=>e)}getRmanWaterFallDetailsReportFile(e,t,o,i,l,a,n,r,s,c,d,u,h,g,b){null==o&&(o=""),null==i&&(i=""),null==a&&(a=""),null==l&&(l=""),null==n&&(n=""),null==e&&(e=0),null==t&&(t=0),null==r&&(r=""),null==s&&(s=""),null==c&&(c=""),null==d&&(d=""),null==u&&(u=""),null==h&&(h=""),null==g&&(g="");let p=ee.apiUrl+"/exportWFReport?fromArrgId="+e+"&toArrgId="+t+"&fromPeriod="+o+"&toPeriod="+i+"&po="+l+"&so="+a+"&legalEntity="+n+"&customerName="+r+"&customerNumber="+s+"&region="+c+"&productFamily="+d+"&productLine="+u+"&assetId="+h+"&salesContract="+g;return null!=b&&""!=b&&(p=p+"&exportCols="+b),p}fetchRCNumbers(e){return this.http.get(ee.apiUrl+"/fetchAllRC?rc="+e).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var oe=o("arFO");function ie(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",61),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",62),r.Vb(3,"input",63),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const le=function(){return{color:"grey"}};function ae(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",64),r.Vb(2,"div"),r.Vb(3,"input",65),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",66),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,le)),r.Eb(1),r.Nc(e.header)}}function ne(e,t){if(1&e&&(r.Kc(0,ie,6,3,"div",60),r.Kc(1,ae,6,6,"div",60)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const re=function(){return{width:"100%",height:"100%"}};function se(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",49),r.Vb(1,"div",50),r.Vb(2,"div",51),r.Vb(3,"input",52),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",53),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",54),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",55),r.Kc(9,ne,2,2,"ng-template",56),r.Ub(),r.Ub(),r.Vb(10,"div",57),r.Vb(11,"a",58),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",59),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,re)),r.oc("options",e.globalCols)}}function ce(e,t){1&e&&r.Qb(0,"col")}function de(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,ce,1,0,"col",67),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const ue=function(e,t){return{display:e,"text-align":t}};function he(e,t){if(1&e&&(r.Vb(0,"th",69),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.oc("ngStyle",r.tc(2,ue,e.display,e.text)),r.Eb(1),r.Oc(" ",e.header," ")}}function ge(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,he,2,5,"th",68),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function be(e,t){if(1&e&&(r.Vb(0,"td",72),r.Vb(1,"span",73),r.Mc(2),r.hc(3,"number"),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc();r.oc("ngStyle",r.tc(6,ue,e.display,e.text)),r.Eb(1),r.pc("title",o[e.field]),r.Eb(1),r.Nc("number"==i.fieldType(o[e.field])?r.jc(3,3,o[e.field],"1.2-2"):o[e.field])}}function pe(e,t){if(1&e&&(r.Vb(0,"tr",70),r.Kc(1,be,4,9,"td",71),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function me(e,t){if(1&e&&(r.Vb(0,"div",74),r.Vb(1,"p"),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}const fe=function(){return{standalone:!0}},ye=o("+yMW");let Ce=(()=>{class e{constructor(e,t,o,i,l,a,n,r){this.rmanArrgWaterfallReportVService=e,this.rmanFiscalPeriodsService=t,this.rmanLegalEntitiesService=o,this.location=i,this.commonSharedService=l,this.notificationService=a,this.rmanCustomersService=n,this.rmanLookupCodesService=r,this.columns=[],this.isSerached=0,this.selectedCustomer={},this.legalEntitiesList=[],this.fiscalPeriodsList=[],this.fromPeriodArray=[],this.entities=[],this.customers=[],this.currentPeriod={},this.noData=ye.noData,this.collapsed=!1,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.customerNames=[],this.customerNumbers=[],this.regions=[],this.legalEntities=[],this.productFamilies=[],this.productLines=[],this.dealArrangementNumbers=[],this.currentDate=new Date,this.globalCols=[],this.paginationOptions={pageNumber:0,pageSize:"10000"},this.rmanFiscalPeriodsService.getCurrentfiscalperiod().then(e=>{this.currentPeriod=e})}ngOnInit(){this.rowCount=20,this.rmanLegalEntitiesService.getAllRmanLegalEntities(this.paginationOptions,{}).then(e=>{this.legalEntitiesList=e.content,this.getEntities()}),this.getAllRmanArrgWaterfallReportV2()}getTableColumns(e,t){this.isSelectAllChecked=!0;const o=["Jan-","Feb-","Mar-","Apr-","May-","Jun-","Jul-","Aug-","Sep-","Oct-","Nov-","Dec-"];this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)||1==this.checkIfStringStartsWith(t.field,o)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}checkIfStringStartsWith(e,t){return t.some(t=>e.startsWith(t))}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&0==this.checkIfStringStartsWith(o.field,["Jan-","Feb-","Mar-","Apr-","May-","Jun-","Jul-","Aug-","Sep-","Oct-","Nov-","Dec-"])&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("rmanArrgWaterfallReportV","WaterFall Details Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while saving"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}buildPivot(){var e=$.pivotUtilities.aggregatorTemplates.sum,t=(0,$.pivotUtilities.numberFormat)({digitsAfterDecimal:2});$("#pivot").pivot(this.data,{rows:["dealArrangementNumber","dealName","dealLineNumber","orderNumber","sourceLineNumber"],cols:["seqNumber","glPeriodNew"],aggregator:e(t)(["glAmount"]),aggregatorName:"Sum",rendererName:"Table",hideTotals:!0}),$(".pvtTotal").hide(),$(".colTotal").hide(),$(".pvtTotalLabel").hide(),$(".pvtGrandTotal").hide()}getAllRmanArrgWaterfallReportV(){this.rmanArrgWaterfallReportVService.getAllRmanArrgWaterfallReportV(this.paginationOptions,{}).then(e=>{this.data=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.buildPivot(),this.disableExport=!1})}onBeforeToggle(e){this.collapsed=e.collapsed}paginate(e){this.loading=!0,this.arrgWaterFallRepList=this.arrgWaterFallList.slice(e.first,e.first+10),this.loading=!1}onRowSelect(e){}getAllRmanArrgWaterfallReportV2(){this.globalCols=[],this.loading=!0,this.customerNumber=void 0===this.selectedCustomer.customerNumber?this.customerNumber:this.selectedCustomer.customerNumber,this.rmanArrgWaterfallReportVService.getRmanWaterFallDetailsReport(this.fromArrgId,this.toArrgId,this.fromPeriod,this.toPeriod,this.po,this.so,this.legalEntity,this.customerName,this.customerNumber,this.region,this.productFamily,this.productLine,this.assetId,this.salesContract).then(e=>{this.arrgWaterFallRepList=e.Content,this.arrgWaterFallList=e.Content;let t=this.arrgWaterFallRepList[0];for(let i in t)this.globalCols.push({field:i,header:i,style:{width:"100px","text-align":"right"},display:"table-cell",showField:!0,text:"right",drag:!0});let o=["NOTE","Cont Apply","Element Type","Customer","Arrangement Name","Legal Entity","Deal Name","Product Name","Product Line","Division","Product Family","Current Period","Delivered Date","Rev SDate","Rev EDate","Revenue Contract Name"];for(let i=0;i<this.globalCols.length;i++)this.globalCols[i].text=-1==o.indexOf(this.globalCols[i].header)?"right":"left";this.totalRecords=this.arrgWaterFallRepList.length,this.loading=!1,this.columns=[],this.getTableColumns("rmanArrgWaterfallReportV","WaterFall Details Report")}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}showDialogToSearch(){this.fromArrgId=null,this.toArrgId=null,this.po="",this.so=null,this.legalEntity=null,this.region="",this.customerName="",this.customerNumber="",this.assetId="",this.productFamily="",this.productLine="",this.salesContract="",this.selectedCustomer={},this.displayDialog=!0,0==this.isSerached?(this.fromPeriod=this.currentPeriod.periodName,this.toPeriod=this.currentPeriod.periodName):(this.fromPeriod="",this.toPeriod="")}searchPeriod(e){let t=[];this.rmanFiscalPeriodsService.getAllRmanFiscalPeriods(this.paginationOptions,{periodName:e.query}).then(e=>{this.fiscalPeriodsList=e.content,this.fiscalPeriodsList.forEach(e=>{t.push(e.periodName)}),this.fromPeriodArray=t})}exportCSVfile(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].header.replace(/[#$/()]/g,""));let e=this.rmanArrgWaterfallReportVService.getRmanWaterFallDetailsReportFile(this.fromArrgId,this.toArrgId,this.fromPeriod,this.toPeriod,this.po,this.so,this.legalEntity,this.customerName,this.customerNumber,this.region,this.productFamily,this.productLine,this.assetId,this.salesContract,this.exportCols);window.location.href=e}getEntities(){let e=[{label:"--Select Entity Name--",value:null}];this.legalEntitiesList.forEach(t=>{e.push({label:t.name,value:t.legalEntityId})}),this.entities=e}search(){this.isSerached=1,this.getAllRmanArrgWaterfallReportV2(),this.displayDialog=!1}searchCustomerNames(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerName:e.query},!1).then(e=>{this.customers=e.content}).catch(e=>{this.customers=[]})}searchCustomerNumbers(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerNumber:e.query},!1).then(e=>{this.customerNumbers=e.content.map(e=>e.customerNumber)}).catch(e=>{this.customerNumbers=[]})}searchRegions(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"REGIONS",enabledFlag:"Y",lookupCode:e.query}).then(e=>{this.regions=e.content.map(e=>e.lookupCode)}).catch(e=>{this.regions=[]})}searchLegalEntities(e){this.rmanLegalEntitiesService.getAllRmanLegalEntities(this.paginationOptions,{name:e.query}).then(e=>{this.legalEntities=e.content.map(e=>e.name)}).catch(e=>{this.legalEntities=[]})}searchProductFamilies(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"PRODUCT_FAMILIES",enabledFlag:"Y",description:e.query}).then(e=>{this.productFamilies=e.content.map(e=>e.description)}).catch(e=>{this.productFamilies=[]})}searchProductLines(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"PRODUCT_LINES",enabledFlag:"Y",description:e.query}).then(e=>{this.productLines=e.content.map(e=>e.description)}).catch(e=>{this.productLines=[]})}reset(e){this.fromArrgId=null,this.toArrgId=null,this.fromPeriod=this.currentPeriod.periodName,this.toPeriod=this.currentPeriod.periodName,this.po="",this.so=null,this.legalEntity=null,this.region="",this.customerName="",this.customerNumber="",this.assetId="",this.productFamily="",this.productLine="",this.salesContract="",this.selectedCustomer={},this.getAllRmanArrgWaterfallReportV2(),this.displayDialog=!1,this.isSerached=0}fieldType(e){return typeof e}isDateField(e){return-1!=e.search("Date")}searchRCList(e){this.rmanArrgWaterfallReportVService.fetchRCNumbers(e.query).then(e=>{this.dealArrangementNumbers=e.map(e=>e)}).catch(e=>{this.dealArrangementNumbers=[]})}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(te),r.Pb(p.a),r.Pb(b.a),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a),r.Pb(h.a),r.Pb(g.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["rmanArrgWaterfallReportV-data"]],features:[r.Db([te,p.a,b.a,h.a,g.a])],decls:113,vars:75,consts:[[1,"content-section","implementation"],[1,"card-wrapper","waterfall-detail-report"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","WaterFall Details Report",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll","mb-2"],["id","waterfall-dt","columnResizeMode","expand","scrollable","true",1,"ui-datatable","arrangementMgrTbl",3,"loading","exportFilename","value","paginator","rows","columns","resizableColumns"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Search","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"md-inputfield"],[1,"selectSpan"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","from",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],[1,"ui-g-6","pull-right"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","to",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputId","fromPeriodName","inputStyleClass","textbox","appendTo","body",3,"ngModel","ngModelOptions","suggestions","minLength","ngModelChange","completeMethod"],["inputId","toPeriodName","inputStyleClass","textbox","appendTo","body",3,"ngModel","ngModelOptions","suggestions","minLength","ngModelChange","completeMethod"],["pInputText","","name","po","id","po","placeholder","PO Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["pInputText","","name","so","id","so","placeholder","Order Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["name","legalEntity","id","legalEntity","appendTo","body",3,"options","ngModel","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Billing Region Type atleast 2 Characters","id","region",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Name Type atleast 3 Characters","id","from","field","customerName",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Number Type atleast 3 Characters","id","customerNumber",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Product Family Type atleast 2 Characters","id","productFamily",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Product Line Type atleast 2 Characters","id","productLine",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["pInputText","","name","assetId","id","assetId","placeholder","Asset ID",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["pInputText","","name","salesContract","id","salesContract","placeholder","Sales Contract Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","reset","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["style","width:100px","pResizableColumn","",3,"ngStyle",4,"ngFor","ngForOf"],["pResizableColumn","",2,"width","100px",3,"ngStyle"],[3,"pSelectableRow"],["style","width:100px",3,"ngStyle",4,"ngFor","ngForOf"],[2,"width","100px",3,"ngStyle"],[3,"title"],[1,"no-results-data"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(13,"em",10),r.Mc(14,"Columns"),r.Ub(),r.Vb(15,"a",11),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(16,"em",12),r.Ub(),r.Vb(17,"a",13),r.dc("click",(function(){r.Dc(e);const o=r.Bc(24);return t.reset(o)})),r.Qb(18,"em",14),r.Ub(),r.Vb(19,"a",15),r.dc("click",(function(){return r.Dc(e),r.Bc(24).exportCSV()})),r.Qb(20,"em",16),r.Ub(),r.Kc(21,se,15,5,"div",17),r.Ub(),r.Ub(),r.Vb(22,"div",18),r.Vb(23,"p-table",19,20),r.hc(25,"date"),r.Kc(26,de,2,1,"ng-template",21),r.Kc(27,ge,2,1,"ng-template",22),r.Kc(28,pe,2,2,"ng-template",23),r.Kc(29,me,3,1,"ng-template",24),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(30,"p-dialog",25),r.Vb(31,"form"),r.Vb(32,"div",26),r.Vb(33,"div",27),r.Vb(34,"div",28),r.Vb(35,"span",29),r.Vb(36,"span",30),r.Mc(37,"Revenue Contract Number From"),r.Ub(),r.Vb(38,"p-autoComplete",31),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.fromArrgId=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(39,"div",32),r.Vb(40,"span",29),r.Vb(41,"span",30),r.Mc(42,"Revenue Contract Number To"),r.Ub(),r.Vb(43,"p-autoComplete",33),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.toArrgId=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(44,"div",27),r.Vb(45,"div",28),r.Vb(46,"span",29),r.Vb(47,"span",30),r.Mc(48,"From Period"),r.Ub(),r.Vb(49,"p-autoComplete",34),r.dc("ngModelChange",(function(e){return t.fromPeriod=e}))("completeMethod",(function(e){return t.searchPeriod(e)})),r.Ub(),r.Ub(),r.Ub(),r.Vb(50,"div",32),r.Vb(51,"span",29),r.Vb(52,"span",30),r.Mc(53,"To Period"),r.Ub(),r.Vb(54,"p-autoComplete",35),r.dc("ngModelChange",(function(e){return t.toPeriod=e}))("completeMethod",(function(e){return t.searchPeriod(e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(55,"div",27),r.Vb(56,"div",28),r.Vb(57,"span",29),r.Vb(58,"span",30),r.Mc(59,"PO Number"),r.Ub(),r.Vb(60,"input",36),r.dc("ngModelChange",(function(e){return t.po=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(61,"div",32),r.Vb(62,"span",29),r.Vb(63,"span",30),r.Mc(64,"Order Number"),r.Ub(),r.Vb(65,"input",37),r.dc("ngModelChange",(function(e){return t.so=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(66,"div",27),r.Vb(67,"div",28),r.Vb(68,"span",30),r.Mc(69," Billing Company "),r.Ub(),r.Vb(70,"p-dropdown",38),r.dc("ngModelChange",(function(e){return t.legalEntity=e})),r.Ub(),r.Ub(),r.Vb(71,"div",32),r.Vb(72,"span",29),r.Vb(73,"span",30),r.Mc(74,"Billing Region"),r.Ub(),r.Vb(75,"p-autoComplete",39),r.dc("completeMethod",(function(e){return t.searchRegions(e)}))("ngModelChange",(function(e){return t.region=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(76,"div",27),r.Vb(77,"div",28),r.Vb(78,"span",29),r.Vb(79,"span",30),r.Mc(80,"Customer Name"),r.Ub(),r.Vb(81,"p-autoComplete",40),r.dc("completeMethod",(function(e){return t.searchCustomerNames(e)}))("ngModelChange",(function(e){return t.selectedCustomer=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(82,"div",32),r.Vb(83,"span",29),r.Vb(84,"span",30),r.Mc(85,"Customer Number"),r.Ub(),r.Vb(86,"p-autoComplete",41),r.dc("completeMethod",(function(e){return t.searchCustomerNumbers(e)}))("ngModelChange",(function(e){return t.customerNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(87,"div",27),r.Vb(88,"div",28),r.Vb(89,"span",29),r.Vb(90,"span",30),r.Mc(91,"Product Family"),r.Ub(),r.Vb(92,"p-autoComplete",42),r.dc("completeMethod",(function(e){return t.searchProductFamilies(e)}))("ngModelChange",(function(e){return t.productFamily=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(93,"div",32),r.Vb(94,"span",29),r.Vb(95,"span",30),r.Mc(96,"Product Line"),r.Ub(),r.Vb(97,"p-autoComplete",43),r.dc("completeMethod",(function(e){return t.searchProductLines(e)}))("ngModelChange",(function(e){return t.productLine=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(98,"div",27),r.Vb(99,"div",28),r.Vb(100,"span",29),r.Vb(101,"span",30),r.Mc(102,"Asset ID"),r.Ub(),r.Vb(103,"input",44),r.dc("ngModelChange",(function(e){return t.assetId=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(104,"div",32),r.Vb(105,"span",29),r.Vb(106,"span",30),r.Mc(107,"Sales Contract Number"),r.Ub(),r.Vb(108,"input",45),r.dc("ngModelChange",(function(e){return t.salesContract=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(109,"p-footer"),r.Vb(110,"div",46),r.Vb(111,"button",47),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(112,"button",48),r.dc("click",(function(){r.Dc(e);const o=r.Bc(24);return t.reset(o)})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(15),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.qc("exportFilename","Waterfall_Report_",r.jc(25,59,t.currentDate,"yyyyMMddhhmmss"),""),r.oc("loading",t.loading)("value",t.arrgWaterFallRepList)("paginator",!0)("rows",10)("columns",t.columns)("resizableColumns",!0),r.Eb(7),r.oc("visible",t.displayDialog)("closable",!1)("draggable",!0)("modal",!0),r.Eb(8),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(62,fe))("ngModel",t.fromArrgId),r.Eb(5),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(63,fe))("ngModel",t.toArrgId),r.Eb(6),r.oc("ngModel",t.fromPeriod)("ngModelOptions",r.rc(64,fe))("suggestions",t.fromPeriodArray)("minLength",3),r.Eb(5),r.oc("ngModel",t.toPeriod)("ngModelOptions",r.rc(65,fe))("suggestions",t.fromPeriodArray)("minLength",3),r.Eb(6),r.oc("ngModelOptions",r.rc(66,fe))("ngModel",t.po),r.Eb(5),r.oc("ngModelOptions",r.rc(67,fe))("ngModel",t.so),r.Eb(5),r.oc("options",t.entities)("ngModel",t.legalEntity),r.Eb(5),r.oc("suggestions",t.regions)("minLength",2)("ngModelOptions",r.rc(68,fe))("ngModel",t.region),r.Eb(6),r.oc("suggestions",t.customers)("minLength",3)("ngModelOptions",r.rc(69,fe))("ngModel",t.selectedCustomer),r.Eb(5),r.oc("suggestions",t.customerNumbers)("minLength",3)("ngModelOptions",r.rc(70,fe))("ngModel",t.customerNumber),r.Eb(6),r.oc("suggestions",t.productFamilies)("minLength",2)("ngModelOptions",r.rc(71,fe))("ngModel",t.productFamily),r.Eb(5),r.oc("suggestions",t.productLines)("minLength",2)("ngModelOptions",r.rc(72,fe))("ngModel",t.productLine),r.Eb(6),r.oc("ngModelOptions",r.rc(73,fe))("ngModel",t.assetId),r.Eb(5),r.oc("ngModelOptions",r.rc(74,fe))("ngModel",t.salesContract))},directives:[m.a,f.c,s.o,y.j,f.f,C.a,v.v,v.l,v.m,A.a,v.k,v.n,v.b,M.a,oe.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i],pipes:[s.f,s.g],encapsulation:2}),e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var ve=o("Mf/S");const Ae=o("+yMW");let Se=(()=>{class e{constructor(e){this.http=e}getAllRmanDefRollforwardReportV(e,t){let o=Ae.apiUrl+"/rmanDefRollforwardReportVSearch?",i="";return null!=t.periodDetail&&""!=t.periodDetail&&(i=i+"periodDetail:"+t.periodDetail+","),null!=t.dealArrangementId&&""!=t.dealArrangementId&&(i=i+"dealArrangementId:"+t.dealArrangementId+","),null!=t.dealArrangementNumber&&""!=t.dealArrangementNumber&&(i=i+"dealArrangementNumber:"+t.dealArrangementNumber+","),null!=t.dealArrangementName&&""!=t.dealArrangementName&&(i=i+"dealArrangementName:"+t.dealArrangementName+","),null!=t.dealArrangementBasis&&""!=t.dealArrangementBasis&&(i=i+"dealArrangementBasis:"+t.dealArrangementBasis+","),null!=t.dealArrangementStatus&&""!=t.dealArrangementStatus&&(i=i+"dealArrangementStatus:"+t.dealArrangementStatus+","),null!=t.legalEntityName&&""!=t.legalEntityName&&(i=i+"legalEntityName:"+t.legalEntityName+","),null!=t.dealArrangementSource&&""!=t.dealArrangementSource&&(i=i+"dealArrangementSource:"+t.dealArrangementSource+","),null!=t.customerPoNum&&""!=t.customerPoNum&&(i=i+"customerPoNum:"+t.customerPoNum+","),null!=t.dealName&&""!=t.dealName&&(i=i+"dealName:"+t.dealName+","),null!=t.dealNumber&&""!=t.dealNumber&&(i=i+"dealNumber:"+t.dealNumber+","),null!=t.dealLineNumber&&""!=t.dealLineNumber&&(i=i+"dealLineNumber:"+t.dealLineNumber+","),null!=t.sourceHeaderId&&""!=t.sourceHeaderId&&(i=i+"sourceHeaderId:"+t.sourceHeaderId+","),null!=t.orderNumber&&""!=t.orderNumber&&(i=i+"orderNumber:"+t.orderNumber+","),null!=t.sourceLineId&&""!=t.sourceLineId&&(i=i+"sourceLineId:"+t.sourceLineId+","),null!=t.sourceLineNumber&&""!=t.sourceLineNumber&&(i=i+"sourceLineNumber:"+t.sourceLineNumber+","),null!=t.productName&&""!=t.productName&&(i=i+"productName:"+t.productName+","),null!=t.orderedQuantity&&""!=t.orderedQuantity&&(i=i+"orderedQuantity:"+t.orderedQuantity+","),null!=t.uom&&""!=t.uom&&(i=i+"uom:"+t.uom+","),null!=t.transactionCurrency&&""!=t.transactionCurrency&&(i=i+"transactionCurrency:"+t.transactionCurrency+","),null!=t.unitListPrice&&""!=t.unitListPrice&&(i=i+"unitListPrice:"+t.unitListPrice+","),null!=t.unitNetPrice&&""!=t.unitNetPrice&&(i=i+"unitNetPrice:"+t.unitNetPrice+","),null!=t.lineAmount&&""!=t.lineAmount&&(i=i+"lineAmount:"+t.lineAmount+","),null!=t.discountPercent&&""!=t.discountPercent&&(i=i+"discountPercent:"+t.discountPercent+","),null!=t.productPortfolio&&""!=t.productPortfolio&&(i=i+"productPortfolio:"+t.productPortfolio+","),null!=t.productLine&&""!=t.productLine&&(i=i+"productLine:"+t.productLine+","),null!=t.productFamily&&""!=t.productFamily&&(i=i+"productFamily:"+t.productFamily+","),null!=t.shipToCustomer&&""!=t.shipToCustomer&&(i=i+"shipToCustomer:"+t.shipToCustomer+","),null!=t.shipToCustomerNumber&&""!=t.shipToCustomerNumber&&(i=i+"shipToCustomerNumber:"+t.shipToCustomerNumber+","),null!=t.billToCustomer&&""!=t.billToCustomer&&(i=i+"billToCustomer:"+t.billToCustomer+","),null!=t.billToCustomerNumber&&""!=t.billToCustomerNumber&&(i=i+"billToCustomerNumber:"+t.billToCustomerNumber+","),null!=t.salesTheater&&""!=t.salesTheater&&(i=i+"salesTheater:"+t.salesTheater+","),null!=t.salesRegion&&""!=t.salesRegion&&(i=i+"salesRegion:"+t.salesRegion+","),null!=t.salesTeritory&&""!=t.salesTeritory&&(i=i+"salesTeritory:"+t.salesTeritory+","),null!=t.lineCost&&""!=t.lineCost&&(i=i+"lineCost:"+t.lineCost+","),null!=t.bundleAttributedList&&""!=t.bundleAttributedList&&(i=i+"bundleAttributedList:"+t.bundleAttributedList+","),null!=t.bundleAttributedNet&&""!=t.bundleAttributedNet&&(i=i+"bundleAttributedNet:"+t.bundleAttributedNet+","),null!=t.startDate&&""!=t.startDate&&(i=i+"startDate:"+t.startDate+","),null!=t.endDate&&""!=t.endDate&&(i=i+"endDate:"+t.endDate+","),null!=t.sspAmount&&""!=t.sspAmount&&(i=i+"sspAmount:"+t.sspAmount+","),null!=t.allocationAmount&&""!=t.allocationAmount&&(i=i+"allocationAmount:"+t.allocationAmount+","),null!=t.bookedAmount&&""!=t.bookedAmount&&(i=i+"bookedAmount:"+t.bookedAmount+","),null!=t.deliveredAmount&&""!=t.deliveredAmount&&(i=i+"deliveredAmount:"+t.deliveredAmount+","),null!=t.deliveredAllocationAmount&&""!=t.deliveredAllocationAmount&&(i=i+"deliveredAllocationAmount:"+t.deliveredAllocationAmount+","),null!=t.postBillingDeferrals&&""!=t.postBillingDeferrals&&(i=i+"postBillingDeferrals:"+t.postBillingDeferrals+","),null!=t.beginingBalance&&""!=t.beginingBalance&&(i=i+"beginingBalance:"+t.beginingBalance+","),null!=t.additionAmount&&""!=t.additionAmount&&(i=i+"additionAmount:"+t.additionAmount+","),null!=t.releaseAmount&&""!=t.releaseAmount&&(i=i+"releaseAmount:"+t.releaseAmount+","),null!=t.endingBalance&&""!=t.endingBalance&&(i=i+"endingBalance:"+t.endingBalance+","),null!=t.revenueRecognized&&""!=t.revenueRecognized&&(i=i+"revenueRecognized:"+t.revenueRecognized+","),null!=t.periodName&&""!=t.periodName&&(i=i+"periodName:"+t.periodName+","),null!=t.periodYear&&""!=t.periodYear&&(i=i+"periodYear:"+t.periodYear+","),null!=t.quarterName&&""!=t.quarterName&&(i=i+"quarterName:"+t.quarterName),""==i?o+="search=%25":o=o+"search="+i,null==e.pageNumber||""==e.pageNumber||isNaN(e.pageNumber)||0==e.pageNumber||(o=o+"&page="+e.pageNumber+"&size="+e.pageSize),this.http.get(o).toPromise().then(e=>e)}searchFields(e,t,o,i,l,a,n,r,s,c,d,u){null==e&&(e=""),null==t&&(t=""),null==o&&(o=""),null==i&&(i=""),null==l&&(l=""),null==a&&(a=""),null==n&&(n=""),null==r&&(r=""),null==s&&(s=""),null==c&&(c=""),null==d&&(d="");let h=Ae.apiUrl+"/revmantra/deferredRevenueRollForwardRep?periodType="+e+"&asOfPeriod="+t+"&dealArrgNum="+o+"&so="+i+"&po="+l+"&customerName="+a+"&customerNumber="+n+"&region="+r+"&legalEntityName="+s+"&assetId="+c+"&salesContract="+d;return null==u.pageNumber||""==u.pageNumber||isNaN(u.pageNumber)||0==u.pageNumber||(h=h+"&page="+u.pageNumber+"&size="+u.pageSize),this.http.get(h).toPromise().then(e=>e)}exportReconDeals(e,t,o,i,l,a,n,r,s,c,d,u){null==e&&(e=""),null==t&&(t=""),null==o&&(o=""),null==i&&(i=""),null==l&&(l=""),null==a&&(a=""),null==n&&(n=""),null==r&&(r=""),null==s&&(s=""),null==c&&(c=""),null==d&&(d="");let h=Ae.apiUrl+"/rmanDeferredRevenueRollForwardRepExport?periodType="+e+"&asOfPeriod="+t+"&dealArrgNum="+o+"&so="+i+"&po="+l+"&customerName="+a+"&customerNumber="+n+"&region="+r+"&legalEntityName="+s+"&assetId="+c+"&salesContract="+d;return null!=u&&""!=u&&(h=h+"&exportCols="+u),h}getPeriodNameList(e){let t=Ae.apiUrl+"/rmanFiscalPeriodsSearch?",o="";return e&&(o=o+"periodName:"+e),""==o?t+="search=%25":t=t+"search="+o,this.http.get(t).toPromise().then(e=>e)}fetchRCNumbers(e){return this.http.get(Ae.apiUrl+"/fetchAllRC?rc="+e).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();function Me(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",44),r.dc("click",(function(){return r.Dc(e),r.gc().exportExcel()})),r.Qb(1,"em",45),r.Ub()}}function Re(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",58),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",59),r.Vb(3,"input",60),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const Ve=function(){return{color:"grey"}};function Ue(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",61),r.Vb(2,"div"),r.Vb(3,"input",62),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",63),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,Ve)),r.Eb(1),r.Nc(e.header)}}function we(e,t){if(1&e&&(r.Kc(0,Re,6,3,"div",57),r.Kc(1,Ue,6,6,"div",57)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const De=function(){return{width:"100%",height:"100%"}};function Ne(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",46),r.Vb(1,"div",47),r.Vb(2,"div",48),r.Vb(3,"input",49),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",50),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",51),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",52),r.Kc(9,we,2,2,"ng-template",53),r.Ub(),r.Ub(),r.Vb(10,"div",54),r.Vb(11,"a",55),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",56),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,De)),r.oc("options",e.globalCols)}}function Fe(e,t){1&e&&r.Qb(0,"col")}function xe(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,Fe,1,0,"col",64),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const Ee=function(e){return{display:e}};function Te(e,t){if(1&e&&(r.Vb(0,"th",67),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,Ee,e.display)),r.Eb(1),r.Nc(e.header)}}function ke(e,t){if(1&e&&(r.Vb(0,"th",68),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,Ee,e.display)),r.Eb(1),r.Nc(e.header)}}function Le(e,t){if(1&e&&(r.Tb(0),r.Kc(1,Te,2,5,"th",65),r.Kc(2,ke,2,5,"th",66),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type||"date"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type||"round"==e.type||"link"==e.type)}}function Pe(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Le,3,2,"ng-container",64),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function Oe(e,t){if(1&e&&(r.Vb(0,"td",72),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,Ee,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function Ie(e,t){if(1&e&&(r.Vb(0,"td",73),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,Ee,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function Be(e,t){if(1&e&&(r.Vb(0,"td",72),r.hc(1,"date"),r.Mc(2),r.hc(3,"date"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.jc(1,3,t[e.field],"MM/dd/yyyy")),r.oc("ngStyle",r.sc(9,Ee,e.display)),r.Eb(2),r.Oc(" ",r.jc(3,6,t[e.field],"MM/dd/yyyy")," ")}}function ze(e,t){if(1&e&&(r.Vb(0,"td",73),r.hc(1,"round"),r.Mc(2),r.hc(3,"round"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.ic(1,3,t[e.field])),r.oc("ngStyle",r.sc(7,Ee,e.display)),r.Eb(2),r.Oc(" ",r.ic(3,5,t[e.field])," ")}}function Qe(e,t){if(1&e&&(r.Tb(0),r.Kc(1,Oe,2,5,"td",70),r.Kc(2,Ie,2,5,"td",71),r.Kc(3,Be,4,11,"td",70),r.Kc(4,ze,4,9,"td",71),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type),r.Eb(1),r.oc("ngIf","date"==e.type),r.Eb(1),r.oc("ngIf","round"==e.type)}}function $e(e,t){if(1&e&&(r.Vb(0,"tr",69),r.Kc(1,Qe,5,4,"ng-container",64),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function Ke(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",74),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.Eb(1),r.Fb("colspan",e.length),r.Eb(1),r.Nc(o.noData)}}const _e=function(){return{standalone:!0}},qe=o("+yMW");let We=(()=>{class e{constructor(e,t,o,i,l,a,n,r,s){this.rmanDefRollforwardReportVService=e,this.rmanLookupsVService=t,this.location=o,this.commonSharedService=i,this.rmanCustomersService=l,this.rmanLookupCodesService=a,this.rmanLegalEntitiesService=n,this.notificationService=r,this.rmanFiscalPeriodsService=s,this.rmanDefRollforwardReportV=new je,this.rmanDefRollforwardReportVSearch=new je,this.isSerached=0,this.noData=qe.noData,this.rmanLookupsVList=[],this.collapsed=!0,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.customerNames=[],this.customerNumbers=[],this.regions=[],this.legalEntities=[],this.dealArrangementNumbers=[],this.exportCols=[],this.disableExport=!0,this.hideColumnMenu=!0,this.showFilter=!1,this.paginationOptions={pageNumber:0,pageSize:"10000"},this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"ACCOUNT_PERIOD_TYPE"}).then(e=>{this.rmanLookupsVList=e.content,this.prepareRmanLookupsVObject()}),this.periodNamePlaceHolder="",this.rmanFiscalPeriodsService.getCurrentfiscalperiod().then(e=>{this.currentPeriodName=e.periodName})}ngOnInit(){this.globalCols=[{field:"dealArrangementNumber",header:"Revenue Contract Number",showField:!0,display:"table-cell",type:"number",drag:!1},{field:"dealArrangementName",header:"Revenue Contract",showField:!0,display:"table-cell",type:"text",drag:!1},{field:"note",header:"Note Transaction Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"contName",header:"Cont Apply",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"elementType",header:"Element Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"billToCustomerNumber",header:"Customer Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"billToCustomer",header:"Customer Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"customerPoNum",header:"PO Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"orderNumber",header:"Order Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"invoiceNum",header:"Invoice Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"dealArrangementBasis",header:"Revenue Contract Basis",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealArrangementStatus",header:"Contract Status",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"legalEntityName",header:"Billing Company",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealArrangementSource",header:"Revenue Contract Source",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealName",header:"Deal Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealNumber",header:"Deal Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"dealLineNumber",header:"Line Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"sourceHeaderId",header:"Source Header Id",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"sourceLineId",header:"Source Line Id",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"sourceLineNumber",header:"Order Line Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"productName",header:"Product Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"orderedQuantity",header:"Quantity",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"uom",header:"UOM",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"transactionCurrency",header:"Currency",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"unitListPrice",header:"Unit List Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"unitNetPrice",header:"Unit Selling Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"lineAmount",header:"Net Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"discountPercent",header:"Discount or Premium%",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"productPortfolio",header:"Product Porfolio",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productFamily",header:"Product Family",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productLine",header:"Product Line",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"division",header:"Division",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"shipToCustomerNumber",header:"Ship To Customer Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"shipToCustomer",header:"Ship To Customer Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesTheater",header:"Sales Theater",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesRegion",header:"Billing Region",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesTeritory",header:"Sales Territory",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"lineCost",header:"Line Cost",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"bundleAttributedList",header:"Bundle Attributed Extended List Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"bundleAttributedNet",header:"Bundle Attributed Net Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"startDate",header:"Service Start Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"endDate",header:"Service End Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"deliveredDate",header:"Delivered Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"sspAmount",header:"SSP Amount",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"allocationAmount",header:"Allocation Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"allocationAmountFc",header:"Allocation Amount (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"bookedAmount",header:"Booked Amount",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAmount",header:"Delivered Amount",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAllocationAmount",header:"Delivered Allocation Amount(TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAllocationAmountFc",header:"Delivered Allocation Amount(FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"postBillingDeferrals",header:"Post Billing Deferrals (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"postBillingDeferralsFc",header:"Post Billing Deferrals (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"beginingBalance",header:"Deferred Beginning Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"additionAmount",header:"Deferred Amount Addition (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"releaseAmount",header:"Deferred Amount Release (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"endingBalance",header:"Deferred Ending Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revenueRecognized",header:"Revenue Recognized (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"salesContract",header:"Sales Contract Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"assetId",header:"Asset ID",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"assetNumber",header:"Asset Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"revenueTerm",header:"Revenue Term in Months",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"chargeType",header:"Charge Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"sellingTerm",header:"Selling Term",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"primaryLineNumber",header:"Primary Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"itemSequenceNumber",header:"Item Sequence Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"orderLineStatus",header:"Order Line Status",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"beginingBalanceLt",header:"Beginning Bal LT (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"additionAmountLt",header:"Addition Amount LT (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"releaseAmountLt",header:"Release LT (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"endingBalanceLt",header:"Ending Bal LT (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"bundlePercent",header:"POB Split %",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"invoiceAmount",header:"Invoice Amount",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"forecastDate",header:"Forecast Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"bookedDate",header:"Ready for Activation Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"bundleIdentifier",header:"Line Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"bundleParentLineNumber",header:"Bundle Parent Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"revrecStartDate",header:"Revrec Start Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"revrecEndDate",header:"Revrec End Date",showField:!0,display:"table-cell",type:"date",drag:!0}],this.columns=[],this.getTableColumns("rmanDefRollforwardReportV","Deferred Revenue Roll Forward Report")}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("rmanDefRollforwardReportV","Deferred Revenue Roll Forward Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}getAllRmanDefRollforwardReportV(){this.loading=!0,this.rmanDefRollforwardReportVService.searchFields(this.periodType,this.asOfPeriod,this.dealArrangementNum,this.soNumber,this.poNumber,this.customerName,this.customerNumber,this.region,this.legalEntityName,this.assetId,this.salesContract,this.paginationOptions).then(e=>{this.loading=!1,this.datasource=e.content,this.rmanDefRollforwardReportVList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.displaySearchDialog=!1,this.disableExport=!1}).catch(e=>{this.loading=!1})}getRmanDefRollforwardReportV(e){this.loading=!0,this.paginationOptions={pageNumber:e.first/e.rows,pageSize:this.pageSize,sortField:e.sortField,sortOrder:e.sortOrder},this.rmanDefRollforwardReportVService.searchFields(this.periodType,this.asOfPeriod,this.dealArrangementNum,this.soNumber,this.poNumber,this.customerName,this.customerNumber,this.region,this.legalEntityName,this.assetId,this.salesContract,this.paginationOptions).then(e=>{this.loading=!1,this.datasource=e.content,this.rmanDefRollforwardReportVList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.disableExport=!1}).catch(e=>{this.loading=!1})}showDialogToAdd(){this.newRmanDefRollforwardReportV=!0,this.rmanDefRollforwardReportV=new je,this.displayDialog=!0}prepareRmanLookupsVObject(){let e=[];e.push({label:"--Select Account Period Type--",value:null}),this.rmanLookupsVList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.rmanLookupsV=e}reset(e){this.paginationOptions={},this.periodType="",this.asOfPeriod="",this.dealArrangementNum="",this.soNumber="",this.poNumber="",this.customerName="",this.customerNumber="",this.region="",this.legalEntityName="",this.assetId="",this.salesContract="",e.reset()}exportExcel(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].field);this.loading=!0;let e=this.rmanDefRollforwardReportVService.exportReconDeals(this.periodType,this.asOfPeriod,this.dealArrangementNum,this.soNumber,this.poNumber,this.customerName,this.customerNumber,this.region,this.legalEntityName,this.assetId,this.salesContract,this.exportCols);window.location.href=e,this.loading=!1}findSelectedRmanDefRollforwardReportVIndex(){return this.rmanDefRollforwardReportVList.indexOf(this.selectedRmanDefRollforwardReportV)}onRowSelect(e){}onBeforeToggle(e){this.collapsed=e.collapsed}cloneRmanDefRollforwardReportV(e){let t=new je;for(let o in e)t[o]=e[o];return t}toggleColumnMenu(){this.hideColumnMenu=!this.hideColumnMenu}toggleFilterBox(){this.showFilter=!this.showFilter}showDialogToSearch(){this.displaySearchDialog=!0,this.periodType="",this.asOfPeriod="",this.dealArrangementNum="",this.soNumber="",this.poNumber="",this.customerName="",this.customerNumber="",this.region="",this.legalEntityName="",this.assetId="",this.salesContract="",0==this.isSerached&&(this.rmanDefRollforwardReportVSearch=new je,this.periodType="PTD",this.asOfPeriod=this.currentPeriodName)}search(){this.isSerached=1,this.displaySearchDialog=!1,this.paginationOptions={},this.getAllRmanDefRollforwardReportV()}searchFields(e){this.loading=!0,e.reset(),this.rmanDefRollforwardReportVService.searchFields(this.periodType,this.asOfPeriod,this.dealArrangementNum,this.soNumber,this.poNumber,this.customerName,this.customerNumber,this.region,this.legalEntityName,this.assetId,this.salesContract,this.paginationOptions).then(e=>{this.displaySearchDialog=!1,this.rmanDefRollforwardReportVList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.loading=!1})}filterPeriodName(e){this.rmanDefRollforwardReportVService.getPeriodNameList(e.query).then(e=>{this.filteredPeriodNameList=e.content.map(e=>e.periodName)}).catch(e=>{this.filteredPeriodNameList=[]})}searchCustomerNames(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerName:e.query},!1).then(e=>{this.customerNames=e.content.map(e=>e.customerName)}).catch(e=>{this.customerNames=[]})}searchCustomerNumbers(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerNumber:e.query},!1).then(e=>{this.customerNumbers=e.content.map(e=>e.customerNumber)}).catch(e=>{this.customerNumbers=[]})}searchRegions(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"REGIONS",enabledFlag:"Y",lookupCode:e.query}).then(e=>{this.regions=e.content.map(e=>e.lookupCode)}).catch(e=>{this.regions=[]})}searchLegalEntities(e){this.rmanLegalEntitiesService.getAllRmanLegalEntities(this.paginationOptions,{name:e.query}).then(e=>{this.legalEntities=e.content.map(e=>e.name)}).catch(e=>{this.legalEntities=[]})}searchRCList(e){this.rmanDefRollforwardReportVService.fetchRCNumbers(e.query).then(e=>{this.dealArrangementNumbers=e.map(e=>e)}).catch(e=>{this.dealArrangementNumbers=[]})}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Se),r.Pb(ve.a),r.Pb(s.k),r.Pb(l.a),r.Pb(h.a),r.Pb(g.a),r.Pb(b.a),r.Pb(a.a),r.Pb(p.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["rmanDefRollforwardReportV-data"]],features:[r.Db([Se,ve.a,h.a,g.a,b.a,p.a])],decls:89,vars:56,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Deferred Revenue Roll Forward Report",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll"],["id","rmanDef-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect","onLazyLoad"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Search","width","800","showEffect","fade",3,"draggable","visible","modal","visibleChange"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"selectSpan"],["name","periodType","appendTo","body",3,"options","ngModel","ngModelChange"],[1,"ui-g-6","pull-right"],[1,"md-inputfield"],["inputStyleClass","textbox","styleClass","wid100","id","asOfPeriod",3,"ngModel","suggestions","minLength","ngModelOptions","placeholder","ngModelChange","completeMethod","onFocus","onBlur"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","dealArrangementNum",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["pInputText","","name","so","id","so","placeholder","Order Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Number Type atleast 3 Characters","id","customerNumber",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Name Type atleast 3 Characters","id","customerName",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Billing Region Type atleast 2 Characters","id","region",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Billing Company Type atleast 2 Characters","id","legalEntityName",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["pInputText","","name","assetId","id","assetId","placeholder","Asset ID",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["pInputText","","name","salesContract","id","salesContract","placeholder","Sales Contract Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix","pull-right"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","button","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["class","number","pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["pResizableColumn","",3,"ngStyle","title"],["pResizableColumn","",1,"number",3,"ngStyle","title"],[3,"pSelectableRow"],[3,"title","ngStyle",4,"ngIf"],["class","def_number",3,"title","ngStyle",4,"ngIf"],[3,"title","ngStyle"],[1,"def_number",3,"title","ngStyle"],[1,"no-data"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(13,"em",10),r.Mc(14,"Columns"),r.Ub(),r.Vb(15,"a",11),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(16,"em",12),r.Ub(),r.Vb(17,"a",13),r.dc("click",(function(){r.Dc(e);const o=r.Bc(23);return t.reset(o)})),r.Qb(18,"em",14),r.Ub(),r.Kc(19,Me,2,0,"a",15),r.Kc(20,Ne,15,5,"div",16),r.Ub(),r.Ub(),r.Vb(21,"div",17),r.Vb(22,"p-table",18,19),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)}))("onLazyLoad",(function(e){return t.getRmanDefRollforwardReportV(e)})),r.Kc(24,xe,2,1,"ng-template",20),r.Kc(25,Pe,2,1,"ng-template",21),r.Kc(26,$e,2,2,"ng-template",22),r.Kc(27,Ke,3,2,"ng-template",23),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(28,"p-dialog",24),r.dc("visibleChange",(function(e){return t.displaySearchDialog=e})),r.Vb(29,"form"),r.Vb(30,"div",25),r.Vb(31,"div",26),r.Vb(32,"div",27),r.Vb(33,"span",28),r.Mc(34," Account Period Type "),r.Ub(),r.Vb(35,"p-dropdown",29),r.dc("ngModelChange",(function(e){return t.periodType=e})),r.Ub(),r.Ub(),r.Vb(36,"div",30),r.Vb(37,"span",31),r.Vb(38,"span",28),r.Mc(39,"As Of Period"),r.Ub(),r.Vb(40,"p-autoComplete",32),r.dc("ngModelChange",(function(e){return t.asOfPeriod=e}))("completeMethod",(function(e){return t.filterPeriodName(e)}))("onFocus",(function(){return t.periodNamePlaceHolder="Type atleast 3 characters, ex: Jan-20"}))("onBlur",(function(){return t.periodNamePlaceHolder=""})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(41,"div",26),r.Vb(42,"div",27),r.Vb(43,"span",31),r.Vb(44,"span",28),r.Mc(45,"Revenue Contract Number"),r.Ub(),r.Vb(46,"p-autoComplete",33),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.dealArrangementNum=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(47,"div",30),r.Vb(48,"span",31),r.Vb(49,"span",28),r.Mc(50,"Order Number"),r.Ub(),r.Vb(51,"input",34),r.dc("ngModelChange",(function(e){return t.soNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(52,"div",26),r.Vb(53,"div",27),r.Vb(54,"span",31),r.Vb(55,"span",28),r.Mc(56,"Customer Number"),r.Ub(),r.Vb(57,"p-autoComplete",35),r.dc("completeMethod",(function(e){return t.searchCustomerNumbers(e)}))("ngModelChange",(function(e){return t.customerNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(58,"div",30),r.Vb(59,"span",31),r.Vb(60,"span",28),r.Mc(61,"Customer Name"),r.Ub(),r.Vb(62,"p-autoComplete",36),r.dc("completeMethod",(function(e){return t.searchCustomerNames(e)}))("ngModelChange",(function(e){return t.customerName=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(63,"div",26),r.Vb(64,"div",27),r.Vb(65,"span",31),r.Vb(66,"span",28),r.Mc(67,"Billing Region"),r.Ub(),r.Vb(68,"p-autoComplete",37),r.dc("completeMethod",(function(e){return t.searchRegions(e)}))("ngModelChange",(function(e){return t.region=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(69,"div",30),r.Vb(70,"span",31),r.Vb(71,"span",28),r.Mc(72,"Billing Company"),r.Ub(),r.Vb(73,"p-autoComplete",38),r.dc("completeMethod",(function(e){return t.searchLegalEntities(e)}))("ngModelChange",(function(e){return t.legalEntityName=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(74,"div",26),r.Vb(75,"div",27),r.Vb(76,"span",31),r.Vb(77,"span",28),r.Mc(78,"Asset ID"),r.Ub(),r.Vb(79,"input",39),r.dc("ngModelChange",(function(e){return t.assetId=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(80,"div",30),r.Vb(81,"span",31),r.Vb(82,"span",28),r.Mc(83,"Sales Contract Number"),r.Ub(),r.Vb(84,"input",40),r.dc("ngModelChange",(function(e){return t.salesContract=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(85,"p-footer"),r.Vb(86,"div",41),r.Vb(87,"button",42),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(88,"button",43),r.dc("click",(function(){return t.displaySearchDialog=!1})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(13),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.oc("loading",t.loading)("value",t.rmanDefRollforwardReportVList)("lazy",!0)("paginator",t.showPaginator)("rows",t.pageSize)("totalRecords",t.totalElements)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("draggable",!0)("visible",t.displaySearchDialog)("modal",!0),r.Eb(7),r.oc("options",t.rmanLookupsV)("ngModel",t.periodType),r.Eb(5),r.pc("placeholder",t.periodNamePlaceHolder),r.oc("ngModel",t.asOfPeriod)("suggestions",t.filteredPeriodNameList)("minLength",3)("ngModelOptions",r.rc(47,_e)),r.Eb(6),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(48,_e))("ngModel",t.dealArrangementNum),r.Eb(5),r.oc("ngModelOptions",r.rc(49,_e))("ngModel",t.soNumber),r.Eb(6),r.oc("suggestions",t.customerNumbers)("minLength",3)("ngModelOptions",r.rc(50,_e))("ngModel",t.customerNumber),r.Eb(5),r.oc("suggestions",t.customerNames)("minLength",3)("ngModelOptions",r.rc(51,_e))("ngModel",t.customerName),r.Eb(6),r.oc("suggestions",t.regions)("minLength",2)("ngModelOptions",r.rc(52,_e))("ngModel",t.region),r.Eb(5),r.oc("suggestions",t.legalEntities)("minLength",2)("ngModelOptions",r.rc(53,_e))("ngModel",t.legalEntityName),r.Eb(6),r.oc("ngModelOptions",r.rc(54,_e))("ngModel",t.assetId),r.Eb(5),r.oc("ngModelOptions",r.rc(55,_e))("ngModel",t.salesContract))},directives:[m.a,f.c,s.o,y.j,f.f,C.a,v.v,v.l,v.m,oe.a,v.k,v.n,A.a,v.b,M.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i],pipes:[s.f,w.a],encapsulation:2}),e})();class je{constructor(e,t,o,i,l,a,n,r,s,c,d,u,h,g,b,p,m,f,y,C,v,A,S,M,R,V,U,w,D,N,F,x,E,T,k,L,P,O,I,B,z,Q,$,K,_,q,W,j,J,H,G,Y,Z){this.sourceLineId=e,this.deliveredAllocationAmount=t,this.transactionCurrency=o,this.endDate=i,this.sourceHeaderId=l,this.bundleAttributedNet=a,this.salesTeritory=n,this.periodName=r,this.salesRegion=s,this.dealArrangementBasis=c,this.productPortfolio=d,this.unitListPrice=u,this.shipToCustomerNumber=h,this.dealName=g,this.lineAmount=b,this.sspAmount=p,this.bookedAmount=m,this.dealArrangementSource=f,this.sourceLineNumber=y,this.periodYear=C,this.unitNetPrice=v,this.customerPoNum=A,this.productName=S,this.quarterName=M,this.releaseAmount=R,this.productLine=V,this.orderedQuantity=U,this.endingBalance=w,this.revenueRecognized=D,this.dealArrangementStatus=N,this.dealArrangementNumber=F,this.postBillingDeferrals=x,this.salesTheater=E,this.dealArrangementName=T,this.allocationAmount=k,this.billToCustomerNumber=L,this.discountPercent=P,this.dealNumber=O,this.billToCustomer=I,this.bundleAttributedList=B,this.shipToCustomer=z,this.beginingBalance=Q,this.dealLineNumber=$,this.startDate=K,this.periodDetail=_,this.dealArrangementId=q,this.uom=W,this.additionAmount=j,this.legalEntityName=J,this.productFamily=H,this.orderNumber=G,this.lineCost=Y,this.deliveredAmount=Z}}var Je=o("G3JO");const He=o("+yMW");let Ge=(()=>{class e{constructor(e){this.http=e}getAyaraForecastActualRep(e){return null==e&&(e=""),this.http.get(He.apiUrl+"/revmantra/ayaraForecastActuals/?periodType="+e).toPromise().then(e=>e)}exportAyaraForecastActualRepFile(e,t){null==e&&(e="");let o=He.apiUrl+"/exportAyaraForecastActuals?periodType="+e;return null!=t&&""!=t&&(o=o+"&exportCols="+t),o}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var Ye=o("6t4m");function Ze(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",32),r.dc("click",(function(){return r.Dc(e),r.gc().exportCSVfile()})),r.Qb(1,"em",33),r.Ub()}}function Xe(e,t){1&e&&r.Qb(0,"col")}function et(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,Xe,1,0,"col",34),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const tt=function(e,t){return{display:e,"text-align":t}};function ot(e,t){if(1&e&&(r.Vb(0,"th",36),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.oc("ngStyle",r.tc(2,tt,e.display,e.text)),r.Eb(1),r.Oc(" ",e.header," ")}}function it(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,ot,2,5,"th",35),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function lt(e,t){if(1&e&&(r.Vb(0,"td",39),r.Vb(1,"span",40),r.Mc(2),r.hc(3,"date"),r.hc(4,"number"),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc();r.oc("ngStyle",r.tc(9,tt,e.display,e.text)),r.Eb(1),r.pc("title",o[e.field]),r.Eb(1),r.Nc(i.isDateField(e.field)?r.jc(3,3,o[e.field],"MM/dd/yyyy"):"number"==i.fieldType(o[e.field])?r.jc(4,6,o[e.field],"1.2-2"):o[e.field])}}function at(e,t){if(1&e&&(r.Vb(0,"tr",37),r.Kc(1,lt,5,12,"td",38),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function nt(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",41),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}const rt=o("+yMW");let st=(()=>{class e{constructor(e,t,o,i,l){this.ayaraForecastActualRepService=e,this.rmanLookupsVService=t,this.commonSharedService=o,this.notificationService=i,this.location=l,this.columns=[],this.periodTypesList=[],this.rmanLookupsVList=[],this.noData=rt.noData,this.collapsed=!1,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.getAllAyaraForecastActualRep(),this.paginationOptions={pageNumber:0,pageSize:"10000"}}ngOnInit(){this.rowCount=20,this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"ACCOUNT_PERIOD_TYPE"}).then(e=>{this.rmanLookupsVList=e.content,this.prepareRmanLookupsVObject()})}goToOperationReports(){this.location.back()}onBeforeToggle(e){this.collapsed=e.collapsed}paginate(e){this.loading=!0,this.ayaraForecastActualRepList=this.ayaraForecastActualList.slice(e.first,e.first+10),this.loading=!1}onRowSelect(e){}getAllAyaraForecastActualRep(){this.loading=!0,this.ayaraForecastActualRepService.getAyaraForecastActualRep(this.periodType).then(e=>{this.ayaraForecastActualRepList=e.Content,this.ayaraForecastActualList=e.Content;let t=this.ayaraForecastActualRepList[0];this.columns=[];for(let i in t)this.columns.push({field:i,header:i,style:{width:"100px","text-align":"right"},display:"table-cell",showField:!0,text:"right",drag:!0});let o=["PRODUCT_NAME","FA_CATEGORY"];for(let i=0;i<this.columns.length;i++)this.columns[i].text=-1==o.indexOf(this.columns[i].header)?"right":"left";this.ayaraForecastActualRepList=e.Content.slice(0,10),this.totalRecords=e.Content.length,this.loading=!1,console.log(this.columns),this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}showDialogToSearch(){this.periodType="",this.displayDialog=!0}exportCSVfile(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].header.replace(/[#$/()]/g,""));let e=this.ayaraForecastActualRepService.exportAyaraForecastActualRepFile(this.periodType,this.exportCols);window.location.href=e}prepareRmanLookupsVObject(){let e=[];e.push({label:"--Select Account Period Type--",value:null}),this.rmanLookupsVList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.rmanLookupsV=e}search(){this.getAllAyaraForecastActualRep(),this.displayDialog=!1}reset(e){this.periodType="",this.getAllAyaraForecastActualRep(),this.displayDialog=!1}fieldType(e){return typeof e}isDateField(e){return-1!=e.search("Date")}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Ge),r.Pb(ve.a),r.Pb(l.a),r.Pb(a.a),r.Pb(s.k))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraForecastActualRep-data"]],features:[r.Db([Ge,ve.a])],decls:37,vars:18,consts:[[1,"content-section","implementation"],[1,"card-wrapper","waterfall-detail-report"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Forecast Actual Details Report By Product",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click",4,"ngIf"],[1,"x-scroll","mb-2"],["id","ayaraForecastActualsRep-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["id","paginator-c",3,"rows","totalRecords","onPageChange"],["header","Search","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"selectSpan"],["name","periodType","id","periodType","appendTo","body",3,"options","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","reset","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["title","Export",3,"click"],[1,"fa","fa-external-link"],[4,"ngFor","ngForOf"],["style","width:100px","pResizableColumn","",3,"ngStyle",4,"ngFor","ngForOf"],["pResizableColumn","",2,"width","100px",3,"ngStyle"],[3,"pSelectableRow"],["style","width:100px",3,"ngStyle",4,"ngFor","ngForOf"],[2,"width","100px",3,"ngStyle"],[3,"title"],[1,"no-data"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"a",10),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(13,"em",11),r.Ub(),r.Vb(14,"a",12),r.dc("click",(function(){r.Dc(e);const o=r.Bc(19);return t.reset(o)})),r.Qb(15,"em",13),r.Ub(),r.Kc(16,Ze,2,0,"a",14),r.Ub(),r.Ub(),r.Vb(17,"div",15),r.Vb(18,"p-table",16,17),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)})),r.Kc(20,et,2,1,"ng-template",18),r.Kc(21,it,2,1,"ng-template",19),r.Kc(22,at,2,2,"ng-template",20),r.Kc(23,nt,3,1,"ng-template",21),r.Ub(),r.Ub(),r.Vb(24,"p-paginator",22),r.dc("onPageChange",(function(e){return t.paginate(e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(25,"p-dialog",23),r.Vb(26,"form"),r.Vb(27,"div",24),r.Vb(28,"div",25),r.Vb(29,"div",26),r.Vb(30,"span",27),r.Mc(31,"Period Type"),r.Ub(),r.Vb(32,"p-dropdown",28),r.dc("ngModelChange",(function(e){return t.periodType=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(33,"p-footer"),r.Vb(34,"div",29),r.Vb(35,"button",30),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(36,"button",31),r.dc("click",(function(){r.Dc(e);const o=r.Bc(19);return t.reset(o)})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(10),r.oc("ngIf",!t.disableExport),r.Eb(2),r.oc("loading",t.loading)("value",t.ayaraForecastActualRepList)("lazy",!0)("paginator",!1)("rows",t.rowCount)("totalRecords",t.totalRecords)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("rows",9)("totalRecords",t.totalRecords),r.Eb(1),r.oc("visible",t.displayDialog)("closable",!1)("draggable",!0)("modal",!0),r.Eb(7),r.oc("options",t.rmanLookupsV)("ngModel",t.periodType))},directives:[m.a,f.c,s.o,y.j,f.f,Ye.a,C.a,v.v,v.l,v.m,oe.a,v.k,v.n,f.b,R.b,s.n,y.g,s.p,y.i],pipes:[s.f,s.g],encapsulation:2}),e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();const ct=o("+yMW"),dt={headers:new n.f({"Content-Type":"application/json"})};let ut=(()=>{class e{constructor(e,t){this.http=e,this.datePipe=t}getServiceUrl(e,t,o,i){let l=ct.apiUrl+"/rmanTrxDetailReportExport?";0==i&&(l=ct.apiUrl+"/rmanTrxDetailReportSearch?");let a="";return null!=t.sno&&""!=t.sno&&(a=a+"sno:"+t.sno+","),null!=t.dealArrangementId&&""!=t.dealArrangementId&&(a=a+"dealArrangementId:"+t.dealArrangementId+","),null!=t.dealArrangementNumber&&""!=t.dealArrangementNumber&&(a=a+"dealArrangementNumber:"+t.dealArrangementNumber+","),null!=t.dealArrangementName&&""!=t.dealArrangementName&&(a=a+"dealArrangementName:"+t.dealArrangementName+","),null!=t.arrangementType&&""!=t.arrangementType&&(a=a+"arrangementType:"+t.arrangementType+","),null!=t.customerName&&""!=t.customerName&&(a=a+"customerName:"+t.customerName+","),null!=t.customerNumber&&""!=t.customerNumber&&(a=a+"customerNumber:"+t.customerNumber+","),null!=t.salesTheater&&""!=t.salesTheater&&(a=a+"salesTheater:"+t.salesTheater+","),null!=t.region&&""!=t.region&&(a=a+"region:"+t.region+","),null!=t.territory&&""!=t.territory&&(a=a+"territory:"+t.territory+","),null!=t.dealNumber&&""!=t.dealNumber&&(a=a+"dealNumber:"+t.dealNumber+","),null!=t.dealLineNumber&&""!=t.dealLineNumber&&(a=a+"dealLineNumber:"+t.dealLineNumber+","),null!=t.productName&&""!=t.productName&&(a=a+"productName:"+t.productName+","),null!=t.productDescription&&""!=t.productDescription&&(a=a+"productDescription:"+t.productDescription+","),null!=t.itemType&&""!=t.itemType&&(a=a+"itemType:"+t.itemType+","),null!=t.po&&""!=t.po&&(a=a+"po:"+t.po+","),null!=t.orderNumber&&""!=t.orderNumber&&(a=a+"orderNumber:"+t.orderNumber+","),null!=t.sourceLineNumber&&""!=t.sourceLineNumber&&(a=a+"sourceLineNumber:"+t.sourceLineNumber+","),null!=t.serviceStartDate&&""!=t.serviceStartDate&&(a=a+"serviceStartDate:"+t.serviceStartDate+","),null!=t.serviceEndDate&&""!=t.serviceEndDate&&(a=a+"serviceEndDate:"+t.serviceEndDate+","),null!=t.orderedQuantity&&""!=t.orderedQuantity&&(a=a+"orderedQuantity:"+t.orderedQuantity+","),null!=t.shippedQty&&""!=t.shippedQty&&(a=a+"shippedQty:"+t.shippedQty+","),null!=t.unitSellingPrice&&""!=t.unitSellingPrice&&(a=a+"unitSellingPrice:"+t.unitSellingPrice+","),null!=t.unitListPrice&&""!=t.unitListPrice&&(a=a+"unitListPrice:"+t.unitListPrice+","),null!=t.transactionPrice&&""!=t.transactionPrice&&(a=a+"transactionPrice:"+t.transactionPrice+","),null!=t.allocatedPrice&&""!=t.allocatedPrice&&(a=a+"allocatedPrice:"+t.allocatedPrice+","),null!=t.revenueRecognize&&""!=t.revenueRecognize&&(a=a+"revenueRecognize:"+t.revenueRecognize+","),null!=t.billedAmount&&""!=t.billedAmount&&(a=a+"billedAmount:"+t.billedAmount),null!=t.fromArrgId&&null!=t.fromArrgId&&(a=a+"dealArrangementId>"+t.fromArrgId+","),null!=t.toArrgId&&null!=t.toArrgId&&(a=a+"dealArrangementId<"+t.toArrgId+","),null!=t.fromPeriod&&null!=t.fromPeriod&&(a=a+"lastArrgModifiedDate>"+this.datePipe.transform(t.fromPeriod,"yyyyMMdd")+","),null!=t.toPeriod&&null!=t.toPeriod&&(a=a+"lastArrgModifiedDate<"+this.datePipe.transform(t.toPeriod,"yyyyMMdd")+","),null!=t.periodName&&""!=t.periodName&&(a=a+"periodName:"+t.periodName+","),null!=t.activeFlag&&""!=t.activeFlag&&(a=a+"activeFlag:"+t.activeFlag+","),null!=t.backlog&&""!=t.backlog&&(a=a+"backlog:"+t.backlog+","),null!=t.salesContractNumber&&""!=t.salesContractNumber&&(a=a+"salesContractNumber:"+t.salesContractNumber+","),null!=t.entityName&&""!=t.entityName&&(a=a+"entityName:"+t.entityName+","),null!=t.productFamily&&""!=t.productFamily&&(a=a+"productFamily:"+t.productFamily+","),null!=t.productLine&&""!=t.productLine&&(a=a+"productLine:"+t.productLine+","),null!=t.assetId&&""!=t.assetId&&(a=a+"assetId:"+t.assetId+","),""==a?l+="search=%25":l=l+"search="+a,null==e.pageNumber||""==e.pageNumber||isNaN(e.pageNumber)||0==e.pageNumber||(l=l+"&page="+e.pageNumber+"&size="+e.pageSize),null!=o&&""!=o&&(l=l+"&exportCols="+o),l}getAllRmanTrxDetailReport(e,t,o){let i=this.getServiceUrl(e,t,o,0);return this.http.get(i).toPromise().then(e=>e)}getPeriodNameList(e){let t=ct.apiUrl+"/rmanFiscalPeriodsSearch?",o="";return e&&(o=o+"periodName:"+e),""==o?t+="search=%25":t=t+"search="+o,this.http.get(t).toPromise().then(e=>e)}searchRmanTrxDetailReport(e){return this.http.get(ct.apiUrl+"/RMAN_TRX_DETAIL_REPORT/search/findBySnoAndDealArrangementIdAndDealArrangementNumberAndDealArrangementNameAndArrangementTypeAndCustomerNameAndCustomerNumberAndSalesTheaterAndRegionAndTerritoryAndDealNumberAndDealLineNumberAndProductNameAndProductDescriptionAndItemTypeAndPoAndOrderNumberAndSourceLineNumberAndServiceStartDateAndServiceEndDateAndOrderedQuantityAndShippedQtyAndUnitSellingPriceAndUnitListPriceAndTransactionPriceAndAllocatedPriceAndRevenueRecognizeAndBilledAmount?sno="+e.sno+"&dealArrangementId="+e.dealArrangementId+"&dealArrangementNumber="+e.dealArrangementNumber+"&dealArrangementName="+e.dealArrangementName+"&arrangementType="+e.arrangementType+"&customerName="+e.customerName+"&customerNumber="+e.customerNumber+"&salesTheater="+e.salesTheater+"&region="+e.region+"&territory="+e.territory+"&dealNumber="+e.dealNumber+"&dealLineNumber="+e.dealLineNumber+"&productName="+e.productName+"&productDescription="+e.productDescription+"&itemType="+e.itemType+"&po="+e.po+"&orderNumber="+e.orderNumber+"&sourceLineNumber="+e.sourceLineNumber+"&serviceStartDate="+e.serviceStartDate+"&serviceEndDate="+e.serviceEndDate+"&orderedQuantity="+e.orderedQuantity+"&shippedQty="+e.shippedQty+"&unitSellingPrice="+e.unitSellingPrice+"&unitListPrice="+e.unitListPrice+"&transactionPrice="+e.transactionPrice+"&allocatedPrice="+e.allocatedPrice+"&revenueRecognize="+e.revenueRecognize+"&billedAmount="+e.billedAmount).toPromise().then(e=>e)}saveRmanTrxDetailReport(e){let t=JSON.stringify(e);return this.http.post(ct.apiUrl+"/RMAN_TRX_DETAIL_REPORT",t,dt).toPromise().then(e=>e)}updateRmanTrxDetailReport(e){delete e._links,delete e.interests;let t=JSON.stringify(e);return this.http.put(ct.apiUrl+"/RMAN_TRX_DETAIL_REPORT/"+e.sno,t,dt).toPromise().then(e=>e)}deleteRmanTrxDetailReport(e){return this.http.delete(ct.apiUrl+"/RMAN_TRX_DETAIL_REPORT/"+e.sno,dt).toPromise().then(e=>e)}periodSet(e){return null!=e&&""!=e?ct.apiUrl+"/revmantra/setcurrentPeriod?asOfPeriod="+e:ct.apiUrl+"/revmantra/setcurrentPeriod?asOfPeriod="}fetchRCNumbers(e){return this.http.get(ct.apiUrl+"/fetchAllRC?rc="+e).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b),r.Zb(s.f))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();function ht(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",49),r.dc("click",(function(){return r.Dc(e),r.gc(2).exportExcel()})),r.Qb(1,"em",50),r.Ub()}}function gt(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",63),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(3).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(3).onDrop(t)})),r.Vb(2,"div",64),r.Vb(3,"input",65),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(3).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const bt=function(){return{color:"grey"}};function pt(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",66),r.Vb(2,"div"),r.Vb(3,"input",67),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(3).selectColumns(t)})),r.Ub(),r.Vb(4,"label",68),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,bt)),r.Eb(1),r.Nc(e.header)}}function mt(e,t){if(1&e&&(r.Kc(0,gt,6,3,"div",62),r.Kc(1,pt,6,6,"div",62)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const ft=function(){return{width:"100%",height:"100%"}};function yt(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",51),r.Vb(1,"div",52),r.Vb(2,"div",53),r.Vb(3,"input",54),r.dc("click",(function(){return r.Dc(e),r.gc(2).onSelectAll()})),r.Ub(),r.Vb(4,"label",55),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",56),r.dc("click",(function(t){return r.Dc(e),r.gc(2).closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",57),r.Kc(9,mt,2,2,"ng-template",58),r.Ub(),r.Ub(),r.Vb(10,"div",59),r.Vb(11,"a",60),r.dc("click",(function(){return r.Dc(e),r.gc(2).saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",61),r.dc("click",(function(t){return r.Dc(e),r.gc(2).closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc(2);r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,ft)),r.oc("options",e.globalCols)}}function Ct(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",39),r.Vb(1,"a",40),r.dc("click",(function(){return r.Dc(e),r.gc().goToOperationReports()})),r.Qb(2,"em",41),r.Mc(3,"Back"),r.Ub(),r.Vb(4,"a",40),r.dc("click",(function(t){return r.Dc(e),r.gc().onConfiguringColumns(t)})),r.Qb(5,"em",42),r.Mc(6,"Columns"),r.Ub(),r.Vb(7,"a",43),r.dc("click",(function(){return r.Dc(e),r.gc().showDialogToSearch()})),r.Qb(8,"em",44),r.Ub(),r.Vb(9,"a",45),r.dc("click",(function(){r.Dc(e);const t=r.gc(),o=r.Bc(11);return t.reset(o)})),r.Qb(10,"em",46),r.Ub(),r.Kc(11,ht,2,0,"a",47),r.Kc(12,yt,15,5,"div",48),r.Ub()}if(2&e){const e=r.gc();r.Eb(11),r.oc("ngIf",!e.disableExport),r.Eb(1),r.oc("ngIf",!e.showAddColumns)}}function vt(e,t){1&e&&r.Qb(0,"col")}function At(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,vt,1,0,"col",69),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const St=function(e){return{display:e}};function Mt(e,t){if(1&e&&(r.Vb(0,"th",72),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,St,e.display)),r.Eb(1),r.Nc(e.header)}}function Rt(e,t){if(1&e&&(r.Vb(0,"th",73),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,St,e.display)),r.Eb(1),r.Nc(e.header)}}function Vt(e,t){if(1&e&&(r.Tb(0),r.Kc(1,Mt,2,5,"th",70),r.Kc(2,Rt,2,5,"th",71),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type||"date"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type||"round"==e.type||"link"==e.type)}}function Ut(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Vt,3,2,"ng-container",69),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function wt(e,t){if(1&e&&(r.Vb(0,"td",77),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,St,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function Dt(e,t){if(1&e&&(r.Vb(0,"td",78),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,St,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function Nt(e,t){if(1&e&&(r.Vb(0,"td",77),r.hc(1,"date"),r.Mc(2),r.hc(3,"date"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.jc(1,3,t[e.field],"MM/dd/yyyy")),r.oc("ngStyle",r.sc(9,St,e.display)),r.Eb(2),r.Oc(" ",r.jc(3,6,t[e.field],"MM/dd/yyyy")," ")}}function Ft(e,t){if(1&e&&(r.Vb(0,"td",78),r.hc(1,"round"),r.Mc(2),r.hc(3,"round"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.ic(1,3,t[e.field])),r.oc("ngStyle",r.sc(7,St,e.display)),r.Eb(2),r.Oc(" ",r.ic(3,5,t[e.field])," ")}}function xt(e,t){if(1&e&&(r.Tb(0),r.Kc(1,wt,2,5,"td",75),r.Kc(2,Dt,2,5,"td",76),r.Kc(3,Nt,4,11,"td",75),r.Kc(4,Ft,4,9,"td",76),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type),r.Eb(1),r.oc("ngIf","date"==e.type),r.Eb(1),r.oc("ngIf","round"==e.type)}}function Et(e,t){if(1&e&&(r.Vb(0,"tr",74),r.Kc(1,xt,5,4,"ng-container",69),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function Tt(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",79),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.Eb(1),r.Fb("colspan",e.length),r.Eb(1),r.Nc(o.noData)}}const kt=function(){return{standalone:!0}},Lt=o("+yMW");let Pt=(()=>{class e{constructor(e,t,o,i,l,a,n,r,s){this.rmanTrxDetailReportService=e,this.formBuilder=t,this.location=o,this.commonSharedService=i,this.notificationService=l,this.rmanCustomersService=a,this.rmanLookupCodesService=n,this.rmanLegalEntitiesService=r,this.rmanFiscalPeriodsService=s,this.rmanTrxDetailReport={},this.rmanTrxDetailReportSearch={},this.isSerached=0,this.exportFlag=0,this.paginationOptions={},this.rmanLookupsVList=[],this.collapsed=!0,this.searchFields={},this.noData=Lt.noData,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.customerNames=[],this.customerNumbers=[],this.regions=[],this.legalEntities=[],this.productFamilies=[],this.productLines=[],this.dealArrangementNumbers=[],this.currentPeriod={},this.hideColumnMenu=!0,this.showFilter=!1,this.paginationOptions={pageNumber:0,pageSize:"10000"},this.periodNamePlaceHolder="",this.backlogOptions=[{label:"Select Backlog",value:null},{label:"Yes",value:"Y"},{label:"No",value:"N"}],this.rmanFiscalPeriodsService.getCurrentfiscalperiod().then(e=>{this.currentPeriod=e})}ngOnInit(){this.globalCols=[{field:"dealArrangementNumber",header:"Revenue Contract Number",showField:!0,display:"table-cell",type:"number",drag:!1},{field:"dealArrangementName",header:"Revenue Contract",showField:!0,display:"table-cell",type:"text",drag:!1},{field:"note",header:"Note Transaction Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"contApply",header:"Cont Apply",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"elementType",header:"Element Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"customerNumber",header:"Customer Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"customerName",header:"Customer Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"po",header:"PO#",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"orderNumber",header:"Order Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"invoiceNumber",header:"Invoice Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"deliveredDate",header:"Delivered Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"arrangementType",header:"Revenue Contract Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesTheater",header:"Sales Theater",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"region",header:"Billing Region",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"territory",header:"Sales Territory",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealNumber",header:"Deal Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"dealLineNumber",header:"Line Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"salesrep",header:"Sales Rep",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"sourceHeaderId",header:"Source Header Id",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"sourceLineId",header:"Source Line Id",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"sourceLineNumber",header:"Order Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productName",header:"Product Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"lineStatus",header:"Line Status",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"orderedQuantity",header:"Booked Quantity",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"bookedCurrency",header:"Currency",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"bookedDate",header:"Ready for Activation Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"unitListPrice",header:"Unit List Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"unitSellingPrice",header:"Unit Selling Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"transactionPrice",header:"Net Price",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"discountPercent",header:"Discount or Premium%",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"productPorfolio",header:"Product Porfolio",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productFamily",header:"Product Family",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productLine",header:"Product Line",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"division",header:"Division",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"serviceStartDate",header:"Service Start Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"serviceEndDate",header:"Service End Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"sspMin",header:"SSP Min",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"sspMean",header:"SSP Mean",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"sspMax",header:"SSP Max",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"sspHigh",header:"SSP High",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"sspLow",header:"SSP Low",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"ssp",header:"SSP",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"fmvAmount",header:"Extended SSP",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"fxRate",header:"Fx Rate",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"fxCurrency",header:"Fx Currency",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"fxDate",header:"Fx Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"allocationAmount",header:"Allocation Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"allocationAmountFc",header:"Allocation Amount (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"shippedQty",header:"Shipped Quantity",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"deliveredAmount",header:"Delivered Amount (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"invoiceLineNumber",header:"Invoice Line Number",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"invoiceQuantity",header:"Invoice Quantity",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"invoiceCurrency",header:"Invoice Currency",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"invoiceDate",header:"Invoice Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"billedAmount",header:"Invoice Amt(TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"billedAmountFc",header:"Billed Amount (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAllocAmount",header:"Delivered Allocated Price (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deliveredAllocAmountFc",header:"Delivered Allocated Price (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"cancelledQty",header:"Cancelled Qty",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"cancelledDate",header:"Cancelled Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"contractModifiedDate",header:"Contract Modified Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"deferredAmount",header:"Revenue Deferred(TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deferredAmountFc",header:"Revenue Deferred(FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contReleaseDate",header:"Contingency Release Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"contractAsset",header:"Contract Asset (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contractLiability",header:"Contract Liability (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deferredRevenue",header:"Deferred Revenue (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"clearing",header:"Invoice Revenue (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contractAssetFc",header:"Contract Asset (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"contractLiabilityFc",header:"Contract Liability (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"deferredRevenueFc",header:"Deferred Revenue (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"clearingFc",header:"Invoice Revenue (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"beginBal",header:"Revenue Beginning Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"currBal",header:"Revenue Current Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"endBal",header:"Revenue Ending Balance (TC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"beginBalFc",header:"Revenue Begin Balance (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"currBalFc",header:"Revenue Current Balance (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"endBalFc",header:"Revenue End Balance (FC)",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"quarterName",header:"Quarter Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"periodName",header:"Period Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"backlog",header:"Backlog",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"exceptionMessage",header:"Exception Message",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"chargeType",header:"Charge Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesContractNumber",header:"Sales Contract Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"assetId",header:"Asset ID",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"assetNumber",header:"Asset Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"primaryLineNumber",header:"Primary Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"itemSequenceNumber",header:"Item Sequence Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"revenueTerm",header:"Revenue Term in Months",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"sellingTerm",header:"Selling Term",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"entityName",header:"Billing Company",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"bundlePercent",header:"POB Split %",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revrecStartDate",header:"Revrec Start Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"revrecEndDate",header:"Revrec End Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"expectedStartDate",header:"Forecast Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"extendedListAmount",header:"Extended List Amount",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"revenueTermDays",header:"Revenue Term in Days",showField:!0,display:"table-cell",type:"number",drag:!0},{field:"bundleIdentifier",header:"Line Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"bundleParentLineNumber",header:"Bundle Parent Line Number",showField:!0,display:"table-cell",type:"text",drag:!0}],this.columns=[],this.getTableColumns("rmanTrxDetailReport","Transaction Details Report"),this.buildForm()}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("rmanTrxDetailReport","Transaction Details Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}filterPeriodName(e){this.rmanTrxDetailReportService.getPeriodNameList(e.query).then(e=>{this.filteredPeriodNameList=e.content.map(e=>e.periodName)}).catch(e=>{this.filteredPeriodNameList=[]})}getAllRmanTrxDetailReport(){this.loading=!0,this.rmanTrxDetailReportService.getAllRmanTrxDetailReport(this.paginationOptions,this.searchFields,this.exportCols).then(e=>{this.datasource=e.content,this.rmanTrxDetailReportList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.displaySearchDialog=!1,this.loading=!1,this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}getRmanTrxDetailReport(e){this.paginationOptions={pageNumber:e.first/e.rows,pageSize:this.pageSize,sortField:e.sortField,sortOrder:e.sortOrder},this.loading=!0,this.rmanTrxDetailReportService.getAllRmanTrxDetailReport(this.paginationOptions,this.searchFields,this.exportCols).then(e=>{this.datasource=e.content,this.rmanTrxDetailReportList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.loading=!1,this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}buildForm(){this.transactionReportForm=this.formBuilder.group({dealArrangementId:[""],dealArrangementNumber:[""],dealArrangementName:[""],arrangementType:[""],customerName:[""],customerNumber:[""],salesTheater:[""],region:[""],territory:[""],dealNumber:[""],dealLineNumber:[""],productName:[""],productDescription:[""],itemType:[""],po:[""],orderNumber:[""],sourceLineNumber:[""],serviceStartDate:[""],serviceEndDate:[""],orderedQuantity:[""],shippedQty:[""],unitSellingPrice:[""],unitListPrice:[""],transactionPrice:[""],allocatedPrice:[""],revenueRecognize:[""],billedAmount:[],ssp:[],fmvAmount:[]})}exportExcel(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].field);this.loading=!0;let e=this.rmanTrxDetailReportService.getServiceUrl(this.paginationOptions,this.searchFields,this.exportCols,1);window.location.href=e,this.loading=!1}showDialogToAdd(){this.newRmanTrxDetailReport=!0,this.rmanTrxDetailReport=new Ot,this.displayDialog=!0}onBeforeToggle(e){this.collapsed=e.collapsed}reset(e){this.paginationOptions={},this.rmanTrxDetailReport={},this.searchFields={},e.reset(),this.isSerached=0}save(){this.newRmanTrxDetailReport?this.rmanTrxDetailReportService.saveRmanTrxDetailReport(this.rmanTrxDetailReport).then(e=>{this.getAllRmanTrxDetailReport()}):this.rmanTrxDetailReportService.updateRmanTrxDetailReport(this.rmanTrxDetailReport).then(e=>{this.getAllRmanTrxDetailReport()}),this.rmanTrxDetailReport=new Ot,this.displayDialog=!1}delete(e){this.rmanTrxDetailReport=e,this.displayDialog=!1,window.confirm("Are you sure you want to delete this record?")&&(this.rmanTrxDetailReportList.splice(this.findSelectedRmanTrxDetailReportIndex(),1),this.rmanTrxDetailReportService.deleteRmanTrxDetailReport(this.rmanTrxDetailReport).then(e=>{this.rmanTrxDetailReport=new Ot,this.getAllRmanTrxDetailReport()}))}editRow(e){this.newRmanTrxDetailReport=!1,this.rmanTrxDetailReport=this.cloneRmanTrxDetailReport(e),this.displayDialog=!0}findSelectedRmanTrxDetailReportIndex(){return this.rmanTrxDetailReportList.indexOf(this.selectedRmanTrxDetailReport)}onRowSelect(e){}cloneRmanTrxDetailReport(e){let t=new Ot;for(let o in e)t[o]=e[o];return t}toggleColumnMenu(){this.hideColumnMenu=!this.hideColumnMenu}toggleFilterBox(){this.showFilter=!this.showFilter}showDialogToSearch(){this.rmanTrxDetailReportSearch={},this.searchFields={},this.displaySearchDialog=!0,0==this.isSerached&&(this.searchFields.fromPeriod=new Date(this.currentPeriod.startDate),this.searchFields.toPeriod=new Date(this.currentPeriod.endDate))}search(){this.isSerached=1,this.rmanTrxDetailReport=this.searchFields,this.paginationOptions={},this.displaySearchDialog=!1,this.getAllRmanTrxDetailReport()}searchCustomerNames(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerName:e.query},!1).then(e=>{this.customerNames=e.content.map(e=>e.customerName)}).catch(e=>{this.customerNames=[]})}searchCustomerNumbers(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerNumber:e.query},!1).then(e=>{this.customerNumbers=e.content.map(e=>e.customerNumber)}).catch(e=>{this.customerNumbers=[]})}searchRegions(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"REGIONS",enabledFlag:"Y",lookupCode:e.query}).then(e=>{this.regions=e.content.map(e=>e.lookupCode)}).catch(e=>{this.regions=[]})}searchLegalEntities(e){this.rmanLegalEntitiesService.getAllRmanLegalEntities(this.paginationOptions,{name:e.query}).then(e=>{this.legalEntities=e.content.map(e=>e.name)}).catch(e=>{this.legalEntities=[]})}searchProductFamilies(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"PRODUCT_FAMILIES",enabledFlag:"Y",description:e.query}).then(e=>{this.productFamilies=e.content.map(e=>e.description)}).catch(e=>{this.productFamilies=[]})}searchProductLines(e){this.rmanLookupCodesService.getAllRmanLookupCodes(this.paginationOptions,{lookupTypeCode:"PRODUCT_LINES",enabledFlag:"Y",description:e.query}).then(e=>{this.productLines=e.content.map(e=>e.description)}).catch(e=>{this.productLines=[]})}searchRCList(e){this.rmanTrxDetailReportService.fetchRCNumbers(e.query).then(e=>{this.dealArrangementNumbers=e.map(e=>e)}).catch(e=>{this.dealArrangementNumbers=[]})}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(ut),r.Pb(v.c),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a),r.Pb(h.a),r.Pb(g.a),r.Pb(b.a),r.Pb(p.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["rmanTrxDetailReport-data"]],features:[r.Db([ut,h.a,g.a,b.a,p.a])],decls:93,vars:72,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Transaction Details Report",3,"toggleable","onBeforeToggle"],["class","pull-right icons-list",4,"ngIf"],[1,"x-scroll"],["id","trxDetail-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect","onLazyLoad"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Search","width","800","showEffect","fade",3,"visible","draggable","modal","visibleChange"],[3,"ngSubmit"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"md-inputfield"],[1,"selectSpan"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","from",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],[1,"ui-g-6","pull-right"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","to",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["showAnim","slideDown","inputStyleClass","textbox","name","fromPeriod","id","fromPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","From Period",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],["showAnim","slideDown","inputStyleClass","textbox","name","toPeriod","id","toPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","To Period",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Number Type atleast 3 Characters","id","customerNumber",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Name Type atleast 3 Characters","id","customerName",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["pInputText","","name","so","id","so","placeholder","Order Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["pInputText","","name","salesContract","id","salesContract","placeholder","Sales Contract Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Billing Region Type atleast 2 Characters","id","region",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Billing Company Type atleast 2 Characters","id","entityName",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Product Family Type atleast 2 Characters","id","productFamily",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Product Line Type atleast 2 Characters","id","productLine",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["pInputText","","name","assetId","id","assetId","placeholder","Asset ID",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix","pull-right"],["type","button","pButton","","label","Search",1,"primary-btn",3,"click"],["type","button","pButton","","label","Cancel",1,"secondary-btn",3,"click"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["class","number","pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["pResizableColumn","",3,"ngStyle","title"],["pResizableColumn","",1,"number",3,"ngStyle","title"],[3,"pSelectableRow"],[3,"title","ngStyle",4,"ngIf"],["class","number",3,"title","ngStyle",4,"ngIf"],[3,"title","ngStyle"],[1,"number",3,"title","ngStyle"],[1,"no-data"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Kc(8,Ct,13,2,"div",7),r.Ub(),r.Vb(9,"div",8),r.Vb(10,"p-table",9,10),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)}))("onLazyLoad",(function(e){return t.getRmanTrxDetailReport(e)})),r.Kc(12,At,2,1,"ng-template",11),r.Kc(13,Ut,2,1,"ng-template",12),r.Kc(14,Et,2,2,"ng-template",13),r.Kc(15,Tt,3,2,"ng-template",14),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(16,"p-dialog",15),r.dc("visibleChange",(function(e){return t.displaySearchDialog=e})),r.Vb(17,"form",16),r.dc("ngSubmit",(function(){return t.search()})),r.Vb(18,"div",17),r.Vb(19,"div",18),r.Vb(20,"div",19),r.Vb(21,"span",20),r.Vb(22,"span",21),r.Mc(23,"Revenue Contract Number From"),r.Ub(),r.Vb(24,"p-autoComplete",22),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.searchFields.fromArrgId=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(25,"div",23),r.Vb(26,"span",20),r.Vb(27,"span",21),r.Mc(28,"Revenue Contract Number To"),r.Ub(),r.Vb(29,"p-autoComplete",24),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.searchFields.toArrgId=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(30,"div",18),r.Vb(31,"div",19),r.Vb(32,"span",21),r.Mc(33,"From Period"),r.Ub(),r.Vb(34,"p-calendar",25),r.dc("ngModelChange",(function(e){return t.searchFields.fromPeriod=e})),r.Ub(),r.Ub(),r.Vb(35,"div",23),r.Vb(36,"span",21),r.Mc(37,"To Period"),r.Ub(),r.Vb(38,"p-calendar",26),r.dc("ngModelChange",(function(e){return t.searchFields.toPeriod=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(39,"div",18),r.Vb(40,"div",19),r.Vb(41,"span",20),r.Vb(42,"span",21),r.Mc(43,"Customer Number"),r.Ub(),r.Vb(44,"p-autoComplete",27),r.dc("completeMethod",(function(e){return t.searchCustomerNumbers(e)}))("ngModelChange",(function(e){return t.searchFields.customerNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(45,"div",23),r.Vb(46,"span",20),r.Vb(47,"span",21),r.Mc(48,"Customer Name"),r.Ub(),r.Vb(49,"p-autoComplete",28),r.dc("completeMethod",(function(e){return t.searchCustomerNames(e)}))("ngModelChange",(function(e){return t.searchFields.customerName=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(50,"div",18),r.Vb(51,"div",19),r.Vb(52,"span",20),r.Vb(53,"span",21),r.Mc(54,"Order Number"),r.Ub(),r.Vb(55,"input",29),r.dc("ngModelChange",(function(e){return t.searchFields.orderNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(56,"div",23),r.Vb(57,"span",20),r.Vb(58,"span",21),r.Mc(59,"Sales Contract Number"),r.Ub(),r.Vb(60,"input",30),r.dc("ngModelChange",(function(e){return t.searchFields.salesContractNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(61,"div",18),r.Vb(62,"div",19),r.Vb(63,"span",20),r.Vb(64,"span",21),r.Mc(65,"Billing Region"),r.Ub(),r.Vb(66,"p-autoComplete",31),r.dc("completeMethod",(function(e){return t.searchRegions(e)}))("ngModelChange",(function(e){return t.searchFields.region=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(67,"div",23),r.Vb(68,"span",20),r.Vb(69,"span",21),r.Mc(70,"Billing Company"),r.Ub(),r.Vb(71,"p-autoComplete",32),r.dc("completeMethod",(function(e){return t.searchLegalEntities(e)}))("ngModelChange",(function(e){return t.searchFields.entityName=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(72,"div",18),r.Vb(73,"div",19),r.Vb(74,"span",20),r.Vb(75,"span",21),r.Mc(76,"Product Family"),r.Ub(),r.Vb(77,"p-autoComplete",33),r.dc("completeMethod",(function(e){return t.searchProductFamilies(e)}))("ngModelChange",(function(e){return t.searchFields.productFamily=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(78,"div",23),r.Vb(79,"span",20),r.Vb(80,"span",21),r.Mc(81,"Product Line"),r.Ub(),r.Vb(82,"p-autoComplete",34),r.dc("completeMethod",(function(e){return t.searchProductLines(e)}))("ngModelChange",(function(e){return t.searchFields.productLine=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(83,"div",18),r.Vb(84,"div",19),r.Vb(85,"span",20),r.Vb(86,"span",21),r.Mc(87,"Asset ID"),r.Ub(),r.Vb(88,"input",35),r.dc("ngModelChange",(function(e){return t.searchFields.assetId=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(89,"p-footer"),r.Vb(90,"div",36),r.Vb(91,"button",37),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(92,"button",38),r.dc("click",(function(){return t.displaySearchDialog=!1})),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(2),r.oc("ngIf",t.collapsed),r.Eb(2),r.oc("loading",t.loading)("value",t.rmanTrxDetailReportList)("lazy",!0)("paginator",t.showPaginator)("rows",t.pageSize)("totalRecords",t.totalElements)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("visible",t.displaySearchDialog)("draggable",!0)("modal",!0),r.Eb(8),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(59,kt))("ngModel",t.searchFields.fromArrgId),r.Eb(5),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(60,kt))("ngModel",t.searchFields.toArrgId),r.Eb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(61,kt))("ngModel",t.searchFields.fromPeriod),r.Eb(4),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(62,kt))("ngModel",t.searchFields.toPeriod),r.Eb(6),r.oc("suggestions",t.customerNumbers)("minLength",3)("ngModelOptions",r.rc(63,kt))("ngModel",t.searchFields.customerNumber),r.Eb(5),r.oc("suggestions",t.customerNames)("minLength",3)("ngModelOptions",r.rc(64,kt))("ngModel",t.searchFields.customerName),r.Eb(6),r.oc("ngModelOptions",r.rc(65,kt))("ngModel",t.searchFields.orderNumber),r.Eb(5),r.oc("ngModelOptions",r.rc(66,kt))("ngModel",t.searchFields.salesContractNumber),r.Eb(6),r.oc("suggestions",t.regions)("minLength",2)("ngModelOptions",r.rc(67,kt))("ngModel",t.searchFields.region),r.Eb(5),r.oc("suggestions",t.legalEntities)("minLength",2)("ngModelOptions",r.rc(68,kt))("ngModel",t.searchFields.entityName),r.Eb(6),r.oc("suggestions",t.productFamilies)("minLength",2)("ngModelOptions",r.rc(69,kt))("ngModel",t.searchFields.productFamily),r.Eb(5),r.oc("suggestions",t.productLines)("minLength",2)("ngModelOptions",r.rc(70,kt))("ngModel",t.searchFields.productLine),r.Eb(6),r.oc("ngModelOptions",r.rc(71,kt))("ngModel",t.searchFields.assetId))},directives:[m.a,f.c,s.o,y.j,f.f,C.a,v.v,v.l,v.m,A.a,v.k,v.n,S.a,v.b,M.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i],pipes:[s.f,w.a],encapsulation:2}),e})();class Ot{constructor(e,t,o,i,l,a,n,r,s,c,d,u,h,g,b,p,m,f,y,C,v,A,S,M,R,V,U,w,D,N,F,x,E){this.dealArrangementNumber=e,this.shippedQty=t,this.salesTheater=o,this.territory=i,this.billedAmount=l,this.dealArrangementName=a,this.productDescription=n,this.sno=r,this.revenueRecognize=s,this.unitSellingPrice=c,this.unitListPrice=d,this.serviceStartDate=u,this.dealNumber=h,this.itemType=g,this.dealLineNumber=b,this.customerNumber=p,this.sourceLineNumber=m,this.productName=f,this.allocatedPrice=y,this.dealArrangementId=C,this.region=v,this.arrangementType=A,this.serviceEndDate=S,this.transactionPrice=M,this.customerName=R,this.orderNumber=V,this.orderedQuantity=U,this.po=w,this.periodYear=D,this.quarterName=N,this.periodName=F,this.backlog=x,this.activeFlag=E}}var It=o("PCNd"),Bt=o("PEBV"),zt=o("jGlT");function Qt(e,t){1&e&&(r.Vb(0,"tr"),r.Vb(1,"th"),r.Mc(2,"Report Name"),r.Ub(),r.Qb(3,"th"),r.Ub())}function $t(e,t){if(1&e){const e=r.Wb();r.Vb(0,"tr",11),r.Vb(1,"td"),r.Mc(2),r.Ub(),r.Vb(3,"td",12),r.Vb(4,"a",13),r.dc("click",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc().path1(t)})),r.Qb(5,"em",14),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc(),t=e.$implicit;r.oc("pSelectableRow",e.$implicit),r.Eb(2),r.Nc(t.reportName)}}const Kt=function(e){return["read",e]};function _t(e,t){1&e&&r.Kc(0,$t,6,2,"tr",10),2&e&&r.oc("isAuthorized",r.sc(1,Kt,t.$implicit.reportCode))}const qt=o("+yMW");let Wt=(()=>{class e{constructor(e,t){this.router=e,this.reportsService=t,this.reportsList=[],this.noData=qt.noData}ngOnInit(){this.getAllReports()}getAllReports(){this.loading=!0,this.reportsService.getAllReports("enabledFlag:Y,reportType:OPERATIONAL").then(e=>{this.loading=!1,this.reportsList=e.content})}path1(e){this.router.navigate([e.reportPath])}path(e){"1"==e.sno&&this.router.navigate(["reports/operational/rmanArrgSummaryRep"]),"2"==e.sno&&this.router.navigate(["reports/operational/rmanTrxDetailReport"]),"3"==e.sno&&this.router.navigate(["reports/operational/rmanArrgWaterfallReportV"]),"4"==e.sno&&this.router.navigate(["reports/operational/rmanDeferredRollForwardRep"]),"5"==e.sno&&this.router.navigate(["reports/operational/rmanGlAccountingV"]),"14"==e.sno&&this.router.navigate(["reports/operational/ayaraForecastActualRep"]),"191"==e.sno&&this.router.navigate(["reports/operational/exceptionsRep"]),"211"==e.sno&&this.router.navigate(["reports/operational/glEntriesExceptionsRep"])}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(i.g),r.Pb(Bt.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["operational-reports-data"]],decls:11,vars:2,consts:[[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Operational Reports"],[1,"x-scroll"],["selectionMode","single",1,"ui-datatable","arrangementMgrTbl",3,"value","loading"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body","owIndex",""],[3,"pSelectableRow",4,"isAuthorized"],[3,"pSelectableRow"],[1,"pull-right"],["target","_blank","title","Open",3,"click"],[1,"fa","fa-folder-open","icons-color"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"p-panel",5),r.Vb(6,"div",6),r.Vb(7,"p-table",7),r.Kc(8,Qt,4,0,"ng-template",8),r.Kc(9,_t,1,3,"ng-template",9),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Qb(10,"router-outlet")),2&e&&(r.Eb(7),r.oc("value",t.reportsList)("loading",t.loading))},directives:[m.a,y.j,f.f,i.l,zt.a,y.i],encapsulation:2}),e})();var jt=o("rWrC");const Jt=o("+yMW");let Ht=(()=>{class e{constructor(e){this.http=e}getAyaraActiveQuotesARMReport(e,t,o,i){return null==o&&(o=""),null==i&&(i=""),null==e&&(e=""),null==t&&(t=""),this.http.get(Jt.apiUrl+"/reports/activeQuotesArmReport?arrgLevel="+e+"&quoteStatus="+t+"&fromDate="+o+"&toDate="+i).toPromise().then(e=>e)}getAyaraActiveQuotesARMReportFile(e,t,o,i,l){null==o&&(o=""),null==i&&(i=""),null==e&&(e=""),null==t&&(t="");let a=Jt.apiUrl+"/reports/exportActiveQuotesArmReport?arrgLevel="+e+"&quoteStatus="+t+"&fromDate="+o+"&toDate="+i;return null!=l&&""!=l&&(a=a+"&exportCols="+l),a}getAyaraActiveQuotesARMChart(e,t,o,i){return null==t&&(t=""),null==o&&(o=""),null==i&&(i=""),null==e&&(e=""),this.http.get(Jt.apiUrl+"/reports/generateActiveQuotesARMChart?quoteStatus="+e+"&arrgLevel="+t+"&fromDate="+o+"&toDate="+i).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var Gt=o("Y+ZO"),Yt=o("LPYB");function Zt(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",43),r.dc("click",(function(){return r.Dc(e),r.gc().displayCharts()})),r.Qb(1,"em",44),r.Ub()}}function Xt(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",45),r.dc("click",(function(){return r.Dc(e),r.gc().exportCSVfile()})),r.Qb(1,"em",46),r.Ub()}}function eo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",59),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",60),r.Vb(3,"input",61),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const to=function(){return{color:"grey"}};function oo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",62),r.Vb(2,"div"),r.Vb(3,"input",63),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",64),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,to)),r.Eb(1),r.Nc(e.header)}}function io(e,t){if(1&e&&(r.Kc(0,eo,6,3,"div",58),r.Kc(1,oo,6,6,"div",58)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const lo=function(){return{width:"100%",height:"100%"}};function ao(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",47),r.Vb(1,"div",48),r.Vb(2,"div",49),r.Vb(3,"input",50),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",51),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",52),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",53),r.Kc(9,io,2,2,"ng-template",54),r.Ub(),r.Ub(),r.Vb(10,"div",55),r.Vb(11,"a",56),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",57),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,lo)),r.oc("options",e.globalCols)}}function no(e,t){1&e&&r.Qb(0,"col")}function ro(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,no,1,0,"col",65),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const so=function(e,t){return{display:e,"text-align":t}};function co(e,t){if(1&e&&(r.Vb(0,"th",67),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.oc("ngStyle",r.tc(2,so,e.display,e.text)),r.Eb(1),r.Oc(" ",e.header," ")}}function uo(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,co,2,5,"th",66),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}const ho=function(e){return[e]};function go(e,t){if(1&e&&(r.Vb(0,"td",70),r.Vb(1,"span",71),r.Mc(2),r.hc(3,"date"),r.hc(4,"number"),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc();r.oc("ngStyle",r.tc(9,so,e.display,e.text)),r.Eb(1),r.pc("title",o[e.field]),r.Eb(1),r.Nc(i.isDateField(e.field)?r.jc(3,3,o[e.field],"MM/dd/yyyy"):"number"==r.sc(12,ho,e.type)?r.jc(4,6,o[e.field],"1.2-2"):o[e.field])}}function bo(e,t){if(1&e&&(r.Vb(0,"tr",68),r.Kc(1,go,5,14,"td",69),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function po(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",72),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}function mo(e,t){if(1&e&&r.Qb(0,"canvas",75),2&e){const e=r.gc(2);r.oc("data",e.doughnutChartData)("labels",e.doughnutChartLabels)("options",e.doughnutChartOptions)("chartType",e.doughtnutChartType)}}function fo(e,t){if(1&e&&(r.Vb(0,"div",73),r.Kc(1,mo,1,4,"canvas",74),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngIf",e.chartReady&&0!=e.doughnutChartLabels.length)}}function yo(e,t){if(1&e&&r.Qb(0,"canvas",77),2&e){const e=r.gc(2);r.oc("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("plugins",e.barChartPlugins)("legend",e.barChartLegend)("chartType",e.barChartType)}}function Co(e,t){if(1&e&&(r.Vb(0,"div",73),r.Kc(1,yo,1,6,"canvas",76),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngIf",e.chartReady&&0!=e.barChartLabels.length)}}const vo=function(){return{standalone:!0}},Ao=o("+yMW");let So=(()=>{class e{constructor(e,t,o,i,l){this.ayaraActiveQuotesARMReportService=e,this.rmanLookupsVService=t,this.location=o,this.commonSharedService=i,this.notificationService=l,this.columns=[],this.entities=[],this.quoteStatusList=[],this.noData=Ao.noData,this.collapsed=!1,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.arrgLevel="S",this.arrgLevelSwitch=!1,this.chartReady=!1,this.showCharts=!1,this.doughnutChartLabels=[],this.doughnutChartData=[],this.doughtnutChartType="doughnut",this.doughnutChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartLabels=[],this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.barChartData=[],this.isbarChart=!1,this.globalCols=[],this.paginationOptions={pageNumber:0,pageSize:"10000"},this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"QUOTE_STATUS_LIST"}).then(e=>{this.quoteStatusList=e.content,this.prepareQuoteStatusObject()}),this.getAllAyaraActiveQuotesARMReport(),this.getChartsData()}ngOnInit(){this.rowCount=20}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("ayaraActiveQuotesARMReport","Ayara Active Quotes ARM Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while saving"),this.loading=!1})}onDragStart(e){this.startIndex=e}prepareQuoteStatusObject(){let e=[{label:Ao.dropDownOptions.selectQuoteStatus,value:null}];this.quoteStatusList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.quoteStatuses=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSwitch(){this.arrgLevel=0==this.arrgLevelSwitch?"S":"L",this.getAllAyaraActiveQuotesARMReport(),this.getChartsData()}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}onBeforeToggle(e){this.collapsed=e.collapsed}paginate(e){this.loading=!0,this.activeQuotesARMRepList=this.activeQuotesARMList.slice(e.first,e.first+10),this.loading=!1}onRowSelect(e){}getAllAyaraActiveQuotesARMReport(){this.globalCols=[],this.loading=!0,this.ayaraActiveQuotesARMReportService.getAyaraActiveQuotesARMReport(this.arrgLevel,this.quoteStatus,this.fromDate,this.toDate).then(e=>{this.activeQuotesARMRepList=e.Content,this.activeQuotesARMList=e.Content;let t=this.activeQuotesARMRepList[0];for(let i in t)this.globalCols.push({field:i,header:i,style:{width:"100px","text-align":"right"},display:"table-cell",showField:!0,text:"right",drag:!0,type:"number"});let o=["Revenue Contract Number","Quote Number","Quote Status","Quote Date","Geo","Country","Legal Entity Name","Account Name","Currency","Product Name"];for(let i=0;i<this.globalCols.length;i++)-1==o.indexOf(this.globalCols[i].header)?(this.globalCols[i].text="right",this.globalCols[i].type="number"):(this.globalCols[i].text="left",this.globalCols[i].type="text");this.activeQuotesARMRepList=e.Content.slice(0,10),this.totalRecords=e.Content.length,this.loading=!1,this.columns=[],this.getTableColumns("ayaraActiveQuotesARMReport","Ayara Active Quotes ARM Report"),this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}showDialogToSearch(){this.fromDate="",this.toDate="",this.quoteStatus="",this.prepareQuoteStatusObject(),this.displayDialog=!0}exportCSVfile(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].header.replace(/[#$/()]/g,""));let e=this.ayaraActiveQuotesARMReportService.getAyaraActiveQuotesARMReportFile(this.arrgLevel,this.quoteStatus,this.fromDate,this.toDate,this.exportCols);window.location.href=e}search(){this.getAllAyaraActiveQuotesARMReport(),this.getChartsData(),this.displayDialog=!1}reset(e){this.fromDate="",this.toDate="",this.quoteStatus="",this.arrgLevel="S",this.arrgLevelSwitch=!1,this.getAllAyaraActiveQuotesARMReport(),this.getChartsData(),this.displayDialog=!1,this.isbarChart=!1}fieldType(e){return typeof e}isDateField(e){return-1!=e.search("Date")}displayCharts(){this.showCharts=!0}closeCharts(){this.showCharts=!1}getChartsData(){this.ayaraActiveQuotesARMReportService.getAyaraActiveQuotesARMChart(this.quoteStatus,this.arrgLevel,this.fromDate,this.toDate).then(e=>{let t=e.Content;if(console.log(t),"S"==this.arrgLevel){this.isbarChart=!1;let e=[],o=[];this.doughnutChartLabels=[],this.doughnutChartData=[],t.forEach(t=>{e.push(t["Quote Status"]),o.push(t["Total ARM Revenue Price"])}),console.log(e),console.log(o),this.doughnutChartLabels=e,this.doughnutChartData=o,this.chartReady=!0}else if("L"==this.arrgLevel){this.isbarChart=!0;let e=[],o=[];this.barChartLabels=[],this.barChartData=[],t.forEach(t=>{e.push(t["Product Name"]),o.push(t["ARM Revenue Price"])}),console.log(e),console.log(o),this.barChartLabels=e,this.barChartData.push({data:o,label:"ARM Revenue Price"}),this.chartReady=!0}}).catch(e=>{this.notificationService.showError("Error occured while loading chart data")})}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Ht),r.Pb(ve.a),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraActiveQuotesARMReport-data"]],features:[r.Db([Ht])],decls:61,vars:35,consts:[[1,"content-section","implementation"],[1,"card-wrapper","waterfall-detail-report"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Quoted ARM Report",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],["onLabel","Line View","offLabel","Revenue Contract View","onIcon","fa fa-toggle-on fa-sm","offIcon","fa fa-toggle-off fa-sm",1,"ui-inputswitch",3,"ngModel","ngModelChange"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Analytics",3,"click",4,"ngIf"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll","mb-2"],["id","activeQuotesARM-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["id","paginator-c",3,"rows","totalRecords","onPageChange"],["header","Search","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"md-inputfield"],[1,"selectSpan"],["appendTo","body","name","quoteStatus",3,"options","ngModel","ngModelOptions","ngModelChange"],[1,"ui-g-6"],["showAnim","slideDown","name","fromDate","inputStyleClass","textbox","id","fromDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","From Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],[1,"ui-g-6","pull-right"],["showAnim","slideDown","name","toDate","inputStyleClass","textbox","id","toDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","To Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","reset","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["header","Quoted ARM Report","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],["style","display: block;",4,"ngIf"],["type","reset","pButton","","label","Close",1,"secondary-btn",3,"click"],["title","Analytics",3,"click"],[1,"fa","fa-pie-chart"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["style","width:100px","pResizableColumn","",3,"ngStyle",4,"ngFor","ngForOf"],["pResizableColumn","",2,"width","100px",3,"ngStyle"],[3,"pSelectableRow"],["style","width:100px",3,"ngStyle",4,"ngFor","ngForOf"],[2,"width","100px",3,"ngStyle"],[3,"title"],[1,"no-data"],[2,"display","block"],["baseChart","",3,"data","labels","options","chartType",4,"ngIf"],["baseChart","",3,"data","labels","options","chartType"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType",4,"ngIf"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"p-toggleButton",10),r.dc("ngModelChange",(function(e){return t.arrgLevelSwitch=e}))("ngModelChange",(function(){return t.onSwitch()})),r.Ub(),r.Vb(13,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(14,"em",11),r.Mc(15,"Columns"),r.Ub(),r.Vb(16,"a",12),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(17,"em",13),r.Ub(),r.Vb(18,"a",14),r.dc("click",(function(){r.Dc(e);const o=r.Bc(25);return t.reset(o)})),r.Qb(19,"em",15),r.Ub(),r.Kc(20,Zt,2,0,"a",16),r.Kc(21,Xt,2,0,"a",17),r.Kc(22,ao,15,5,"div",18),r.Ub(),r.Ub(),r.Vb(23,"div",19),r.Vb(24,"p-table",20,21),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)})),r.Kc(26,ro,2,1,"ng-template",22),r.Kc(27,uo,2,1,"ng-template",23),r.Kc(28,bo,2,2,"ng-template",24),r.Kc(29,po,3,1,"ng-template",25),r.Ub(),r.Ub(),r.Vb(30,"p-paginator",26),r.dc("onPageChange",(function(e){return t.paginate(e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(31,"p-dialog",27),r.Vb(32,"form"),r.Vb(33,"div",28),r.Vb(34,"div",29),r.Vb(35,"div",29),r.Vb(36,"span",30),r.Vb(37,"span",31),r.Mc(38,"Quote Status"),r.Ub(),r.Vb(39,"p-dropdown",32),r.dc("ngModelChange",(function(e){return t.quoteStatus=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(40,"div",29),r.Vb(41,"div",33),r.Vb(42,"span",30),r.Vb(43,"span",31),r.Mc(44,"From Date"),r.Ub(),r.Vb(45,"p-calendar",34),r.dc("ngModelChange",(function(e){return t.fromDate=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(46,"div",35),r.Vb(47,"span",30),r.Vb(48,"span",31),r.Mc(49,"To Date"),r.Ub(),r.Vb(50,"p-calendar",36),r.dc("ngModelChange",(function(e){return t.toDate=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(51,"p-footer"),r.Vb(52,"div",37),r.Vb(53,"button",38),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(54,"button",39),r.dc("click",(function(){r.Dc(e);const o=r.Bc(25);return t.reset(o)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(55,"p-dialog",40),r.Kc(56,fo,2,1,"div",41),r.Kc(57,Co,2,1,"div",41),r.Vb(58,"p-footer"),r.Vb(59,"div",37),r.Vb(60,"button",42),r.dc("click",(function(){return t.closeCharts()})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(6),r.oc("ngModel",t.arrgLevelSwitch),r.Eb(8),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.oc("loading",t.loading)("value",t.activeQuotesARMRepList)("lazy",!0)("paginator",!1)("rows",t.rowCount)("totalRecords",t.totalRecords)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("rows",9)("totalRecords",t.totalRecords),r.Eb(1),r.oc("visible",t.displayDialog)("closable",!1)("draggable",!0)("modal",!0),r.Eb(8),r.oc("options",t.quoteStatuses)("ngModel",t.quoteStatus)("ngModelOptions",r.rc(34,vo)),r.Eb(6),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.fromDate),r.Eb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.toDate),r.Eb(5),r.oc("visible",t.showCharts)("closable",!1)("draggable",!0)("modal",!0),r.Eb(1),r.oc("ngIf",!t.isbarChart),r.Eb(1),r.oc("ngIf",t.isbarChart))},directives:[m.a,f.c,Gt.a,v.k,v.n,s.o,y.j,f.f,Ye.a,C.a,v.v,v.l,v.m,oe.a,S.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i,Yt.a],pipes:[s.f,s.g],encapsulation:2}),e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();const Mo=o("+yMW");let Ro=(()=>{class e{constructor(e){this.http=e}getAyaraActualsARMReport(e,t,o){return null==t&&(t=""),null==o&&(o=""),null==e&&(e=""),this.http.get(Mo.apiUrl+"/reports/actualsArmReport?arrgLevel="+e+"&fromDate="+t+"&toDate="+o).toPromise().then(e=>e)}getAyaraActualsARMReportFile(e,t,o,i){null==t&&(t=""),null==o&&(o=""),null==e&&(e="");let l=Mo.apiUrl+"/reports/exportActualsArmReport?arrgLevel="+e+"&fromDate="+t+"&toDate="+o;return null!=i&&""!=i&&(l=l+"&exportCols="+i),l}getAyaraActualsARMChart(e,t,o){return null==e&&(e=""),null==t&&(t=""),null==o&&(o=""),this.http.get(Mo.apiUrl+"/reports/generateActualsARMChart?arrgLevel="+e+"&fromDate="+t+"&toDate="+o).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();function Vo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",43),r.dc("click",(function(){return r.Dc(e),r.gc().displayCharts()})),r.Qb(1,"em",44),r.Ub()}}function Uo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",45),r.dc("click",(function(){return r.Dc(e),r.gc().exportCSVfile()})),r.Qb(1,"em",46),r.Ub()}}function wo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",59),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",60),r.Vb(3,"input",61),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const Do=function(){return{color:"grey"}};function No(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",62),r.Vb(2,"div"),r.Vb(3,"input",63),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",64),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,Do)),r.Eb(1),r.Nc(e.header)}}function Fo(e,t){if(1&e&&(r.Kc(0,wo,6,3,"div",58),r.Kc(1,No,6,6,"div",58)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const xo=function(){return{width:"100%",height:"100%"}};function Eo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",47),r.Vb(1,"div",48),r.Vb(2,"div",49),r.Vb(3,"input",50),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",51),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",52),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",53),r.Kc(9,Fo,2,2,"ng-template",54),r.Ub(),r.Ub(),r.Vb(10,"div",55),r.Vb(11,"a",56),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",57),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,xo)),r.oc("options",e.globalCols)}}function To(e,t){1&e&&r.Qb(0,"col")}function ko(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,To,1,0,"col",65),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const Lo=function(e,t){return{display:e,"text-align":t}};function Po(e,t){if(1&e&&(r.Vb(0,"th",67),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.oc("ngStyle",r.tc(2,Lo,e.display,e.text)),r.Eb(1),r.Oc(" ",e.header," ")}}function Oo(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Po,2,5,"th",66),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}const Io=function(e){return[e]};function Bo(e,t){if(1&e&&(r.Vb(0,"td",70),r.Vb(1,"span",71),r.Mc(2),r.hc(3,"date"),r.hc(4,"number"),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc();r.oc("ngStyle",r.tc(9,Lo,e.display,e.text)),r.Eb(1),r.pc("title",o[e.field]),r.Eb(1),r.Nc(i.isDateField(e.field)?r.jc(3,3,o[e.field],"MM/dd/yyyy"):"number"==r.sc(12,Io,e.type)?r.jc(4,6,o[e.field],"1.2-2"):o[e.field])}}function zo(e,t){if(1&e&&(r.Vb(0,"tr",68),r.Kc(1,Bo,5,14,"td",69),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function Qo(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",72),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}function $o(e,t){if(1&e&&r.Qb(0,"canvas",73),2&e){const e=r.gc();r.oc("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("plugins",e.barChartPlugins)("legend",e.barChartLegend)("chartType",e.barChartType)}}const Ko=o("+yMW");let _o=(()=>{class e{constructor(e,t,o,i,l){this.ayaraActualsARMReportService=e,this.rmanLookupsVService=t,this.location=o,this.commonSharedService=i,this.notificationService=l,this.columns=[],this.entities=[],this.quoteStatusList=[],this.noData=Ko.noData,this.collapsed=!1,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.arrgLevel="S",this.arrgLevelSwitch=!1,this.showCharts=!1,this.barChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.barChartData=[],this.chartReady=!1,this.globalCols=[],this.getAllAyaraActualsARMReport(),this.paginationOptions={pageNumber:0,pageSize:"10000"},this.getChartsData()}ngOnInit(){this.rowCount=20}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("ayaraActualsARMReport","Ayara Actuals ARM Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while saving"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSwitch(){this.arrgLevel=0==this.arrgLevelSwitch?"S":"L",this.getAllAyaraActualsARMReport(),this.getChartsData()}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}onBeforeToggle(e){this.collapsed=e.collapsed}paginate(e){this.loading=!0,this.actualsARMRepList=this.actualsARMList.slice(e.first,e.first+10),this.loading=!1}onRowSelect(e){}getAllAyaraActualsARMReport(){this.globalCols=[],this.loading=!0,this.ayaraActualsARMReportService.getAyaraActualsARMReport(this.arrgLevel,this.fromDate,this.toDate).then(e=>{this.actualsARMRepList=e.Content,this.actualsARMList=e.Content;let t=this.actualsARMRepList[0];for(let i in t)this.globalCols.push({field:i,header:i,style:{width:"100px","text-align":"right"},display:"table-cell",showField:!0,text:"right",drag:!0,type:"number"});let o=["Revenue Contract Number","Quote Number","Quote Status","Order Number","Quote Date","Geo","Country","Legal Entity Name","Account Name","Currency","Product Name"];for(let i=0;i<this.globalCols.length;i++)-1==o.indexOf(this.globalCols[i].header)?(this.globalCols[i].text="right",this.globalCols[i].type="number"):(this.globalCols[i].text="left",this.globalCols[i].type="text");this.actualsARMRepList=e.Content.slice(0,10),this.totalRecords=e.Content.length,this.loading=!1,this.columns=[],this.getTableColumns("ayaraActualsARMReport","Ayara Actuals ARM Report"),this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}showDialogToSearch(){this.fromDate="",this.toDate="",this.displayDialog=!0}exportCSVfile(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].header.replace(/[#$/()]/g,""));let e=this.ayaraActualsARMReportService.getAyaraActualsARMReportFile(this.arrgLevel,this.fromDate,this.toDate,this.exportCols);window.location.href=e}search(){this.getAllAyaraActualsARMReport(),this.getChartsData(),this.displayDialog=!1}reset(e){this.fromDate="",this.toDate="",this.quoteStatus="",this.arrgLevel="S",this.arrgLevelSwitch=!1,this.getAllAyaraActualsARMReport(),this.getChartsData(),this.displayDialog=!1}fieldType(e){return typeof e}isDateField(e){return-1!=e.search("Date")}displayCharts(){this.showCharts=!0}closeCharts(){this.showCharts=!1}getChartsData(){this.ayaraActualsARMReportService.getAyaraActualsARMChart(this.arrgLevel,this.fromDate,this.toDate).then(e=>{let t=e.Content;if(console.log(t),"S"==this.arrgLevel){let e=[],o=[];this.barChartLabels=[],this.barChartData=[],t.forEach(t=>{var i=new Date(t["Booked Date"]);e.push(i.getDate()+"-"+(i.getMonth()+1)+"-"+i.getFullYear()),o.push(t["Total ARM Revenue Price"])}),this.barChartLabels=e,this.barChartData.push({data:o,label:"Total ARM Revenue Price"}),console.log(this.barChartLabels),console.log(this.barChartData),this.chartReady=!0}else if("L"==this.arrgLevel){let e=[],o=[];this.barChartLabels=[],this.barChartData=[],t.forEach(t=>{e.push(t["Product Name"]),o.push(t["ARM Revenue Price"])}),this.barChartLabels=e,this.barChartData.push({data:o,label:"ARM Revenue Price"}),console.log(this.barChartLabels),console.log(this.barChartData),this.chartReady=!0}}).catch(e=>{this.notificationService.showError("Error occured while loading chart data")})}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Ro),r.Pb(ve.a),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraActualsARMReport-data"]],features:[r.Db([Ro])],decls:55,vars:30,consts:[[1,"content-section","implementation"],[1,"card-wrapper","waterfall-detail-report"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Actuals ARM Report",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],["onLabel","Line View","offLabel","Revenue Contract View","onIcon","fa fa-toggle-on fa-sm","offIcon","fa fa-toggle-off fa-sm",1,"ui-inputswitch",3,"ngModel","ngModelChange"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Analytics",3,"click",4,"ngIf"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll","mb-2"],["id","actualsARM-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["id","paginator-c",3,"rows","totalRecords","onPageChange"],["header","Search","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"md-inputfield"],[1,"selectSpan"],["showAnim","slideDown","name","fromDate","inputStyleClass","textbox","id","fromDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","From Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],[1,"ui-g-6","pull-right"],["showAnim","slideDown","name","toDate","inputStyleClass","textbox","id","toDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","To Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","reset","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["header","Actuals ARM Report","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[2,"display","block"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType",4,"ngIf"],["type","reset","pButton","","label","Close",1,"secondary-btn",3,"click"],["title","Analytics",3,"click"],[1,"fa","fa-pie-chart"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["style","width:100px","pResizableColumn","",3,"ngStyle",4,"ngFor","ngForOf"],["pResizableColumn","",2,"width","100px",3,"ngStyle"],[3,"pSelectableRow"],["style","width:100px",3,"ngStyle",4,"ngFor","ngForOf"],[2,"width","100px",3,"ngStyle"],[3,"title"],[1,"no-data"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"p-toggleButton",10),r.dc("ngModelChange",(function(e){return t.arrgLevelSwitch=e}))("ngModelChange",(function(){return t.onSwitch()})),r.Ub(),r.Vb(13,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(14,"em",11),r.Mc(15,"Columns"),r.Ub(),r.Vb(16,"a",12),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(17,"em",13),r.Ub(),r.Vb(18,"a",14),r.dc("click",(function(){r.Dc(e);const o=r.Bc(25);return t.reset(o)})),r.Qb(19,"em",15),r.Ub(),r.Kc(20,Vo,2,0,"a",16),r.Kc(21,Uo,2,0,"a",17),r.Kc(22,Eo,15,5,"div",18),r.Ub(),r.Ub(),r.Vb(23,"div",19),r.Vb(24,"p-table",20,21),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)})),r.Kc(26,ko,2,1,"ng-template",22),r.Kc(27,Oo,2,1,"ng-template",23),r.Kc(28,zo,2,2,"ng-template",24),r.Kc(29,Qo,3,1,"ng-template",25),r.Ub(),r.Ub(),r.Vb(30,"p-paginator",26),r.dc("onPageChange",(function(e){return t.paginate(e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(31,"p-dialog",27),r.Vb(32,"form"),r.Vb(33,"div",28),r.Vb(34,"div",29),r.Vb(35,"div",30),r.Vb(36,"span",31),r.Vb(37,"span",32),r.Mc(38,"From Date"),r.Ub(),r.Vb(39,"p-calendar",33),r.dc("ngModelChange",(function(e){return t.fromDate=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(40,"div",34),r.Vb(41,"span",31),r.Vb(42,"span",32),r.Mc(43,"To Date"),r.Ub(),r.Vb(44,"p-calendar",35),r.dc("ngModelChange",(function(e){return t.toDate=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(45,"p-footer"),r.Vb(46,"div",36),r.Vb(47,"button",37),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(48,"button",38),r.dc("click",(function(){r.Dc(e);const o=r.Bc(25);return t.reset(o)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(49,"p-dialog",39),r.Vb(50,"div",40),r.Kc(51,$o,1,6,"canvas",41),r.Ub(),r.Vb(52,"p-footer"),r.Vb(53,"div",36),r.Vb(54,"button",42),r.dc("click",(function(){return t.closeCharts()})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(6),r.oc("ngModel",t.arrgLevelSwitch),r.Eb(8),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.oc("loading",t.loading)("value",t.actualsARMRepList)("lazy",!0)("paginator",!1)("rows",t.rowCount)("totalRecords",t.totalRecords)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("rows",9)("totalRecords",t.totalRecords),r.Eb(1),r.oc("visible",t.displayDialog)("closable",!1)("draggable",!0)("modal",!0),r.Eb(8),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.fromDate),r.Eb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.toDate),r.Eb(5),r.oc("visible",t.showCharts)("closable",!1)("draggable",!0)("modal",!0),r.Eb(2),r.oc("ngIf",t.chartReady&&0!=t.barChartLabels.length))},directives:[m.a,f.c,Gt.a,v.k,v.n,s.o,y.j,f.f,Ye.a,C.a,v.v,v.l,v.m,S.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i,Yt.a],pipes:[s.f,s.g],encapsulation:2}),e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();const qo=o("+yMW");let Wo=(()=>{class e{constructor(e){this.http=e}getAyaraActualsActiveARMReport(e,t,o,i,l){return null==i&&(i=""),null==l&&(l=""),null==o&&(o=""),null==e&&(e=""),null==t&&(t=""),this.http.get(qo.apiUrl+"/reports/ayaraActiveAndActuals?arrgLevel="+e+"&docType="+t+"&quoteStatus="+o+"&fromDate="+i+"&toDate="+l).toPromise().then(e=>e)}getAyaraActualsActiveARMReportFile(e,t,o,i,l,a){null==i&&(i=""),null==l&&(l=""),null==o&&(o=""),null==e&&(e=""),null==t&&(t="");let n=qo.apiUrl+"/reports/exportActualsVsActiveArmReport?arrgLevel="+e+"&docType="+t+"&quoteStatus="+o+"&fromDate="+i+"&toDate="+l;return null!=a&&""!=a&&(n=n+"&exportCols="+a),n}getAyaraActualsActiveARMChart(e,t,o,i,l){return null==e&&(e=""),null==i&&(i=""),null==l&&(l=""),null==t&&(t=""),null==o&&(o=""),this.http.get(qo.apiUrl+"/reports/generateActualVsActiveChart?arrgLevel="+e+"&docType="+t+"&quoteStatus="+o+"&fromDate="+i+"&toDate="+l).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();function jo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",40),r.dc("click",(function(){return r.Dc(e),r.gc().displayCharts()})),r.Qb(1,"em",41),r.Ub()}}function Jo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",42),r.dc("click",(function(){return r.Dc(e),r.gc().exportCSVfile()})),r.Qb(1,"em",43),r.Ub()}}function Ho(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",56),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",57),r.Vb(3,"input",58),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const Go=function(){return{color:"grey"}};function Yo(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",59),r.Vb(2,"div"),r.Vb(3,"input",60),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",61),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,Go)),r.Eb(1),r.Nc(e.header)}}function Zo(e,t){if(1&e&&(r.Kc(0,Ho,6,3,"div",55),r.Kc(1,Yo,6,6,"div",55)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const Xo=function(){return{width:"100%",height:"100%"}};function ei(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",44),r.Vb(1,"div",45),r.Vb(2,"div",46),r.Vb(3,"input",47),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",48),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",49),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",50),r.Kc(9,Zo,2,2,"ng-template",51),r.Ub(),r.Ub(),r.Vb(10,"div",52),r.Vb(11,"a",53),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",54),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,Xo)),r.oc("options",e.globalCols)}}function ti(e,t){1&e&&r.Qb(0,"col")}function oi(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,ti,1,0,"col",62),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const ii=function(e,t){return{display:e,"text-align":t}};function li(e,t){if(1&e&&(r.Vb(0,"th",64),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.oc("ngStyle",r.tc(2,ii,e.display,e.text)),r.Eb(1),r.Oc(" ",e.header," ")}}function ai(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,li,2,5,"th",63),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}const ni=function(e){return[e]};function ri(e,t){if(1&e&&(r.Vb(0,"td",67),r.Vb(1,"span",68),r.Mc(2),r.hc(3,"date"),r.hc(4,"number"),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc();r.oc("ngStyle",r.tc(9,ii,e.display,e.text)),r.Eb(1),r.pc("title",o[e.field]),r.Eb(1),r.Nc(i.isDateField(e.field)?r.jc(3,3,o[e.field],"MM/dd/yyyy"):"number"==r.sc(12,ni,e.type)?r.jc(4,6,o[e.field],"1.2-2"):o[e.field])}}function si(e,t){if(1&e&&(r.Vb(0,"tr",65),r.Kc(1,ri,5,14,"td",66),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function ci(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",69),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}const di=function(){return{standalone:!0}};function ui(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",29),r.Vb(1,"div",29),r.Vb(2,"span",30),r.Vb(3,"span",31),r.Mc(4,"Quote Status"),r.Ub(),r.Vb(5,"p-dropdown",70),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().quoteStatus=t})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(5),r.oc("options",e.quoteStatuses)("ngModel",e.quoteStatus)("ngModelOptions",r.rc(3,di))}}function hi(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",74),r.Vb(1,"span",30),r.Vb(2,"span",31),r.Mc(3,"To Booked Date"),r.Ub(),r.Vb(4,"p-calendar",75),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc(2).toDate=t})),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc(2);r.Eb(4),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",e.toDate)}}function gi(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",29),r.Vb(1,"div",71),r.Vb(2,"span",30),r.Vb(3,"span",31),r.Mc(4,"From Booked Date"),r.Ub(),r.Vb(5,"p-calendar",72),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().fromDate=t})),r.Ub(),r.Ub(),r.Ub(),r.Kc(6,hi,5,3,"div",73),r.Ub()}if(2&e){const e=r.gc();r.Eb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",e.fromDate),r.Eb(1),r.oc("ngIf",e.displayDocumentParams&&e.orderDocument)}}function bi(e,t){if(1&e&&r.Qb(0,"canvas",78),2&e){const e=r.gc(2);r.oc("data",e.doughnutChartData)("labels",e.doughnutChartLabels)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)}}function pi(e,t){if(1&e&&(r.Vb(0,"div",76),r.Kc(1,bi,1,4,"canvas",77),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngIf",e.chartReady&&0!=e.doughnutChartLabels.length)}}function mi(e,t){if(1&e&&r.Qb(0,"canvas",80),2&e){const e=r.gc(2);r.oc("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("plugins",e.barChartPlugins)("legend",e.barChartLegend)("chartType",e.barChartType)}}function fi(e,t){if(1&e&&(r.Vb(0,"div",76),r.Kc(1,mi,1,6,"canvas",79),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngIf",e.chartReady&&0!=e.barChartLabels.length)}}const yi=o("+yMW");let Ci=(()=>{class e{constructor(e,t,o,i,l){this.ayaraActualsVsActiveReportService=e,this.rmanLookupsVService=t,this.location=o,this.commonSharedService=i,this.notificationService=l,this.columns=[],this.orderDocument=!1,this.displayDocumentParams=!1,this.entities=[],this.quoteStatusList=[],this.documentTypesList=[],this.noData=yi.noData,this.collapsed=!1,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.arrgLevel="S",this.arrgLevelSwitch=!1,this.chartReady=!1,this.showCharts=!1,this.doughnutChartLabels=[],this.doughnutChartData=[],this.doughnutChartType="doughnut",this.doughnutChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartLabels=[],this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.barChartData=[],this.isbarChart=!1,this.globalCols=[],this.getAllAyaraActualsVsActiveReport(),this.paginationOptions={pageNumber:0,pageSize:"10000"},this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"QUOTE_STATUS_LIST"}).then(e=>{this.quoteStatusList=e.content,this.prepareQuoteStatusObject()}),this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"DOCUMENT_TYPES_LIST"}).then(e=>{this.documentTypesList=e.content,this.prepareDocumentTypesObject()}),this.getChartsData()}ngOnInit(){this.rowCount=20}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("ayaraActualsVsActiveReport","Actual and Active ARM Detail Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while saving"),this.loading=!1})}onDragStart(e){this.startIndex=e}prepareQuoteStatusObject(){let e=[{label:yi.dropDownOptions.selectQuoteStatus,value:null}];this.quoteStatusList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.quoteStatuses=e}prepareDocumentTypesObject(){let e=[{label:yi.dropDownOptions.selectDocumentType,value:null}];this.documentTypesList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.documentTypes=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSwitch(){this.arrgLevel=0==this.arrgLevelSwitch?"S":"L",this.getAllAyaraActualsVsActiveReport(),this.getChartsData()}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}onBeforeToggle(e){this.collapsed=e.collapsed}paginate(e){this.loading=!0,this.actualsActiveARMRepList=this.actualsActiveARMList.slice(e.first,e.first+10),this.loading=!1}onRowSelect(e){}getAllAyaraActualsVsActiveReport(){this.globalCols=[],this.loading=!0,this.ayaraActualsVsActiveReportService.getAyaraActualsActiveARMReport(this.arrgLevel,this.documentType,this.quoteStatus,this.fromDate,this.toDate).then(e=>{this.actualsActiveARMRepList=e.Content,this.actualsActiveARMList=e.Content;let t=this.actualsActiveARMRepList[0];for(let i in t)this.globalCols.push({field:i,header:i,style:{width:"100px","text-align":"right"},display:"table-cell",showField:!0,text:"right",drag:!0,type:"number"});let o=["Revenue Contract Number","Quote Number","Quote Status","Quote Date","Order Number","Geo","Country","Legal Entity Name","Account Name","Currency","Product Name"];for(let i=0;i<this.globalCols.length;i++)-1==o.indexOf(this.globalCols[i].header)?(this.globalCols[i].text="right",this.globalCols[i].type="number"):(this.globalCols[i].text="left",this.globalCols[i].type="text");this.actualsActiveARMRepList=e.Content.slice(0,10),this.totalRecords=e.Content.length,this.loading=!1,this.columns=[],this.getTableColumns("ayaraActualsVsActiveReport","Actual and Active ARM Detail Report"),this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}onSelectingDocumentType(e){"O"==e?(this.displayDocumentParams=!0,this.orderDocument=!0):"Q"==e?(this.displayDocumentParams=!0,this.orderDocument=!1):(this.displayDocumentParams=!1,this.orderDocument=!1)}showDialogToSearch(){this.fromDate="",this.toDate="",this.quoteStatus="",this.documentType="",this.displayDialog=!0}displayCharts(){this.showCharts=!0}closeCharts(){this.showCharts=!1}exportCSVfile(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].header.replace(/[#$/()]/g,""));let e=this.ayaraActualsVsActiveReportService.getAyaraActualsActiveARMReportFile(this.arrgLevel,this.documentType,this.quoteStatus,this.fromDate,this.toDate,this.exportCols);window.location.href=e}search(){this.getAllAyaraActualsVsActiveReport(),this.getChartsData(),this.displayDialog=!1}reset(e){this.fromDate="",this.toDate="",this.documentType="",this.quoteStatus="",this.arrgLevel="S",this.arrgLevelSwitch=!1,this.getAllAyaraActualsVsActiveReport(),this.getChartsData(),this.displayDialog=!1,this.showCharts=!1,this.isbarChart=!1}fieldType(e){return typeof e}isDateField(e){return-1!=e.search("Date")}getChartsData(){this.ayaraActualsVsActiveReportService.getAyaraActualsActiveARMChart(this.arrgLevel,this.documentType,this.quoteStatus,this.fromDate,this.toDate).then(e=>{let t=e.Content;if("S"==this.arrgLevel){this.isbarChart=!1,console.log(t);let e=[],o=[];this.doughnutChartLabels=[],this.doughnutChartData=[],t.forEach(t=>{e.push(t["Totals Of"]),o.push(t.ARM_REVENUE_PRICE)}),console.log(e),console.log(o),this.doughnutChartLabels=e,this.doughnutChartData=o,this.chartReady=!0}else if("L"==this.arrgLevel){this.isbarChart=!0;let e=[],o=[];this.barChartLabels=[],this.barChartData=[],t.forEach(t=>{e.push(t["Product Name"]),o.push(t["ARM Revenue Price"])}),console.log(e),console.log(o),this.barChartLabels=e,this.barChartData.push({data:o,label:"ARM Revenue Price"}),this.chartReady=!0}}).catch(e=>{this.notificationService.showError("Error occured while loading chart data")})}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Wo),r.Pb(ve.a),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraActualsVsActiveReport-data"]],features:[r.Db([Wo])],decls:52,vars:31,consts:[[1,"content-section","implementation"],[1,"card-wrapper","waterfall-detail-report"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Quoted Vs Actuals Report",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],["onLabel","Line View","offLabel","Revenue Contract View","onIcon","fa fa-toggle-on fa-sm","offIcon","fa fa-toggle-off fa-sm",1,"ui-inputswitch",3,"ngModel","ngModelChange"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Analytics",3,"click",4,"ngIf"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll","mb-2"],["id","actualsARM-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["id","paginator-c",3,"rows","totalRecords","onPageChange"],["header","Search","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"md-inputfield"],[1,"selectSpan"],["appendTo","body","name","documentType",3,"options","ngModel","ngModelOptions","ngModelChange","onChange"],["class","ui-g-12",4,"ngIf"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","reset","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["header","Quoted Vs Actuals Report","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],["style","display: block;",4,"ngIf"],["type","reset","pButton","","label","Close",1,"secondary-btn",3,"click"],["title","Analytics",3,"click"],[1,"fa","fa-pie-chart"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["style","width:100px","pResizableColumn","",3,"ngStyle",4,"ngFor","ngForOf"],["pResizableColumn","",2,"width","100px",3,"ngStyle"],[3,"pSelectableRow"],["style","width:100px",3,"ngStyle",4,"ngFor","ngForOf"],[2,"width","100px",3,"ngStyle"],[3,"title"],[1,"no-data"],["appendTo","body","name","quoteStatus",3,"options","ngModel","ngModelOptions","ngModelChange"],[1,"ui-g-6"],["showAnim","slideDown","name","fromDate","inputStyleClass","textbox","id","fromDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","From Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],["class","ui-g-6 pull-right",4,"ngIf"],[1,"ui-g-6","pull-right"],["showAnim","slideDown","name","toDate","inputStyleClass","textbox","id","toDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","To Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],[2,"display","block"],["baseChart","",3,"data","labels","options","chartType",4,"ngIf"],["baseChart","",3,"data","labels","options","chartType"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType",4,"ngIf"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"p-toggleButton",10),r.dc("ngModelChange",(function(e){return t.arrgLevelSwitch=e}))("ngModelChange",(function(){return t.onSwitch()})),r.Ub(),r.Vb(13,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(14,"em",11),r.Mc(15,"Columns"),r.Ub(),r.Vb(16,"a",12),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(17,"em",13),r.Ub(),r.Vb(18,"a",14),r.dc("click",(function(){r.Dc(e);const o=r.Bc(25);return t.reset(o)})),r.Qb(19,"em",15),r.Ub(),r.Kc(20,jo,2,0,"a",16),r.Kc(21,Jo,2,0,"a",17),r.Kc(22,ei,15,5,"div",18),r.Ub(),r.Ub(),r.Vb(23,"div",19),r.Vb(24,"p-table",20,21),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)})),r.Kc(26,oi,2,1,"ng-template",22),r.Kc(27,ai,2,1,"ng-template",23),r.Kc(28,si,2,2,"ng-template",24),r.Kc(29,ci,3,1,"ng-template",25),r.Ub(),r.Ub(),r.Vb(30,"p-paginator",26),r.dc("onPageChange",(function(e){return t.paginate(e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(31,"p-dialog",27),r.Vb(32,"form"),r.Vb(33,"div",28),r.Vb(34,"div",29),r.Vb(35,"div",29),r.Vb(36,"span",30),r.Vb(37,"span",31),r.Mc(38,"Document Type"),r.Ub(),r.Vb(39,"p-dropdown",32),r.dc("ngModelChange",(function(e){return t.documentType=e}))("onChange",(function(e){return t.onSelectingDocumentType(e.value)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Kc(40,ui,6,4,"div",33),r.Kc(41,gi,7,4,"div",33),r.Ub(),r.Ub(),r.Vb(42,"p-footer"),r.Vb(43,"div",34),r.Vb(44,"button",35),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(45,"button",36),r.dc("click",(function(){r.Dc(e);const o=r.Bc(25);return t.reset(o)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(46,"p-dialog",37),r.Kc(47,pi,2,1,"div",38),r.Kc(48,fi,2,1,"div",38),r.Vb(49,"p-footer"),r.Vb(50,"div",34),r.Vb(51,"button",39),r.dc("click",(function(){return t.closeCharts()})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(6),r.oc("ngModel",t.arrgLevelSwitch),r.Eb(8),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.oc("loading",t.loading)("value",t.actualsActiveARMRepList)("lazy",!0)("paginator",!1)("rows",t.rowCount)("totalRecords",t.totalRecords)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("rows",9)("totalRecords",t.totalRecords),r.Eb(1),r.oc("visible",t.displayDialog)("closable",!1)("draggable",!0)("modal",!0),r.Eb(8),r.oc("options",t.documentTypes)("ngModel",t.documentType)("ngModelOptions",r.rc(30,di)),r.Eb(1),r.oc("ngIf",t.displayDocumentParams&&!t.orderDocument),r.Eb(1),r.oc("ngIf",t.displayDocumentParams&&t.orderDocument),r.Eb(5),r.oc("visible",t.showCharts)("closable",!1)("draggable",!0)("modal",!0),r.Eb(1),r.oc("ngIf",!t.isbarChart),r.Eb(1),r.oc("ngIf",t.isbarChart))},directives:[m.a,f.c,Gt.a,v.k,v.n,s.o,y.j,f.f,Ye.a,C.a,v.v,v.l,v.m,oe.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i,S.a,Yt.a],pipes:[s.f,s.g],encapsulation:2}),e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();const vi=o("+yMW");let Ai=(()=>{class e{constructor(e){this.http=e}getAyaraActiveDealsARMReport(e,t,o,i,l,a){return null==l&&(l=""),null==a&&(a=""),null==e&&(e=""),null==t&&(t=""),null==i&&(i=""),null==o&&(o=""),this.http.get(vi.apiUrl+"/reports/activeDealsArmReport?dealNumber="+e+"&quoteNumber="+t+"&geo="+o+"&quoteStatus="+i+"&fromDate="+l+"&toDate="+a).toPromise().then(e=>e)}getAyaraActiveDealsARMReportFile(e,t,o,i,l,a,n){null==l&&(l=""),null==a&&(a=""),null==e&&(e=""),null==t&&(t=""),null==i&&(i=""),null==o&&(o="");let r=vi.apiUrl+"/reports/exportActiveDealsArmReport?dealNumber="+e+"&quoteNumber="+t+"&geo="+o+"&quoteStatus="+i+"&fromDate="+l+"&toDate="+a;return null!=n&&""!=n&&(r=r+"&exportCols="+encodeURIComponent(n)),r}getAyaraActiveDealsARMChart(e,t,o,i,l,a){return null==l&&(l=""),null==a&&(a=""),null==e&&(e=""),null==t&&(t=""),null==i&&(i=""),null==o&&(o=""),this.http.get(vi.apiUrl+"/reports/generateActiveDealsARMChart?dealNumber="+e+"&quoteNumber="+t+"&geo="+o+"&quoteStatus="+i+"&fromDate="+l+"&toDate="+a).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();function Si(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",45),r.dc("click",(function(){return r.Dc(e),r.gc().displayCharts()})),r.Qb(1,"em",46),r.Ub()}}function Mi(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",47),r.dc("click",(function(){return r.Dc(e),r.gc().exportCSVfile()})),r.Qb(1,"em",48),r.Ub()}}function Ri(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",61),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",62),r.Vb(3,"input",63),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const Vi=function(){return{color:"grey"}};function Ui(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",64),r.Vb(2,"div"),r.Vb(3,"input",65),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",66),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,Vi)),r.Eb(1),r.Nc(e.header)}}function wi(e,t){if(1&e&&(r.Kc(0,Ri,6,3,"div",60),r.Kc(1,Ui,6,6,"div",60)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const Di=function(){return{width:"100%",height:"100%"}};function Ni(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",49),r.Vb(1,"div",50),r.Vb(2,"div",51),r.Vb(3,"input",52),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",53),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",54),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",55),r.Kc(9,wi,2,2,"ng-template",56),r.Ub(),r.Ub(),r.Vb(10,"div",57),r.Vb(11,"a",58),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",59),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,Di)),r.oc("options",e.globalCols)}}function Fi(e,t){1&e&&r.Qb(0,"col")}function xi(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,Fi,1,0,"col",67),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const Ei=function(e,t){return{display:e,"text-align":t}};function Ti(e,t){if(1&e&&(r.Vb(0,"th",69),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.oc("ngStyle",r.tc(2,Ei,e.display,e.text)),r.Eb(1),r.Oc(" ",e.header," ")}}function ki(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Ti,2,5,"th",68),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}const Li=function(e){return[e]};function Pi(e,t){if(1&e&&(r.Vb(0,"td",72),r.Vb(1,"span",73),r.Mc(2),r.hc(3,"date"),r.hc(4,"number"),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc();r.oc("ngStyle",r.tc(9,Ei,e.display,e.text)),r.Eb(1),r.pc("title",o[e.field]),r.Eb(1),r.Nc(i.isDateField(e.field)?r.jc(3,3,o[e.field],"MM/dd/yyyy"):"number"==r.sc(12,Li,e.type)?r.jc(4,6,o[e.field],"1.2-2"):o[e.field])}}function Oi(e,t){if(1&e&&(r.Vb(0,"tr",70),r.Kc(1,Pi,5,14,"td",71),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function Ii(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",74),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}function Bi(e,t){if(1&e&&r.Qb(0,"canvas",77),2&e){const e=r.gc(2);r.oc("data",e.doughnutChartData)("labels",e.doughnutChartLabels)("options",e.doughnutChartOptions)("chartType",e.doughtnutChartType)}}function zi(e,t){if(1&e&&(r.Vb(0,"div",75),r.Kc(1,Bi,1,4,"canvas",76),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngIf",e.chartReady&&0!=e.doughnutChartLabels.length)}}function Qi(e,t){if(1&e&&r.Qb(0,"canvas",79),2&e){const e=r.gc(2);r.oc("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("plugins",e.barChartPlugins)("legend",e.barChartLegend)("chartType",e.barChartType)}}function $i(e,t){if(1&e&&(r.Vb(0,"div",75),r.Kc(1,Qi,1,6,"canvas",78),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngIf",e.chartReady&&0!=e.barChartLabels.length)}}const Ki=function(){return{standalone:!0}},_i=o("+yMW");let qi=(()=>{class e{constructor(e,t,o,i,l){this.ayaraActiveDealsARMReportService=e,this.rmanLookupsVService=t,this.location=o,this.commonSharedService=i,this.notificationService=l,this.columns=[],this.entities=[],this.quoteStatusList=[],this.geoList=[],this.noData=_i.noData,this.collapsed=!1,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.arrgLevel="S",this.arrgLevelSwitch=!1,this.chartReady=!1,this.showCharts=!1,this.doughnutChartLabels=[],this.doughnutChartData=[],this.doughtnutChartType="doughnut",this.doughnutChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartLabels=[],this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.barChartData=[],this.isbarChart=!1,this.globalCols=[],this.paginationOptions={pageNumber:0,pageSize:"10000"},this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"QUOTE_STATUS_LIST"}).then(e=>{this.quoteStatusList=e.content,this.prepareQuoteStatusObject()}),this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"SALES_LEVEL2"}).then(e=>{this.geoList=e.content,this.prepareGeoObject()}),this.getAllAyaraActiveDealsARMReport(),this.getChartsData()}ngOnInit(){this.rowCount=20}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("ayaraActiveDealsARMReport","Ayara Active Deals ARM Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while saving"),this.loading=!1})}onDragStart(e){this.startIndex=e}prepareQuoteStatusObject(){let e=[{label:_i.dropDownOptions.selectQuoteStatus,value:null}];this.quoteStatusList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.quoteStatuses=e}prepareGeoObject(){let e=[{label:_i.dropDownOptions.selectGeo,value:null}];this.geoList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.geos=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSwitch(){this.arrgLevel=0==this.arrgLevelSwitch?"S":"L",this.getAllAyaraActiveDealsARMReport(),this.getChartsData()}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}onBeforeToggle(e){this.collapsed=e.collapsed}paginate(e){this.loading=!0,this.activeDealsARMRepList=this.activeDealsARMList.slice(e.first,e.first+10),this.loading=!1}onRowSelect(e){}getAllAyaraActiveDealsARMReport(){this.globalCols=[],this.loading=!0,this.ayaraActiveDealsARMReportService.getAyaraActiveDealsARMReport(this.dealNumber,this.quoteNumber,this.geo,this.quoteStatus,this.fromDate,this.toDate).then(e=>{this.activeDealsARMRepList=e.Content,this.activeDealsARMList=e.Content;let t=this.activeDealsARMRepList[0];for(let i in t)this.globalCols.push({field:i,header:i,style:{width:"100px","text-align":"right"},display:"table-cell",showField:!0,text:"right",drag:!0,type:"number"});let o=["Deal Number","Quote Number","Status","Geo","Country","Legal Entity Name","Account Name","Currency","Product Name"];for(let i=0;i<this.globalCols.length;i++)-1==o.indexOf(this.globalCols[i].header)?(this.globalCols[i].text="right",this.globalCols[i].type="number"):(this.globalCols[i].text="left",this.globalCols[i].type="text");this.activeDealsARMRepList=e.Content.slice(0,10),this.totalRecords=e.Content.length,this.loading=!1,this.columns=[],this.getTableColumns("ayaraActiveDealsARMReport","Ayara Active Deals ARM Report"),this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}showDialogToSearch(){this.fromDate="",this.toDate="",this.quoteStatus="",this.dealNumber="",this.quoteNumber="",this.geo="",this.prepareQuoteStatusObject(),this.displayDialog=!0}exportCSVfile(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].header.replace(/[#$/()]/g,""));let e=this.ayaraActiveDealsARMReportService.getAyaraActiveDealsARMReportFile(this.dealNumber,this.quoteNumber,this.geo,this.quoteStatus,this.fromDate,this.toDate,this.exportCols);window.location.href=e}search(){this.getAllAyaraActiveDealsARMReport(),this.getChartsData(),this.displayDialog=!1}reset(e){this.dealNumber="",this.quoteNumber="",this.fromDate="",this.toDate="",this.quoteStatus="",this.geo="",this.arrgLevel="S",this.arrgLevelSwitch=!1,this.getAllAyaraActiveDealsARMReport(),this.getChartsData(),this.displayDialog=!1,this.isbarChart=!1}fieldType(e){return typeof e}isDateField(e){return-1!=e.search("Date")}displayCharts(){this.showCharts=!0}closeCharts(){this.showCharts=!1}getChartsData(){this.ayaraActiveDealsARMReportService.getAyaraActiveDealsARMChart(this.dealNumber,this.quoteNumber,this.geo,this.quoteStatus,this.fromDate,this.toDate).then(e=>{let t=e.Content;this.isbarChart=!1;let o=[],i=[];this.doughnutChartLabels=[],this.doughnutChartData=[],t.forEach(e=>{o.push(e["Deal Status"]),i.push(e["Revenue Amount"])}),this.doughnutChartLabels=o,this.doughnutChartData=i,this.chartReady=!0}).catch(e=>{this.notificationService.showError("Error occured while loading chart data")})}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Ai),r.Pb(ve.a),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraActiveDealsARMReport-data"]],features:[r.Db([Ai])],decls:77,vars:44,consts:[[1,"content-section","implementation"],[1,"card-wrapper","waterfall-detail-report"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Deal ARM Report",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Analytics",3,"click",4,"ngIf"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll","mb-2"],["id","activeDealsARM-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["id","paginator-c",3,"rows","totalRecords","onPageChange"],["header","Search","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"md-inputfield"],[1,"selectSpan"],["pInputText","","name","dealNumber","id","dealNumber","placeholder","Deal Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],[1,"ui-g-6","pull-right"],["pInputText","","name","quoteNumber","id","quoteNumber","placeholder","Quote Number",1,"textbox",3,"ngModelOptions","ngModel","ngModelChange"],["appendTo","body","name","geo",3,"options","ngModel","ngModelOptions","ngModelChange"],["appendTo","body","name","quoteStatus",3,"options","ngModel","ngModelOptions","ngModelChange"],["showAnim","slideDown","name","fromDate","inputStyleClass","textbox","id","fromDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","From Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],["showAnim","slideDown","name","toDate","inputStyleClass","textbox","id","toDate","yearRange","2000:2030","dateFormat","yy-mm-dd","placeholder","To Date","appendTo","body","dataType","string",3,"monthNavigator","yearNavigator","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","reset","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["header","Quoted ARM Report","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],["style","display: block;",4,"ngIf"],["type","reset","pButton","","label","Close",1,"secondary-btn",3,"click"],["title","Analytics",3,"click"],[1,"fa","fa-pie-chart"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["style","width:100px","pResizableColumn","",3,"ngStyle",4,"ngFor","ngForOf"],["pResizableColumn","",2,"width","100px",3,"ngStyle"],[3,"pSelectableRow"],["style","width:100px",3,"ngStyle",4,"ngFor","ngForOf"],[2,"width","100px",3,"ngStyle"],[3,"title"],[1,"no-data"],[2,"display","block"],["baseChart","",3,"data","labels","options","chartType",4,"ngIf"],["baseChart","",3,"data","labels","options","chartType"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType",4,"ngIf"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(13,"em",10),r.Mc(14,"Columns"),r.Ub(),r.Vb(15,"a",11),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(16,"em",12),r.Ub(),r.Vb(17,"a",13),r.dc("click",(function(){r.Dc(e);const o=r.Bc(24);return t.reset(o)})),r.Qb(18,"em",14),r.Ub(),r.Kc(19,Si,2,0,"a",15),r.Kc(20,Mi,2,0,"a",16),r.Kc(21,Ni,15,5,"div",17),r.Ub(),r.Ub(),r.Vb(22,"div",18),r.Vb(23,"p-table",19,20),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)})),r.Kc(25,xi,2,1,"ng-template",21),r.Kc(26,ki,2,1,"ng-template",22),r.Kc(27,Oi,2,2,"ng-template",23),r.Kc(28,Ii,3,1,"ng-template",24),r.Ub(),r.Ub(),r.Vb(29,"p-paginator",25),r.dc("onPageChange",(function(e){return t.paginate(e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(30,"p-dialog",26),r.Vb(31,"form"),r.Vb(32,"div",27),r.Vb(33,"div",28),r.Vb(34,"div",29),r.Vb(35,"span",30),r.Vb(36,"span",31),r.Mc(37,"Deal Number"),r.Ub(),r.Vb(38,"input",32),r.dc("ngModelChange",(function(e){return t.dealNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(39,"div",33),r.Vb(40,"span",30),r.Vb(41,"span",31),r.Mc(42,"Quote Number"),r.Ub(),r.Vb(43,"input",34),r.dc("ngModelChange",(function(e){return t.quoteNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(44,"div",28),r.Vb(45,"div",28),r.Vb(46,"span",30),r.Vb(47,"span",31),r.Mc(48,"Geo"),r.Ub(),r.Vb(49,"p-dropdown",35),r.dc("ngModelChange",(function(e){return t.geo=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(50,"div",28),r.Vb(51,"div",28),r.Vb(52,"span",30),r.Vb(53,"span",31),r.Mc(54,"Quote Status"),r.Ub(),r.Vb(55,"p-dropdown",36),r.dc("ngModelChange",(function(e){return t.quoteStatus=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(56,"div",28),r.Vb(57,"div",29),r.Vb(58,"span",30),r.Vb(59,"span",31),r.Mc(60,"From Date"),r.Ub(),r.Vb(61,"p-calendar",37),r.dc("ngModelChange",(function(e){return t.fromDate=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(62,"div",33),r.Vb(63,"span",30),r.Vb(64,"span",31),r.Mc(65,"To Date"),r.Ub(),r.Vb(66,"p-calendar",38),r.dc("ngModelChange",(function(e){return t.toDate=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(67,"p-footer"),r.Vb(68,"div",39),r.Vb(69,"button",40),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(70,"button",41),r.dc("click",(function(){r.Dc(e);const o=r.Bc(24);return t.reset(o)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(71,"p-dialog",42),r.Kc(72,zi,2,1,"div",43),r.Kc(73,$i,2,1,"div",43),r.Vb(74,"p-footer"),r.Vb(75,"div",39),r.Vb(76,"button",44),r.dc("click",(function(){return t.closeCharts()})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(13),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.oc("loading",t.loading)("value",t.activeDealsARMRepList)("lazy",!0)("paginator",!1)("rows",t.rowCount)("totalRecords",t.totalRecords)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("rows",10)("totalRecords",t.totalRecords),r.Eb(1),r.oc("visible",t.displayDialog)("closable",!1)("draggable",!0)("modal",!0),r.Eb(8),r.oc("ngModelOptions",r.rc(40,Ki))("ngModel",t.dealNumber),r.Eb(5),r.oc("ngModelOptions",r.rc(41,Ki))("ngModel",t.quoteNumber),r.Eb(6),r.oc("options",t.geos)("ngModel",t.geo)("ngModelOptions",r.rc(42,Ki)),r.Eb(6),r.oc("options",t.quoteStatuses)("ngModel",t.quoteStatus)("ngModelOptions",r.rc(43,Ki)),r.Eb(6),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.fromDate),r.Eb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModel",t.toDate),r.Eb(5),r.oc("visible",t.showCharts)("closable",!1)("draggable",!0)("modal",!0),r.Eb(1),r.oc("ngIf",!t.isbarChart),r.Eb(1),r.oc("ngIf",t.isbarChart))},directives:[m.a,f.c,s.o,y.j,f.f,Ye.a,C.a,v.v,v.l,v.m,v.b,M.a,v.k,v.n,oe.a,S.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i,Yt.a],pipes:[s.f,s.g],encapsulation:2}),e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var Wi=o("8DrR"),ji=o("FpCA");const Ji=o("+yMW");new n.f({"Content-Type":"application/json"});let Hi=(()=>{class e{constructor(e,t){this.http=e,this.datePipe=t}getServiceUrl(e,t,o,i){let l=Ji.apiUrl+"/ayaraSummaryReportExport?";return 0==o&&(l=Ji.apiUrl+"/ayaraSummaryReport?"),t.groupBy&&(l=l+"&groupBy="+t.groupBy),t.rcNumber&&(l=l+"&rcNumber="+t.rcNumber),t.salesContract&&(l=l+"&salesContract="+t.salesContract),t.so&&(l=l+"&so="+t.so),t.orderLine&&(l=l+"&orderLine="+t.orderLine),t.assetId&&(l=l+"&assetId="+t.assetId),t.startDate&&(l=l+"&startDate="+this.datePipe.transform(t.startDate,"yyyyMMdd")),t.endDate&&(l=l+"&endDate="+this.datePipe.transform(t.endDate,"yyyyMMdd")),null==e.pageNumber||""==e.pageNumber||isNaN(e.pageNumber)||0==e.pageNumber||(l=l+"&page="+e.pageNumber+"&size="+e.pageSize),null!=i&&""!=i&&(l=l+"&exportCols="+i),l}getAllayaraAccountSummaryReport(e,t,o){let i=this.getServiceUrl(e,t,0,o);return this.http.get(i).toPromise().then(e=>e)}fetchRCNumbers(e){return this.http.get(Ji.apiUrl+"/fetchAllRC?rc="+e).toPromise().then(e=>e)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b),r.Zb(s.f))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var Gi=o("Nf9I");function Yi(e,t){if(1&e){const e=r.Wb();r.Tb(0),r.Vb(1,"a",31),r.dc("click",(function(){return r.Dc(e),r.gc(2).exportExcel()})),r.Qb(2,"em",32),r.Ub(),r.Sb()}}function Zi(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",44),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(3).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(3).onDrop(t)})),r.Vb(2,"div",45),r.Vb(3,"input",46),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(3).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const Xi=function(){return{color:"grey"}};function el(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",47),r.Vb(2,"div"),r.Vb(3,"input",48),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(3).selectColumns(t)})),r.Ub(),r.Vb(4,"label",49),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,Xi)),r.Eb(1),r.Nc(e.header)}}function tl(e,t){if(1&e&&(r.Kc(0,Zi,6,3,"div",29),r.Kc(1,el,6,6,"div",29)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const ol=function(){return{width:"100%",height:"100%"}};function il(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",33),r.Vb(1,"div",34),r.Vb(2,"div",35),r.Vb(3,"input",36),r.dc("click",(function(){return r.Dc(e),r.gc(2).onSelectAll()})),r.Ub(),r.Vb(4,"label",37),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",38),r.dc("click",(function(t){return r.Dc(e),r.gc(2).closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",39),r.Kc(9,tl,2,2,"ng-template",40),r.Ub(),r.Ub(),r.Vb(10,"div",41),r.Vb(11,"a",42),r.dc("click",(function(){return r.Dc(e),r.gc(2).saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",43),r.dc("click",(function(t){return r.Dc(e),r.gc(2).closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc(2);r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,ol)),r.oc("options",e.globalCols)}}function ll(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",22),r.Vb(1,"a",23),r.dc("click",(function(t){return r.Dc(e),r.gc().onConfiguringColumns(t)})),r.Qb(2,"em",24),r.Mc(3,"Columns"),r.Ub(),r.Vb(4,"a",25),r.dc("click",(function(){return r.Dc(e),r.gc().showDialogToSearch()})),r.Qb(5,"em",26),r.Ub(),r.Vb(6,"a",27),r.dc("click",(function(){r.Dc(e);const t=r.gc(),o=r.Bc(6);return t.reset(o)})),r.Qb(7,"em",28),r.Ub(),r.Kc(8,Yi,3,0,"ng-container",29),r.Kc(9,il,15,5,"div",30),r.Ub()}if(2&e){const e=r.gc();r.Eb(8),r.oc("ngIf",!e.disableExport),r.Eb(1),r.oc("ngIf",!e.showAddColumns)}}function al(e,t){1&e&&r.Qb(0,"col")}function nl(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,al,1,0,"col",50),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const rl=function(e){return{display:e}};function sl(e,t){if(1&e&&(r.Vb(0,"th",53),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,rl,e.display)),r.Eb(1),r.Nc(e.header)}}function cl(e,t){if(1&e&&(r.Vb(0,"th",54),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,rl,e.display)),r.Eb(1),r.Nc(e.header)}}function dl(e,t){if(1&e&&(r.Tb(0),r.Kc(1,sl,2,5,"th",51),r.Kc(2,cl,2,5,"th",52),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type||"date"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type||"round"==e.type||"link"==e.type)}}function ul(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,dl,3,2,"ng-container",50),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function hl(e,t){if(1&e&&(r.Vb(0,"td",58),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,rl,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function gl(e,t){if(1&e&&(r.Vb(0,"td",59),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,rl,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function bl(e,t){if(1&e&&(r.Vb(0,"td",58),r.hc(1,"date"),r.Mc(2),r.hc(3,"date"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.jc(1,3,t[e.field],"MM/dd/yyyy")),r.oc("ngStyle",r.sc(9,rl,e.display)),r.Eb(2),r.Oc(" ",r.jc(3,6,t[e.field],"MM/dd/yyyy")," ")}}function pl(e,t){if(1&e&&(r.Vb(0,"td",59),r.hc(1,"round"),r.Mc(2),r.hc(3,"round"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.ic(1,3,t[e.field])),r.oc("ngStyle",r.sc(7,rl,e.display)),r.Eb(2),r.Oc(" ",r.ic(3,5,t[e.field])," ")}}function ml(e,t){if(1&e&&(r.Tb(0),r.Kc(1,hl,2,5,"td",56),r.Kc(2,gl,2,5,"td",57),r.Kc(3,bl,4,11,"td",56),r.Kc(4,pl,4,9,"td",57),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type),r.Eb(1),r.oc("ngIf","date"==e.type),r.Eb(1),r.oc("ngIf","round"==e.type)}}function fl(e,t){if(1&e&&(r.Vb(0,"tr",55),r.Kc(1,ml,5,4,"ng-container",50),r.Ub()),2&e){const e=t.$implicit,o=t.columns,i=r.gc();r.oc("pSelectableRow",e)("pSelectableRowIndex",i.rowIndex),r.Eb(1),r.oc("ngForOf",o)}}function yl(e,t){if(1&e&&(r.Vb(0,"div",60),r.Vb(1,"p"),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}const Cl=function(){return{standalone:!0}},vl=o("+yMW");let Al=(()=>{class e{constructor(e,t,o,i,l,a,n,r){this.ayaraAccountSummaryReportService=e,this.confirmationService=t,this.formBuilder=o,this.notificationService=i,this._uploadService=l,this.commonSharedService=a,this.rmanLookupsVService=n,this.rmanFiscalPeriodsService=r,this.ayaraAccountSummaryReport=new Sl,this.ayaraAccountSummaryReportSearch=new Sl,this.isSerached=0,this.displayCustomersInterfaceDialog=!1,this.paginationOptions={},this.searchFields={},this.collapsed=!0,this.noData=vl.noData,this.isSelectAllChecked=!0,this.showPaginator=!0,this.showAddColumns=!0,this.groupByList=[],this.exportCols=[],this.disableExport=!0,this.searched=0,this.dealArrangementNumbers=[],this.currentPeriod={},this.hideColumnMenu=!0,this.showFilter=!1,this.paginationOptions={pageNumber:0,pageSize:"10"},this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"ACCT_SUMMARY_GROUP"}).then(e=>{this.groupByList=e.content,this.prepareGroupByObject()}),this.rmanFiscalPeriodsService.getCurrentfiscalperiod().then(e=>{this.currentPeriod=e})}ngOnInit(){this.globalCols=[{field:"postedFlag",header:"Posted Flag",showField:!0,drag:!1,display:"table-cell",type:"text"},{field:"groupId",header:"Group ID",showField:!0,drag:!1,display:"table-cell",type:"text"},{field:"entityName",header:"Entity Name",showField:!0,drag:!1,display:"table-cell",type:"text"},{field:"assetNumber",header:"Asset Number",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"periodName",header:"Period Name",showField:!0,drag:!1,display:"table-cell",type:"number"},{field:"currencyCode",header:"Currency Code",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"account",header:"Account",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"accountDescription",header:"Account Description",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"enteredDebitAmount",header:"Entered Debit Amount",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"enteredCreditAmount",header:"Entered Credit Amount",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"converetedDebitAmount",header:"Converted Debit Amount",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"converetedCreditAmount",header:"Converted Credit Amount",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"segment1",header:"Company",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment2",header:"Region",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment3",header:"Department",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment4",header:"Account",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment5",header:"Project",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment6",header:"Revenue Category",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment7",header:"Product Family",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment8",header:"Product Line",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment9",header:"Customer Type",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment10",header:"Future1",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"segment11",header:"Future2",showField:!0,drag:!0,display:"table-cell",type:"text"}],this.columns=[],this.getTableColumns("ayaraAccountSummaryReport","AyaraAccountSummaryReport")}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("ayaraAccountSummaryReport","AyaraAccountSummaryReport",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}getAllAyaraAccountSummaryReport(){this.loading=!0,this.ayaraAccountSummaryReportService.getAllayaraAccountSummaryReport(this.paginationOptions,this.searchFields,this.exportCols).then(e=>{this.loading=!1,this.datasource=e.content,this.ayaraAccountSummaryReportList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.displaySearchDialog=!1,this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}getAyaraAccountSummaryReport(e){this.loading=!0,this.paginationOptions={pageNumber:e.first/e.rows,pageSize:this.pageSize,sortField:e.sortField,sortOrder:e.sortOrder},this.ayaraAccountSummaryReportService.getAllayaraAccountSummaryReport(this.paginationOptions,this.searchFields,this.exportCols).then(e=>{this.loading=!1,this.datasource=e.content,this.ayaraAccountSummaryReportList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}exportExcel(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].field);let e=this.ayaraAccountSummaryReportService.getServiceUrl(this.paginationOptions,this.searchFields,1,this.exportCols);window.location.href=e}onBeforeToggle(e){this.collapsed=e.collapsed}reset(e){this.paginationOptions={},this.ayaraAccountSummaryReport=new Sl,this.searchFields={},e.reset(),this.searched=0}onRowSelect(e){}prepareGroupByObject(){let e=[{label:vl.dropDownOptions.selectGroupBy,value:null}];this.groupByList.forEach(t=>{e.push({label:t.lookupDescription,value:t.lookupCode})}),this.groupBy=e}toggleColumnMenu(){this.hideColumnMenu=!this.hideColumnMenu}toggleFilterBox(){this.showFilter=!this.showFilter}showDialogToSearch(){this.searchFields={},this.displaySearchDialog=!0,0==this.isSerached&&(this.searchFields.startDate=new Date(this.currentPeriod.startDate),this.searchFields.endDate=new Date(this.currentPeriod.endDate))}searchRCList(e){this.ayaraAccountSummaryReportService.fetchRCNumbers(e.query).then(e=>{this.dealArrangementNumbers=e.map(e=>e)}).catch(e=>{this.dealArrangementNumbers=[]})}search(){this.paginationOptions={},this.displaySearchDialog=!1,this.getAllAyaraAccountSummaryReport(),this.searched=1}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Hi),r.Pb(f.a),r.Pb(v.c),r.Pb(a.a),r.Pb(ji.a),r.Pb(l.a),r.Pb(ve.a),r.Pb(p.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraAccountSummaryReport-data"]],features:[r.Db([Hi,f.a,ve.a,p.a])],decls:28,vars:24,consts:[[1,"content-section","implementation"],["header","Account Summary Report",3,"toggleable","onBeforeToggle"],["class","pull-right icons-list",4,"ngIf"],[1,"x-scroll"],["id","ayaraAccountSummaryReport-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","columns","resizableColumns","onRowSelect","onLazyLoad"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Search","width","auto","showEffect","fade",3,"visible","draggable","modal","blockScroll","visibleChange"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"selectSpan"],["showAnim","slideDown","inputStyleClass","textbox","name","fromPeriod","id","fromPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","From Period",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],[1,"ui-g-6","pull-right"],["showAnim","slideDown","name","toPeriod","inputStyleClass","textbox","id","toPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","To Period",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","button","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["header","Confirmation","icon","fa fa-question-circle","width","425"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],[4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["class","number","pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["pResizableColumn","",3,"ngStyle","title"],["pResizableColumn","",1,"number",3,"ngStyle","title"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"title","ngStyle",4,"ngIf"],["class","number",3,"title","ngStyle",4,"ngIf"],[3,"title","ngStyle"],[1,"number",3,"title","ngStyle"],[1,"no-results-data"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Vb(1,"p-panel",1),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(2,"p-header"),r.Kc(3,ll,10,2,"div",2),r.Ub(),r.Vb(4,"div",3),r.Vb(5,"p-table",4,5),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)}))("onLazyLoad",(function(e){return t.getAyaraAccountSummaryReport(e)})),r.Kc(7,nl,2,1,"ng-template",6),r.Kc(8,ul,2,1,"ng-template",7),r.Kc(9,fl,2,3,"ng-template",8),r.Kc(10,yl,3,1,"ng-template",9),r.Ub(),r.Ub(),r.Ub(),r.Vb(11,"p-dialog",10),r.dc("visibleChange",(function(e){return t.displaySearchDialog=e})),r.Vb(12,"form"),r.Vb(13,"div",11),r.Vb(14,"div",12),r.Vb(15,"div",13),r.Vb(16,"span",14),r.Mc(17,"From Period"),r.Ub(),r.Vb(18,"p-calendar",15),r.dc("ngModelChange",(function(e){return t.searchFields.startDate=e})),r.Ub(),r.Ub(),r.Vb(19,"div",16),r.Vb(20,"span",14),r.Mc(21,"To Period"),r.Ub(),r.Vb(22,"p-calendar",17),r.dc("ngModelChange",(function(e){return t.searchFields.endDate=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(23,"p-footer"),r.Vb(24,"div",18),r.Vb(25,"button",19),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(26,"button",20),r.dc("click",(function(){return t.displaySearchDialog=!1})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Qb(27,"p-confirmDialog",21)),2&e&&(r.Eb(1),r.oc("toggleable",!1),r.Eb(2),r.oc("ngIf",t.collapsed),r.Eb(2),r.oc("loading",t.loading)("value",t.ayaraAccountSummaryReportList)("lazy",!0)("paginator",!0)("rows",t.pageSize)("totalRecords",t.totalElements)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("visible",t.displaySearchDialog)("draggable",!0)("modal",!0)("blockScroll",!0),r.Eb(7),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(22,Cl))("ngModel",t.searchFields.startDate),r.Eb(4),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(23,Cl))("ngModel",t.searchFields.endDate))},directives:[m.a,f.c,s.o,y.j,f.f,C.a,v.v,v.l,v.m,S.a,v.k,v.n,f.b,R.b,Gi.a,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i],pipes:[s.f,w.a],encapsulation:2}),e})();class Sl{constructor(e,t,o,i,l,a,n,r,s,c,d,u,h,g,b,p,m,f,y,C,v,A,S,M,R,V,U,w){this.dealArrangementNumber=e,this.salesContract=t,this.orderNumber=o,this.orderLineNumber=i,this.orderLineId=l,this.t4cFlag=a,this.t4cFrequency=n,this.assetId=r,this.assetNumber=s,this.periodName=c,this.currencyCode=d,this.account=u,this.accountDescription=h,this.enteredDebitAmount=g,this.enteredCreditAmount=b,this.converetedDebitAmount=p,this.converetedCreditAmount=m,this.segment1=f,this.segment2=y,this.segment3=C,this.segment4=v,this.segment5=A,this.segment6=S,this.segment7=M,this.segment8=R,this.segment9=V,this.segment10=U,this.segment11=w}}const Ml=o("+yMW");let Rl=(()=>{class e{constructor(e){this.http=e}getAyaraUnbilledARLTDeferredReport(e,t,o,i){return null==e&&(e=""),null==t&&(t=""),null==o&&(o=""),null==i&&(i=""),this.http.get(Ml.apiUrl+"/unbilledARLTDefererdReport?customerNumber="+e+"&rcNumber="+t+"&orderNumber="+o+"&orderLineNumber="+i).toPromise().then(e=>e)}getAyaraUnbilledARLTDeferredReportFile(e,t,o,i,l){null==e&&(e=""),null==t&&(t=""),null==o&&(o=""),null==i&&(i="");let a=Ml.apiUrl+"/exportUnbilledARLTDefererdReport?customerNumber="+e+"&rcNumber="+t+"&orderNumber="+o+"&orderLineNumber="+i;return null!=l&&""!=l&&(a=a+"&exportCols="+encodeURIComponent(l)),a}fetchRCNumbers(e){return this.http.get(Ml.apiUrl+"/fetchAllRC?rc="+e).toPromise().then(e=>e)}getParameterValues(e,t){return this.http.get(Ml.apiUrl+`/fetchFilterValues?parameterName=${e}&parameterValue=${t}`)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();function Vl(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",52),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",53),r.Vb(3,"input",54),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const Ul=function(){return{color:"grey"}};function wl(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",55),r.Vb(2,"div"),r.Vb(3,"input",56),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",57),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,Ul)),r.Eb(1),r.Nc(e.header)}}function Dl(e,t){if(1&e&&(r.Kc(0,Vl,6,3,"div",51),r.Kc(1,wl,6,6,"div",51)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const Nl=function(){return{width:"100%",height:"100%"}};function Fl(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",40),r.Vb(1,"div",41),r.Vb(2,"div",42),r.Vb(3,"input",43),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",44),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",45),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",46),r.Kc(9,Dl,2,2,"ng-template",47),r.Ub(),r.Ub(),r.Vb(10,"div",48),r.Vb(11,"a",49),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",50),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,Nl)),r.oc("options",e.globalCols)}}function xl(e,t){1&e&&r.Qb(0,"col")}function El(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,xl,1,0,"col",58),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const Tl=function(e,t){return{display:e,"text-align":t}};function kl(e,t){if(1&e&&(r.Vb(0,"th",60),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.oc("ngStyle",r.tc(2,Tl,e.display,e.text)),r.Eb(1),r.Oc(" ",e.header," ")}}function Ll(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,kl,2,5,"th",59),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function Pl(e,t){if(1&e&&(r.Vb(0,"td",63),r.Vb(1,"span",64),r.Mc(2),r.hc(3,"number"),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc();r.oc("ngStyle",r.tc(6,Tl,e.display,e.text)),r.Eb(1),r.pc("title",o[e.field]),r.Eb(1),r.Nc("number"==i.fieldType(o[e.field])?r.jc(3,3,o[e.field],"1.2-2"):o[e.field])}}function Ol(e,t){if(1&e&&(r.Vb(0,"tr",61),r.Kc(1,Pl,4,9,"td",62),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function Il(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",65),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=r.gc();r.Eb(2),r.Nc(e.noData)}}const Bl=function(){return{standalone:!0}},zl=o("+yMW");let Ql=(()=>{class e{constructor(e,t,o,i,l){this.ayaraUnbilledARLTDeferredReportService=e,this.location=t,this.commonSharedService=o,this.notificationService=i,this.rmanCustomersService=l,this.columns=[],this.fiscalPeriodsList=[],this.fromPeriodArray=[],this.customers=[],this.selectedCustomer={},this.noData=zl.noData,this.collapsed=!1,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.customerNames=[],this.customerNumbers=[],this.dealArrangementNumbers=[],this.currentDate=new Date,this.globalCols=[],this.getAllAyaraUnbilledARLTDeferredReport(),this.paginationOptions={pageNumber:0,pageSize:"10000"}}ngOnInit(){this.rowCount=20}getTableColumns(e,t){this.isSelectAllChecked=!0;const o=["Jan-","Feb-","Mar-","Apr-","May-","Jun-","Jul-","Aug-","Sep-","Oct-","Nov-","Dec-","Future"];this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)||1==this.checkIfStringStartsWith(t.field,o)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}checkIfStringStartsWith(e,t){return t.some(t=>e.startsWith(t))}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&0==this.checkIfStringStartsWith(o.field,["Jan-","Feb-","Mar-","Apr-","May-","Jun-","Jul-","Aug-","Sep-","Oct-","Nov-","Dec-","Future"])&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("ayaraUnbilledARLTDeferredReport","WaterFall Details Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while saving"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}goToOperationReports(){this.location.back()}onBeforeToggle(e){this.collapsed=e.collapsed}paginate(e){this.loading=!0,this.unbilledARLTRepList=this.unbilledARLTList.slice(e.first,e.first+10),this.loading=!1}onRowSelect(e){}getAllAyaraUnbilledARLTDeferredReport(){this.globalCols=[],this.loading=!0,this.customerNumber=this.selectedCustomer.customerNumber,this.ayaraUnbilledARLTDeferredReportService.getAyaraUnbilledARLTDeferredReport(this.customerNumber,this.rcNumber,this.orderNumber,this.orderLineNumber).then(e=>{this.unbilledARLTRepList=e.Content,this.unbilledARLTList=e.Content;let t=this.unbilledARLTRepList[0];for(let i in t)this.globalCols.push({field:i,header:i,style:{width:"100px","text-align":"right"},display:"table-cell",showField:!0,text:"right",drag:!0});let o=["Customer","Revenue Contract","Deal Line Number","SD Flag","Proof Posted","Period"];for(let i=0;i<this.globalCols.length;i++)this.globalCols[i].text=-1==o.indexOf(this.globalCols[i].header)?"right":"left";this.totalRecords=e.Content.length,this.loading=!1,this.columns=[],this.getTableColumns("ayaraUnbilledARLTDeferredReport","Unbilled AR LT Deferred Report"),this.disableExport=!1}).catch(e=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}showDialogToSearch(){this.customerNumber="",this.rcNumber="",this.orderNumber="",this.orderLineNumber="",this.displayDialog=!0,this.selectedCustomer={}}exportCSVfile(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].header.replace(/[#$/()]/g,""));let e=this.ayaraUnbilledARLTDeferredReportService.getAyaraUnbilledARLTDeferredReportFile(this.customerNumber,this.rcNumber,this.orderNumber,this.orderLineNumber,this.exportCols);window.location.href=e}search(){this.getAllAyaraUnbilledARLTDeferredReport(),this.displayDialog=!1}searchCustomerNames(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerName:e.query},!0).then(e=>{this.customers=e.content}).catch(e=>{this.customers=[]})}searchCustomerNumbers(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerNumber:e.query},!1).then(e=>{this.customerNumbers=e.content.map(e=>e.customerNumber)}).catch(e=>{this.customerNumbers=[]})}reset(e){this.customerNumber="",this.rcNumber="",this.selectedCustomer={},this.getAllAyaraUnbilledARLTDeferredReport(),this.displayDialog=!1}fieldType(e){return typeof e}isDateField(e){return-1!=e.search("Date")}searchRCList(e){this.ayaraUnbilledARLTDeferredReportService.fetchRCNumbers(e.query).then(e=>{this.dealArrangementNumbers=e.map(e=>e)}).catch(e=>{this.dealArrangementNumbers=[]})}searchValues(e,t){this.ayaraUnbilledARLTDeferredReportService.getParameterValues(e,t.query).subscribe(e=>this.valueResults=e)}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(Rl),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a),r.Pb(h.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraUnbilledARLTDeferredReport-data"]],features:[r.Db([Rl,h.a])],decls:62,vars:38,consts:[[1,"content-section","implementation"],[1,"card-wrapper","waterfall-detail-report"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","LT Deferred & Unbilled AR Reclass",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll","mb-2"],["id","unbilleARLT-dt","columnResizeMode","expand","scrollable","true",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","exportFilename","paginator","rows","columns","resizableColumns"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Search","width","800","showEffect","fade",3,"visible","closable","draggable","modal"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"selectSpan"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Name Type atleast 3 Characters","id","from","field","customerName",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],[1,"ui-g-6","pull-right"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Revenue Contract Number Type atleast 3 Characters","id","from",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["pInputText","","name","customerNumber","id","customerNumber","placeholder","Customer Number",1,"textbox",3,"ngModelOptions","ngModel","disabled","ngModelChange"],[1,"md-inputfield"],["appendTo","body","placeholder","Type Order Number Value","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],["appendTo","body","placeholder","Type Order Line Number Value","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"click"],["type","reset","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["style","width:100px","pResizableColumn","",3,"ngStyle",4,"ngFor","ngForOf"],["pResizableColumn","",2,"width","100px",3,"ngStyle"],[3,"pSelectableRow"],["style","width:100px",3,"ngStyle",4,"ngFor","ngForOf"],[2,"width","100px",3,"ngStyle"],[3,"title"],[1,"no-data"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(13,"em",10),r.Mc(14,"Columns"),r.Ub(),r.Vb(15,"a",11),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(16,"em",12),r.Ub(),r.Vb(17,"a",13),r.dc("click",(function(){r.Dc(e);const o=r.Bc(24);return t.reset(o)})),r.Qb(18,"em",14),r.Ub(),r.Vb(19,"a",15),r.dc("click",(function(){return r.Dc(e),r.Bc(24).exportCSV()})),r.Qb(20,"em",16),r.Ub(),r.Kc(21,Fl,15,5,"div",17),r.Ub(),r.Ub(),r.Vb(22,"div",18),r.Vb(23,"p-table",19,20),r.hc(25,"date"),r.Kc(26,El,2,1,"ng-template",21),r.Kc(27,Ll,2,1,"ng-template",22),r.Kc(28,Ol,2,2,"ng-template",23),r.Kc(29,Il,3,1,"ng-template",24),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(30,"p-dialog",25),r.Vb(31,"form"),r.Vb(32,"div",26),r.Vb(33,"div",27),r.Vb(34,"div",28),r.Vb(35,"span",29),r.Mc(36,"Customer Name"),r.Ub(),r.Vb(37,"p-autoComplete",30),r.dc("completeMethod",(function(e){return t.searchCustomerNames(e)}))("ngModelChange",(function(e){return t.selectedCustomer=e})),r.Ub(),r.Ub(),r.Vb(38,"div",31),r.Vb(39,"span",29),r.Mc(40,"Revenue Contract Number"),r.Ub(),r.Vb(41,"p-autoComplete",32),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.rcNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(42,"div",27),r.Vb(43,"div",28),r.Vb(44,"span",29),r.Mc(45," Customer Number"),r.Ub(),r.Vb(46,"input",33),r.dc("ngModelChange",(function(e){return t.selectedCustomer.customerNumber=e})),r.Ub(),r.Ub(),r.Vb(47,"div",31),r.Vb(48,"span",34),r.Vb(49,"span",29),r.Mc(50,"Order Number"),r.Ub(),r.Vb(51,"p-autoComplete",35),r.dc("ngModelChange",(function(e){return t.orderNumber=e}))("completeMethod",(function(e){return t.searchValues("ORDER_NUMBER",e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(52,"div",27),r.Vb(53,"div",28),r.Vb(54,"span",34),r.Vb(55,"span",29),r.Mc(56,"Order Line Number"),r.Ub(),r.Vb(57,"p-autoComplete",36),r.dc("ngModelChange",(function(e){return t.orderLineNumber=e}))("completeMethod",(function(e){return t.searchValues("ORDER_LINE_NUMBER",e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(58,"p-footer"),r.Vb(59,"div",37),r.Vb(60,"button",38),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(61,"button",39),r.dc("click",(function(){r.Dc(e);const o=r.Bc(24);return t.reset(o)})),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(15),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.qc("exportFilename","Unbilled_AR_Report_",r.jc(25,30,t.currentDate,"yyyyMMddhhmmss"),""),r.oc("loading",t.loading)("value",t.unbilledARLTRepList)("paginator",!0)("rows",10)("columns",t.columns)("resizableColumns",!0),r.Eb(7),r.oc("visible",t.displayDialog)("closable",!1)("draggable",!0)("modal",!0),r.Eb(7),r.oc("suggestions",t.customers)("minLength",3)("ngModelOptions",r.rc(33,Bl))("ngModel",t.selectedCustomer),r.Eb(4),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(34,Bl))("ngModel",t.rcNumber),r.Eb(5),r.oc("ngModelOptions",r.rc(35,Bl))("ngModel",t.selectedCustomer.customerNumber)("disabled",!0),r.Eb(5),r.oc("ngModel",t.orderNumber)("suggestions",t.valueResults)("ngModelOptions",r.rc(36,Bl)),r.Eb(6),r.oc("ngModel",t.orderLineNumber)("suggestions",t.valueResults)("ngModelOptions",r.rc(37,Bl)))},directives:[m.a,f.c,s.o,y.j,f.f,C.a,v.v,v.l,v.m,A.a,v.k,v.n,v.b,M.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i],pipes:[s.f,s.g],encapsulation:2}),e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();var $l=o("5WLJ");const Kl=o("+yMW");new n.f({"Content-Type":"application/json"});let _l=(()=>{class e{constructor(e,t){this.http=e,this.datePipe=t}getServiceUrl(e,t,o,i){let l=Kl.apiUrl+"/ayaraBillingSchedulesReportVExport?";0==i&&(l=Kl.apiUrl+"/ayaraBillingSchedulesReportVSearch?");let a="";return null!=t.dealArrangementId&&""!=t.dealArrangementId&&(a=a+"dealArrangementId:"+t.dealArrangementId+","),null!=t.sfUsageSummaryNumber&&""!=t.sfUsageSummaryNumber&&(a=a+"sfUsageSummaryNumber:"+t.sfUsageSummaryNumber+","),null!=t.quoteNumber&&""!=t.quoteNumber&&(a=a+"quoteNumber:"+t.quoteNumber+","),null!=t.quoteLineNumber&&""!=t.quoteLineNumber&&(a=a+"quoteLineNumber:"+t.quoteLineNumber+","),null!=t.orderNumber&&""!=t.orderNumber&&(a=a+"orderNumber:"+t.orderNumber+","),null!=t.orderLineNumber&&""!=t.orderLineNumber&&(a=a+"orderLineNumber:"+t.orderLineNumber+","),null!=t.fromPeriod&&null!=t.fromPeriod&&(a=a+"summaryStartDate>"+this.datePipe.transform(t.fromPeriod,"yyyyMMdd")+","),null!=t.toPeriod&&null!=t.toPeriod&&(a=a+"summaryEndDate<"+this.datePipe.transform(t.toPeriod,"yyyyMMdd")+","),null!=t.customerName&&null!=t.customerName&&(a=a+"customerName:"+t.customerName+","),null!=t.customerNumber&&null!=t.customerNumber&&(a=a+"customerNumber:"+t.customerNumber+","),null!=t.assetId&&null!=t.assetId&&(a=a+"assetId:"+t.assetId+","),null!=t.salesContract&&null!=t.salesContract&&(a=a+"salesContract:"+t.salesContract+","),""==a?l+="search=%25":l=l+"search="+a,null==e.pageNumber||""==e.pageNumber||isNaN(e.pageNumber)||(l=l+"&page="+e.pageNumber+"&size="+e.pageSize),null!=o&&""!=o&&(l=l+"&exportCols="+o),l}getAllAyaraBillingSchedulesReport(e,t,o){let i=this.getServiceUrl(e,t,o,0);return this.http.get(i).toPromise().then(e=>e)}fetchRCNumbers(e){return this.http.get(Kl.apiUrl+"/fetchAllRC?rc="+e).toPromise().then(e=>e)}getParameterValues(e,t){return this.http.get(Kl.apiUrl+`/fetchFilterValues?parameterName=${e}&parameterValue=${t}`)}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(n.b),r.Zb(s.f))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),e})();function ql(e,t){if(1&e){const e=r.Wb();r.Vb(0,"a",46),r.dc("click",(function(){return r.Dc(e),r.gc().exportExcel()})),r.Qb(1,"em",47),r.Ub()}}function Wl(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",60),r.dc("onDragStart",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDragStart(t)}))("onDrop",(function(){r.Dc(e);const t=r.gc().index;return r.gc(2).onDrop(t)})),r.Vb(2,"div",61),r.Vb(3,"input",62),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label"),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField),r.Eb(2),r.Nc(e.header)}}const jl=function(){return{color:"grey"}};function Jl(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div"),r.Vb(1,"div",63),r.Vb(2,"div"),r.Vb(3,"input",64),r.dc("ngModelChange",(function(t){return r.Dc(e),r.gc().$implicit.showField=t}))("change",(function(){r.Dc(e);const t=r.gc().$implicit;return r.gc(2).selectColumns(t)})),r.Ub(),r.Vb(4,"label",65),r.Mc(5),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc().$implicit;r.Eb(3),r.oc("checked",e.showField)("ngModel",e.showField)("disabled",!e.drag),r.Eb(1),r.oc("ngStyle",r.rc(5,jl)),r.Eb(1),r.Nc(e.header)}}function Hl(e,t){if(1&e&&(r.Kc(0,Wl,6,3,"div",59),r.Kc(1,Jl,6,6,"div",59)),2&e){const e=t.$implicit;r.oc("ngIf",e.drag),r.Eb(1),r.oc("ngIf",!e.drag)}}const Gl=function(){return{width:"100%",height:"100%"}};function Yl(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",48),r.Vb(1,"div",49),r.Vb(2,"div",50),r.Vb(3,"input",51),r.dc("click",(function(){return r.Dc(e),r.gc().onSelectAll()})),r.Ub(),r.Vb(4,"label",52),r.Mc(5,"Select All"),r.Ub(),r.Vb(6,"a",53),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(7,"\xd7"),r.Ub(),r.Vb(8,"p-listbox",54),r.Kc(9,Hl,2,2,"ng-template",55),r.Ub(),r.Ub(),r.Vb(10,"div",56),r.Vb(11,"a",57),r.dc("click",(function(){return r.Dc(e),r.gc().saveColumns()})),r.Mc(12,"Save"),r.Ub(),r.Vb(13,"a",58),r.dc("click",(function(t){return r.Dc(e),r.gc().closeConfigureColumns(t)})),r.Mc(14,"Cancel"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("checked",e.isSelectAllChecked),r.Eb(5),r.Ic(r.rc(4,Gl)),r.oc("options",e.globalCols)}}function Zl(e,t){1&e&&r.Qb(0,"col")}function Xl(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,Zl,1,0,"col",66),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}const ea=function(e){return{display:e}};function ta(e,t){if(1&e&&(r.Vb(0,"th",69),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,ea,e.display)),r.Eb(1),r.Nc(e.header)}}function oa(e,t){if(1&e&&(r.Vb(0,"th",70),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit;r.pc("title",e.header),r.oc("ngStyle",r.sc(3,ea,e.display)),r.Eb(1),r.Nc(e.header)}}function ia(e,t){if(1&e&&(r.Tb(0),r.Kc(1,ta,2,5,"th",67),r.Kc(2,oa,2,5,"th",68),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type||"date"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type||"round"==e.type||"link"==e.type)}}function la(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,ia,3,2,"ng-container",66),r.Ub()),2&e){const e=r.gc();r.Eb(1),r.oc("ngForOf",e.columns)}}function aa(e,t){if(1&e&&(r.Vb(0,"td",74),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,ea,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function na(e,t){if(1&e&&(r.Vb(0,"td",75),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",t[e.field]),r.oc("ngStyle",r.sc(3,ea,e.display)),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function ra(e,t){if(1&e&&(r.Vb(0,"td",74),r.hc(1,"date"),r.Mc(2),r.hc(3,"date"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.jc(1,3,t[e.field],"MM/dd/yyyy")),r.oc("ngStyle",r.sc(9,ea,e.display)),r.Eb(2),r.Oc(" ",r.jc(3,6,t[e.field],"MM/dd/yyyy")," ")}}function sa(e,t){if(1&e&&(r.Vb(0,"td",75),r.hc(1,"round"),r.Mc(2),r.hc(3,"round"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.pc("title",r.ic(1,3,t[e.field])),r.oc("ngStyle",r.sc(7,ea,e.display)),r.Eb(2),r.Oc(" ",r.ic(3,5,t[e.field])," ")}}function ca(e,t){if(1&e&&(r.Tb(0),r.Kc(1,aa,2,5,"td",72),r.Kc(2,na,2,5,"td",73),r.Kc(3,ra,4,11,"td",72),r.Kc(4,sa,4,9,"td",73),r.Sb()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngIf","text"==e.type),r.Eb(1),r.oc("ngIf","number"==e.type),r.Eb(1),r.oc("ngIf","date"==e.type),r.Eb(1),r.oc("ngIf","round"==e.type)}}function da(e,t){if(1&e&&(r.Vb(0,"tr",71),r.Kc(1,ca,5,4,"ng-container",66),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.oc("pSelectableRow",e),r.Eb(1),r.oc("ngForOf",o.columns)}}function ua(e,t){if(1&e&&(r.Vb(0,"tr"),r.Vb(1,"td",76),r.Mc(2),r.Ub(),r.Ub()),2&e){const e=t.$implicit,o=r.gc();r.Eb(1),r.Fb("colspan",e.length),r.Eb(1),r.Nc(o.noData)}}const ha=function(){return{standalone:!0}},ga=o("+yMW");let ba=(()=>{class e{constructor(e,t,o,i,l,a,n){this.route=e,this.ayaraBillingSchedulesReportService=t,this.location=o,this.commonSharedService=i,this.notificationService=l,this.rmanCustomersService=a,this.rmanFiscalPeriodsService=n,this.loading=!0,this.ayaraBillingSchedulesReport={},this.ayaraBillingSchedulesReportSearch={},this.isSerached=0,this.ayaraBillingSchedulesReportList=[],this.paginationOptions={},this.collapsed=!0,this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.noData=ga.noData,this.disableExport=!0,this.selectedCustomer={},this.customers=[],this.rmanCustomers=new $l.b,this.customerNames=[],this.customerNumbers=[],this.dealArrangementNumbers=[],this.currentPeriod={},this.hideColumnMenu=!0,this.showFilter=!1,this.paginationOptions={pageNumber:0,pageSize:"10000"},this.rmanFiscalPeriodsService.getCurrentfiscalperiod().then(e=>{this.currentPeriod=e})}ngOnInit(){this.route.params.subscribe(e=>{this.arrId=e.id}),this.globalCols=[{field:"sfUsageSummaryNumber",header:"Usage Number",showField:!0,display:"table-cell",type:"text",drag:!1},{field:"orderNumber",header:"Order Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"orderLineNumber",header:"Order Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealArrangementId",header:"Revenue Contract Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"salesContract",header:"Sales Contract Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"dealLineNumber",header:"Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productName",header:"Product Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"feeAmount",header:"Fee Amount",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"subTotal",header:"Sub Total",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"cumulativeSubTotal",header:"Cumulative Usage Total",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"bsDescription",header:"BS Description",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"summaryStartDate",header:"Usage Start Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"summaryEndDate",header:"Usage End Date",showField:!0,display:"table-cell",type:"date",drag:!0},{field:"assetId",header:"Asset ID",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"assetNumber",header:"Asset Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productFamily",header:"Product Family",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productLine",header:"Product Line",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"customerName",header:"Customer Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"customerNumber",header:"Customer Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"legacy",header:"Legacy",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"chargeType",header:"Charge Type",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"revenuePolicy",header:"Revenue Policy",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"opsRevenueName",header:"OpsRevenue Name",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"productCode",header:"Product Code",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"sourceProductId",header:"Product Case Safe Id",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"usageSyncPeriod",header:"Period (Sync period)",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"beginBalance",header:"Revenue Beginning Balance",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"currentBalance",header:"Revenue Current Balance",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"endingBalance",header:"Revenue Ending Balance",showField:!0,display:"table-cell",type:"round",drag:!0},{field:"primaryLineNumber",header:"Primary Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"itemSequenceNumber",header:"Item Sequence Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"quoteNumber",header:"Quote Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"quoteLineNumber",header:"Quote Line Number",showField:!0,display:"table-cell",type:"text",drag:!0},{field:"opportunityNum",header:"Opportunity Number",showField:!0,display:"table-cell",type:"text",drag:!0}],this.columns=[],this.getTableColumns("ayaraBillingSchedulesReport","Ayara Billing Schedules Report")}goToOperationReports(){this.location.back()}reset(e){this.paginationOptions={},this.ayaraBillingSchedulesReport={},this.ayaraBillingSchedulesReportSearch={},this.isSerached=0,e.reset()}getTableColumns(e,t){this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(e,t).then(e=>{if(e&&null!=e&&e.userId){this.columns=[];let t=e.tableColumns.split(",");t.length>0&&t.forEach((e,t)=>{e&&(this.startIndex=this.globalCols.findIndex(t=>t.field==e),this.onDrop(t))}),this.globalCols.forEach(t=>{-1!==e.tableColumns.indexOf(t.field)?this.columns.push(t):t.showField=!1}),this.columns.length!=this.globalCols.length&&(this.isSelectAllChecked=!1),this.showPaginator=0!==this.columns.length,this.userId=e.userId}else this.columns=this.globalCols}).catch(()=>{this.notificationService.showError("Error occured while getting table columns data"),this.loading=!1})}saveColumns(){let e="";this.showAddColumns=!this.showAddColumns;const t=this.globalCols.length-1;this.globalCols.forEach((o,i)=>{o.showField&&(e+=o.field,i<t&&(e+=","))}),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("ayaraBillingSchedulesReport","Ayara Billing Schedules Report",e,this.userId).then(e=>{this.columns=this.globalCols.filter(e=>e.showField),this.userId=e.userId,this.showPaginator=0!==this.columns.length,this.loading=!1}).catch(()=>{this.notificationService.showError("Error occured while getting data"),this.loading=!1})}onDragStart(e){this.startIndex=e}onDrop(e){const t=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(e,0,t)}selectColumns(e){let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}onSelectAll(){this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach(e=>{this.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)})}onConfiguringColumns(e){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}closeConfigureColumns(e){this.showAddColumns=!0,this.globalCols=this.clonedCols;let t=this.globalCols.filter(e=>!e.showField);this.isSelectAllChecked=!(t.length>0)}getAllAyaraBillingSchedulesReport(){this.loading=!0,this.ayaraBillingSchedulesReportService.getAllAyaraBillingSchedulesReport(this.paginationOptions,this.ayaraBillingSchedulesReport,this.exportCols).then(e=>{this.loading=!1,this.datasource=e.content,this.ayaraBillingSchedulesReportList=e.content,this.ayaraBillingSchedulesReportList=this.ayaraBillingSchedulesReportList.slice(),this.totalElements=e.totalElements,this.pageSize=e.size,this.displaySearchDialog=!1,this.disableExport=!1})}getAyaraBillingSchedulesReport(e){this.loading=!0,this.paginationOptions={pageNumber:e.first/e.rows,pageSize:this.pageSize,sortField:e.sortField,sortOrder:e.sortOrder},this.ayaraBillingSchedulesReportService.getAllAyaraBillingSchedulesReport(this.paginationOptions,this.ayaraBillingSchedulesReport,this.exportCols).then(e=>{this.loading=!1,this.datasource=e.content,this.ayaraBillingSchedulesReportList=e.content,this.totalElements=e.totalElements,this.pageSize=e.size,this.disableExport=!1})}exportExcel(){this.exportCols=[];for(let t=0;t<this.columns.length;t++)this.columns[t].showField&&this.exportCols.push(this.columns[t].field);let e=this.ayaraBillingSchedulesReportService.getServiceUrl(this.paginationOptions,this.ayaraBillingSchedulesReportSearch,this.exportCols,1);window.location.href=e}onRowSelect(e){}toggleColumnMenu(){this.hideColumnMenu=!this.hideColumnMenu}toggleFilterBox(){this.showFilter=!this.showFilter}showDialogToSearch(){this.ayaraBillingSchedulesReportSearch={},this.displaySearchDialog=!0,this.selectedCustomer={}}searchCustomerNames(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerName:e.query},!0).then(e=>{this.customers=e.content,this.customers.forEach(e=>e.label=e.customerName+" "+e.customerNumber)}).catch(e=>{this.customers=[]})}searchCustomerNumbers(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerNumber:e.query},!1).then(e=>{this.customerNumbers=e.content.map(e=>e.customerNumber)}).catch(e=>{this.customerNumbers=[]})}searchRCList(e){this.ayaraBillingSchedulesReportService.fetchRCNumbers(e.query).then(e=>{this.dealArrangementNumbers=e.map(e=>e)}).catch(e=>{this.dealArrangementNumbers=[]})}search(){this.isSerached=1,this.selectedCustomer&&(this.ayaraBillingSchedulesReportSearch.customerNumber=this.selectedCustomer.customerNumber),this.ayaraBillingSchedulesReport=this.ayaraBillingSchedulesReportSearch,this.displaySearchDialog=!1,this.paginationOptions={},this.getAllAyaraBillingSchedulesReport()}onBeforeToggle(e){this.collapsed=e.collapsed}searchValues(e,t){this.ayaraBillingSchedulesReportService.getParameterValues(e,t.query).subscribe(e=>this.valueResults=e)}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(i.a),r.Pb(_l),r.Pb(s.k),r.Pb(l.a),r.Pb(a.a),r.Pb(h.a),r.Pb(p.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["ayaraBillingSchedulesReport-data"]],inputs:{arrId:"arrId"},features:[r.Db([_l,h.a,p.a])],decls:99,vars:67,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block"],["header","Billing Schedules Report",3,"toggleable","onBeforeToggle"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],[1,"fa","fa-cog"],["title","Search",3,"click"],[1,"fa","fa-search"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll"],["id","billingSchedule-dt","selectionMode","single","scrollable","true","columnResizeMode","expand",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","paginator","lazy","rows","totalRecords","columns","resizableColumns","onRowSelect","onLazyLoad"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Search","width","800","showEffect","fade",3,"visible","draggable","modal","visibleChange"],[3,"ngSubmit"],[1,"ui-grid","ui-grid-responsive","ui-fluid"],[1,"ui-g-12"],[1,"ui-g-6"],[1,"md-inputfield"],[1,"selectSpan"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","RC Number Type atleast 3 Characters","id","from",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],[1,"ui-g-6","pull-right"],["placeholder","Type Usage Number Value atleast 3 Characters","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],["showAnim","slideDown","inputStyleClass","textbox","name","fromPeriod","id","fromPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","Usage Start Date From",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],["showAnim","slideDown","name","toPeriod","inputStyleClass","textbox","id","toPeriod","yearRange","1950:2030","appendTo","body","dateFormat","yy-mm-dd","placeholder","Usage End Date To",3,"monthNavigator","yearNavigator","ngModelOptions","ngModel","ngModelChange"],["placeholder","Type Quote Number Value atleast 3 Characters","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],["placeholder","Type Quote Line Number Value atleast 3 Characters","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],["placeholder","Type Order Number Value atleast 3 Characters","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Name Type atleast 3 Characters","id","from","field","label",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["inputStyleClass","textbox","styleClass","wid100","appendTo","body","placeholder","Customer Number Type atleast 3 Characters","id","customerNumber",3,"suggestions","minLength","ngModelOptions","ngModel","completeMethod","ngModelChange"],["placeholder","Type Sales Contract Value atleast 3 Characters","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],["placeholder","Type Asset ID Value atleast 3 Characters","minLength","3",3,"ngModel","suggestions","ngModelOptions","ngModelChange","completeMethod"],[1,"ui-dialog-buttonpane","ui-widget-content","ui-helper-clearfix","pull-right"],["type","button","pButton","","label","Search",1,"primary-btn",3,"click"],["type","button","pButton","","label","Cancel",1,"secondary-btn",3,"click"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["class","number","pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["pResizableColumn","",3,"ngStyle","title"],["pResizableColumn","",1,"number",3,"ngStyle","title"],[3,"pSelectableRow"],[3,"title","ngStyle",4,"ngIf"],["class","number",3,"title","ngStyle",4,"ngIf"],[3,"title","ngStyle"],[1,"number",3,"title","ngStyle"],[1,"no-data"]],template:function(e,t){if(1&e){const e=r.Wb();r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"p-panel",6),r.dc("onBeforeToggle",(function(e){return t.onBeforeToggle(e)})),r.Vb(7,"p-header"),r.Vb(8,"div",7),r.Vb(9,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(10,"em",9),r.Mc(11,"Back"),r.Ub(),r.Vb(12,"a",8),r.dc("click",(function(e){return t.onConfiguringColumns(e)})),r.Qb(13,"em",10),r.Mc(14,"Columns"),r.Ub(),r.Vb(15,"a",11),r.dc("click",(function(){return t.showDialogToSearch()})),r.Qb(16,"em",12),r.Ub(),r.Vb(17,"a",13),r.dc("click",(function(){r.Dc(e);const o=r.Bc(23);return t.reset(o)})),r.Qb(18,"em",14),r.Ub(),r.Kc(19,ql,2,0,"a",15),r.Kc(20,Yl,15,5,"div",16),r.Ub(),r.Ub(),r.Vb(21,"div",17),r.Vb(22,"p-table",18,19),r.dc("onRowSelect",(function(e){return t.onRowSelect(e)}))("onLazyLoad",(function(e){return t.getAyaraBillingSchedulesReport(e)})),r.Kc(24,Xl,2,1,"ng-template",20),r.Kc(25,la,2,1,"ng-template",21),r.Kc(26,da,2,2,"ng-template",22),r.Kc(27,ua,3,2,"ng-template",23),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(28,"p-dialog",24),r.dc("visibleChange",(function(e){return t.displaySearchDialog=e})),r.Vb(29,"form",25),r.dc("ngSubmit",(function(){return t.search()})),r.Vb(30,"div",26),r.Vb(31,"div",27),r.Vb(32,"div",28),r.Vb(33,"span",29),r.Vb(34,"span",30),r.Mc(35,"Revenue Contract"),r.Ub(),r.Vb(36,"p-autoComplete",31),r.dc("completeMethod",(function(e){return t.searchRCList(e)}))("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.dealArrangementId=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(37,"div",32),r.Vb(38,"span",29),r.Vb(39,"span",30),r.Mc(40,"Usage Number"),r.Ub(),r.Vb(41,"p-autoComplete",33),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.sfUsageSummaryNumber=e}))("completeMethod",(function(e){return t.searchValues("USAGE_NUMBER",e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(42,"div",27),r.Vb(43,"div",28),r.Vb(44,"span",30),r.Mc(45,"Usage Start Date From"),r.Ub(),r.Vb(46,"p-calendar",34),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.fromPeriod=e})),r.Ub(),r.Ub(),r.Vb(47,"div",32),r.Vb(48,"span",30),r.Mc(49,"Usage End Date To"),r.Ub(),r.Vb(50,"p-calendar",35),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.toPeriod=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(51,"div",27),r.Vb(52,"div",28),r.Vb(53,"span",29),r.Vb(54,"span",30),r.Mc(55,"Quote Number"),r.Ub(),r.Vb(56,"p-autoComplete",36),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.quoteNumber=e}))("completeMethod",(function(e){return t.searchValues("QUOTE_NUMBER",e)})),r.Ub(),r.Ub(),r.Ub(),r.Vb(57,"div",32),r.Vb(58,"span",29),r.Vb(59,"span",30),r.Mc(60,"Quote Line Number"),r.Ub(),r.Vb(61,"p-autoComplete",37),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.quoteLineNumber=e}))("completeMethod",(function(e){return t.searchValues("QUOTE_LINE_NUMBER",e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(62,"div",27),r.Vb(63,"div",28),r.Vb(64,"span",29),r.Vb(65,"span",30),r.Mc(66,"Order Number"),r.Ub(),r.Vb(67,"p-autoComplete",38),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.orderNumber=e}))("completeMethod",(function(e){return t.searchValues("ORDER_NUMBER",e)})),r.Ub(),r.Ub(),r.Ub(),r.Vb(68,"div",32),r.Vb(69,"span",29),r.Vb(70,"span",30),r.Mc(71,"Order Line Number"),r.Ub(),r.Vb(72,"p-autoComplete",38),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.orderLineNumber=e}))("completeMethod",(function(e){return t.searchValues("ORDER_LINE_NUMBER",e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(73,"div",27),r.Vb(74,"div",28),r.Vb(75,"span",29),r.Vb(76,"span",30),r.Mc(77,"Customer Name"),r.Ub(),r.Vb(78,"p-autoComplete",39),r.dc("completeMethod",(function(e){return t.searchCustomerNames(e)}))("ngModelChange",(function(e){return t.selectedCustomer=e})),r.Ub(),r.Ub(),r.Ub(),r.Vb(79,"div",32),r.Vb(80,"span",29),r.Vb(81,"span",30),r.Mc(82,"Customer Number"),r.Ub(),r.Vb(83,"p-autoComplete",40),r.dc("completeMethod",(function(e){return t.searchCustomerNumbers(e)}))("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.customerNumber=e})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(84,"div",27),r.Vb(85,"div",28),r.Vb(86,"span",29),r.Vb(87,"span",30),r.Mc(88,"Sales Contract Number"),r.Ub(),r.Vb(89,"p-autoComplete",41),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.salesContract=e}))("completeMethod",(function(e){return t.searchValues("SALES_CONTRACT",e)})),r.Ub(),r.Ub(),r.Ub(),r.Vb(90,"div",32),r.Vb(91,"span",29),r.Vb(92,"span",30),r.Mc(93,"Asset ID"),r.Ub(),r.Vb(94,"p-autoComplete",42),r.dc("ngModelChange",(function(e){return t.ayaraBillingSchedulesReportSearch.assetId=e}))("completeMethod",(function(e){return t.searchValues("ASSET_ID",e)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(95,"p-footer"),r.Vb(96,"div",43),r.Vb(97,"button",44),r.dc("click",(function(){return t.search()})),r.Ub(),r.Vb(98,"button",45),r.dc("click",(function(){return t.displaySearchDialog=!1})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()}2&e&&(r.Eb(6),r.oc("toggleable",!1),r.Eb(13),r.oc("ngIf",!t.disableExport),r.Eb(1),r.oc("ngIf",!t.showAddColumns),r.Eb(2),r.oc("loading",t.loading)("value",t.ayaraBillingSchedulesReportList)("paginator",t.showPaginator)("lazy",!0)("rows",t.pageSize)("totalRecords",t.totalElements)("columns",t.columns)("resizableColumns",!0),r.Eb(6),r.oc("visible",t.displaySearchDialog)("draggable",!0)("modal",!0),r.Eb(8),r.oc("suggestions",t.dealArrangementNumbers)("minLength",3)("ngModelOptions",r.rc(55,ha))("ngModel",t.ayaraBillingSchedulesReportSearch.dealArrangementId),r.Eb(5),r.oc("ngModel",t.ayaraBillingSchedulesReportSearch.sfUsageSummaryNumber)("suggestions",t.valueResults)("ngModelOptions",r.rc(56,ha)),r.Eb(5),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(57,ha))("ngModel",t.ayaraBillingSchedulesReportSearch.fromPeriod),r.Eb(4),r.oc("monthNavigator",!0)("yearNavigator",!0)("ngModelOptions",r.rc(58,ha))("ngModel",t.ayaraBillingSchedulesReportSearch.toPeriod),r.Eb(6),r.oc("ngModel",t.ayaraBillingSchedulesReportSearch.quoteNumber)("suggestions",t.valueResults)("ngModelOptions",r.rc(59,ha)),r.Eb(5),r.oc("ngModel",t.ayaraBillingSchedulesReportSearch.quoteLineNumber)("suggestions",t.valueResults)("ngModelOptions",r.rc(60,ha)),r.Eb(6),r.oc("ngModel",t.ayaraBillingSchedulesReportSearch.orderNumber)("suggestions",t.valueResults)("ngModelOptions",r.rc(61,ha)),r.Eb(5),r.oc("ngModel",t.ayaraBillingSchedulesReportSearch.orderLineNumber)("suggestions",t.valueResults)("ngModelOptions",r.rc(62,ha)),r.Eb(6),r.oc("suggestions",t.customers)("minLength",3)("ngModelOptions",r.rc(63,ha))("ngModel",t.selectedCustomer),r.Eb(5),r.oc("suggestions",t.customerNumbers)("minLength",3)("ngModelOptions",r.rc(64,ha))("ngModel",t.ayaraBillingSchedulesReportSearch.customerNumber),r.Eb(6),r.oc("ngModel",t.ayaraBillingSchedulesReportSearch.salesContract)("suggestions",t.valueResults)("ngModelOptions",r.rc(65,ha)),r.Eb(5),r.oc("ngModel",t.ayaraBillingSchedulesReportSearch.assetId)("suggestions",t.valueResults)("ngModelOptions",r.rc(66,ha)))},directives:[m.a,f.c,s.o,y.j,f.f,C.a,v.v,v.l,v.m,A.a,v.k,v.n,S.a,f.b,R.b,V.a,U.b,U.c,v.a,s.p,s.n,y.g,y.i],pipes:[s.f,w.a],encapsulation:2}),e})();var pa=o("uJHa"),ma=o("NHOW");function fa(e,t){1&e&&(r.Vb(0,"span",43),r.Mc(1,"*"),r.Ub())}function ya(e,t){if(1&e&&(r.Vb(0,"div",44),r.Mc(1),r.Ub()),2&e){const e=r.gc(2);r.Eb(1),r.Oc(" ",e.formErrors.recordType," ")}}function Ca(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",18),r.Vb(1,"form",19),r.dc("ngSubmit",(function(){return r.Dc(e),r.gc().applyFilters(0)})),r.Vb(2,"div",20),r.Vb(3,"label",21),r.Mc(4,"Log Summary"),r.Ub(),r.Vb(5,"div",22),r.dc("click",(function(){return r.Dc(e),r.gc().toggleFilterType()})),r.Qb(6,"div"),r.Ub(),r.Vb(7,"label",21),r.Mc(8,"Log Details"),r.Ub(),r.Ub(),r.Vb(9,"div",23),r.Vb(10,"div",24),r.Vb(11,"label",25),r.Mc(12,"User Name"),r.Ub(),r.Vb(13,"p-autoComplete",26),r.dc("completeMethod",(function(t){return r.Dc(e),r.gc().searchUserValues(t)})),r.Ub(),r.Ub(),r.Vb(14,"div",24),r.Vb(15,"label",27),r.Mc(16,"Record Type"),r.Kc(17,fa,2,0,"span",28),r.Ub(),r.Qb(18,"p-dropdown",29),r.Kc(19,ya,2,1,"div",30),r.Ub(),r.Vb(20,"div",24),r.Vb(21,"label",31),r.Mc(22,"Source System"),r.Ub(),r.Qb(23,"p-dropdown",32),r.Ub(),r.Vb(24,"div",24),r.Vb(25,"label",33),r.Mc(26,"Start Date"),r.Ub(),r.Vb(27,"p-calendar",34),r.dc("onSelect",(function(){return r.Dc(e),r.gc().setMinDate()})),r.Ub(),r.Ub(),r.Vb(28,"div",24),r.Vb(29,"label",35),r.Mc(30,"End Date"),r.Ub(),r.Vb(31,"p-calendar",36),r.dc("onSelect",(function(){return r.Dc(e),r.gc().setMaxDate()})),r.Ub(),r.Ub(),r.Vb(32,"div",24),r.Vb(33,"label",37),r.Mc(34,"Exception Event"),r.Ub(),r.Qb(35,"p-dropdown",38),r.Ub(),r.Ub(),r.Vb(36,"div",39),r.Vb(37,"div",40),r.Qb(38,"button",41),r.Vb(39,"button",42),r.dc("click",(function(){return r.Dc(e),r.gc().refreshTable(0)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(1),r.oc("formGroup",e.filters),r.Eb(5),r.Gb(e.logDetails?"inner logDetails":"inner"),r.Eb(7),r.oc("suggestions",e.userValueResults),r.Eb(4),r.oc("ngIf",e.logDetails),r.Eb(1),r.oc("options",e.recordTypes)("filter",!0),r.Eb(1),r.oc("ngIf",e.formErrors.recordType||e.logDetails&&""==e.filters.value.recordType),r.Eb(4),r.oc("options",e.sourceSystemDropdown)("filter",!0),r.Eb(4),r.oc("monthNavigator",!0)("yearNavigator",!0)("showIcon",!1)("maxDate",e.maxDate),r.Eb(4),r.oc("monthNavigator",!0)("yearNavigator",!0)("showIcon",!1)("minDate",e.minDate),r.Eb(4),r.oc("options",e.exceptionEvents)("filter",!0),r.Eb(3),r.oc("disabled",e.filters.invalid)}}function va(e,t){1&e&&r.Qb(0,"em",45)}function Aa(e,t){1&e&&r.Qb(0,"em",46)}function Sa(e,t){if(1&e&&(r.Vb(0,"th"),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.Nc(e.header)}}function Ma(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Sa,2,1,"th",50),r.Ub()),2&e){const e=r.gc(2);r.Eb(1),r.oc("ngForOf",e.columns)}}function Ra(e,t){if(1&e&&(r.Vb(0,"span",52),r.hc(1,"date"),r.Mc(2),r.hc(3,"date"),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.oc("title",r.jc(1,2,t[e.field],"yyyy-MM-dd HH:mm:ss")),r.Eb(2),r.Oc(" ",r.jc(3,5,t[e.field],"yyyy-MM-dd HH:mm:ss")," ")}}function Va(e,t){if(1&e&&(r.Vb(0,"span",52),r.Mc(1),r.Ub()),2&e){const e=r.gc().$implicit,t=r.gc().$implicit;r.oc("title",t[e.field]),r.Eb(1),r.Oc(" ",t[e.field]," ")}}function Ua(e,t){if(1&e&&(r.Vb(0,"td"),r.Kc(1,Ra,4,8,"span",51),r.Kc(2,Va,2,2,"span",51),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit,i=r.gc(2);r.Eb(1),r.oc("ngIf",i.isDate(o[e.field])),r.Eb(1),r.oc("ngIf",!i.isDate(o[e.field]))}}function wa(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Ua,3,2,"td",50),r.Ub()),2&e){const e=r.gc(2);r.Eb(1),r.oc("ngForOf",e.columns)}}const Da=function(){return[10,20]};function Na(e,t){if(1&e){const e=r.Wb();r.Vb(0,"p-table",47),r.dc("firstChange",(function(t){return r.Dc(e),r.gc().paginationOptions.first=t}))("onPage",(function(t){return r.Dc(e),r.gc().onPageChange(t)})),r.Kc(1,Ma,2,1,"ng-template",48),r.Kc(2,wa,2,1,"ng-template",49),r.Ub()}if(2&e){const e=r.gc();r.oc("value",e.filteredData)("paginator",null!=e.filteredData||null!=e.filteredData)("first",e.paginationOptions.first)("lazy",!0)("rows",e.pageSize)("totalRecords",e.totalElements)("resizableColumns",!0)("rowsPerPageOptions",r.rc(8,Da))}}function Fa(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",19),r.Vb(1,"h2"),r.Mc(2,"Search Filters"),r.Ub(),r.Vb(3,"form",20),r.dc("ngSubmit",(function(){return r.Dc(e),r.gc().applyFilters(0)})),r.Vb(4,"div",21),r.Vb(5,"div",22),r.Vb(6,"label",23),r.Mc(7,"Period"),r.Ub(),r.Vb(8,"p-autoComplete",24),r.dc("completeMethod",(function(t){return r.Dc(e),r.gc().getRmanFiscalPeriods(t)})),r.Ub(),r.Ub(),r.Vb(9,"div",22),r.Vb(10,"label",25),r.Mc(11,"Customer Name"),r.Ub(),r.Vb(12,"p-autoComplete",26),r.dc("completeMethod",(function(t){return r.Dc(e),r.gc().searchCustomerNames(t)})),r.Ub(),r.Ub(),r.Vb(13,"div",22),r.Vb(14,"label",27),r.Mc(15,"Legal Entity"),r.Ub(),r.Vb(16,"p-autoComplete",28),r.dc("completeMethod",(function(t){return r.Dc(e),r.gc().getRmanLegalEntities(t)})),r.Ub(),r.Ub(),r.Vb(17,"div",22),r.Vb(18,"label",29),r.Mc(19,"Order ID"),r.Ub(),r.Qb(20,"input",30),r.Ub(),r.Vb(21,"div",22),r.Vb(22,"label",31),r.Mc(23,"Order Line ID"),r.Ub(),r.Qb(24,"input",32),r.Ub(),r.Ub(),r.Vb(25,"div",33),r.Vb(26,"div",34),r.Qb(27,"button",35),r.Vb(28,"button",36),r.dc("click",(function(){return r.Dc(e),r.gc().refreshTable(0)})),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.gc();r.Eb(3),r.oc("formGroup",e.filters),r.Eb(5),r.oc("suggestions",e.fiscalPeriodNamesList)("minLength",3),r.Eb(4),r.oc("suggestions",e.customerNames)("minLength",3),r.Eb(4),r.oc("suggestions",e.LegalEntityNamesList)("minLength",3),r.Eb(11),r.oc("disabled",e.filters.invalid)}}function xa(e,t){1&e&&r.Qb(0,"em",37)}function Ea(e,t){1&e&&r.Qb(0,"em",38)}function Ta(e,t){1&e&&r.Qb(0,"col"),2&e&&r.Jc("width",t.$implicit.width||150,"px")}function ka(e,t){if(1&e&&(r.Vb(0,"colgroup"),r.Kc(1,Ta,1,2,"col",43),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}function La(e,t){if(1&e&&(r.Vb(0,"th",45),r.Mc(1),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.Oc(" ",e.header," ")}}function Pa(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,La,2,1,"th",44),r.Ub()),2&e){const e=t.$implicit;r.Eb(1),r.oc("ngForOf",e)}}function Oa(e,t){if(1&e&&(r.Vb(0,"td",47),r.Mc(1),r.Ub()),2&e){const e=t.$implicit,o=r.gc().$implicit;r.pc("title",o[e.field]),r.Eb(1),r.Oc(" ",o[e.field]," ")}}function Ia(e,t){if(1&e&&(r.Vb(0,"tr"),r.Kc(1,Oa,2,2,"td",46),r.Ub()),2&e){const e=t.columns;r.Eb(1),r.oc("ngForOf",e)}}function Ba(e,t){if(1&e){const e=r.Wb();r.Vb(0,"p-table",39),r.dc("firstChange",(function(t){return r.Dc(e),r.gc().paginationOptions.first=t}))("onPage",(function(t){return r.Dc(e),r.gc().onPageChange(t)})),r.Kc(1,ka,2,1,"ng-template",40),r.Kc(2,Pa,2,1,"ng-template",41),r.Kc(3,Ia,2,1,"ng-template",42),r.Ub()}if(2&e){const e=r.gc();r.oc("value",e.filteredData)("columns",e.columns)("paginator",!0)("first",e.paginationOptions.first)("rows",e.pageSize)("totalRecords",e.totalElements)("lazy",!0)("resizableColumns",!0)("scrollable",!0)}}const za=[{path:"",component:Wt},{path:"rmanArrgSummaryRep",component:Z},{path:"rmanTrxDetailReport",component:Pt},{path:"rmanArrgWaterfallReportV",component:Ce},{path:"rmanDeferredRollForwardRep",component:We},{path:"rmanGlAccountingV",component:Je.a},{path:"ayaraForecastActualRep",component:st},{path:"rmanArrgForecastingDetailReport",component:jt.a},{path:"ayaraActiveQuotesARMReport",component:So},{path:"ayaraActualsARMReport",component:_o},{path:"ayaraActualsVsActiveReport",component:Ci},{path:"ayaraActiveDealsARMReport",component:qi},{path:"ayaraAccountSummaryReport",component:Al},{path:"unbilledARLTDeferredReport",component:Ql},{path:"ayaraBillingSchedulesReport",component:ba},{path:"exceptionsReport",component:(()=>{class e{constructor(e,t,o,i,l,a,n){this.formBuilder=e,this.reportsService=t,this.rmanUsersService=o,this.loadingService=i,this.location=l,this.cd=a,this.rmanLookupsVService=n,this.logDetails=!1,this.showPaginator=!0,this.columns=[],this.displayAdvancedSearch=!0,this.filteredUserList=[],this.tableVisible=!1,this.exceptionEvents=["Modified","Reprocessed","Deleted"].map(e=>({label:e,value:e.toLowerCase()})),this.recordTypes=[],this.sourceSystemDropdown=[],this.userValueResults=[],this.usernames=[],this.data=[],this.noDataFoundMessage="",this.maxDate=new Date,this.formErrors={userName:"",recordType:"",startDate:"",endDate:"",exceptionEvent:""},this.validationMessages={recordType:{required:"Record Type is required"}},this.paginationOptions={pageNumber:0,pageSize:10,first:0},this.filters=this.formBuilder.group({userName:[""],recordType:[""],startDate:[""],endDate:[""],sourceSystem:[""],exceptionEvent:[""]}),this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"ARRG_SOURCE"}).then(e=>{this.sourceSystemDropdown=e.content.map(e=>({label:e.lookupCode,value:e.lookupCode}))}),this.rmanLookupsVService.getAllRmanLookupsV(this.paginationOptions,{lookupTypeName:"DOCUMENT_CATEGORY"}).then(e=>{this.recordTypes=e.content.map(e=>({label:e.lookupDescription,value:e.lookupCode,tag:Number(e.tag)})).sort((e,t)=>e.tag-t.tag)}),this.filters.valueChanges.subscribe(e=>this.onValueChanged(e)),this.onValueChanged(),this.getAllUsers()}goToOperationReports(){this.location.back()}getAllUsers(){this.rmanUsersService.getAllRmanUsers(this.paginationOptions,{},!0).then(e=>{this.totalRmanUsersList=e.content;for(let t of e.content)this.usernames.push(t.userName)}).catch(e=>{})}ngOnInit(){this.onValueChanged(),this.noDataFoundMessage=""}onValueChanged(e){if(!this.filters)return;const t=this.filters;for(const o in this.formErrors){this.formErrors[o]="";const e=t.get(o);if(e&&e.dirty&&!e.valid){const t=this.validationMessages[o];for(const i in e.errors)this.formErrors[o]+=t[i]+" "}}}setMinDate(){this.minDate=this.filters.value.startDate}setMaxDate(){this.maxDate=this.filters.value.endDate}toggleFilterType(){this.logDetails=!this.logDetails;const e=this.filters.get("recordType");this.logDetails?null==e||e.setValidators([v.t.required]):null==e||e.clearValidators(),null==e||e.updateValueAndValidity(),this.onValueChanged()}applyFilters(e){if(!this.logDetails||this.filters.value.recordType&&""!==this.filters.value.recordType){if(this.filters.value.filterType=this.logDetails?"logDetails":"logSummary",this.loadingService.setLoading(!0),null!=this.filters.value.startDate&&""!==this.filters.value.startDate){let e=this.filters.value.startDate;e instanceof Date||(e=new Date(e)),isNaN(e.getTime())||(e.setHours(0,0,0,0),this.filters.value.startDate=e.toISOString())}if(null!=this.filters.value.endDate&&""!==this.filters.value.endDate){let e=this.filters.value.endDate;e instanceof Date||(e=new Date(e)),isNaN(e.getTime())||(e.setHours(23,59,59,999),this.filters.value.endDate=e.toISOString())}0==e&&(this.paginationOptions={pageNumber:0,pageSize:10,first:0}),this.reportsService.filterExceptionReports(this.paginationOptions,this.filters.value).then(e=>{e&&"success"===e.status?(this.tableVisible=!1,this.filteredData=[],this.data=[],this.totalElements=e.count,this.pageSize=this.paginationOptions.pageSize||10,e.data.length>0&&(this.columns=e.columns.map(e=>({field:e,header:this.formatHeader(e)})),this.filteredData=e.data.map(e=>this.transformDates(e)),this.data=e.allData.map(e=>this.transformDates(e)),this.tableVisible=!0,this.noDataFoundMessage="",this.cd.detectChanges()),0==e.data.length&&(this.noDataFoundMessage="No Data Found")):console.error("Failed to fetch data"),this.loadingService.setLoading(!1)}).catch(e=>{console.error("Error fetching data:",e),this.loadingService.setLoading(!1)})}}formatHeader(e){const t={exceptionId:"Exception ID",recordType:"Exception Record Type",lastModified:"Modified Timestamp",sourceSystem:"Source System",lastUpdatedBy:"Modified By",exceptionEvent:"Exception Event","Attribute 13":"Asset ID","Attribute 14":"Asset Number"};return t[e]?t[e]:e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}isDate(e){return e instanceof Date&&!isNaN(e.getTime())}transformDates(e){return["createdDate","lastModified"].forEach(t=>{const o=e[t];Array.isArray(o)?e[t]=this.convertArrayToDate(o):("number"==typeof o||"string"==typeof o)&&(e[t]=new Date(o))}),e}convertArrayToDate(e){return!Array.isArray(e)||e.length<6?null:new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5],Math.floor(e[6]/1e6))}exportExcel(){this.reportsService.downloadCsv(this.data).subscribe(e=>{const t=new Blob([e],{type:"text/csv;charset=utf-8"}),o=window.URL.createObjectURL(t),i=document.createElement("a");i.href=o,i.download="exceptions_report.csv",i.click(),window.URL.revokeObjectURL(o)})}onClickAdvanceSearch(){this.displayAdvancedSearch=!this.displayAdvancedSearch}refreshTable(e){const t={};Object.keys(this.filters.controls).forEach(e=>{t[e]=this.logDetails&&"recordType"===e?this.filters.value[e]:""}),this.filters.setValue(t),1==e&&this.applyFilters(0),0===e&&(this.minDate=void 0,this.maxDate=new Date)}onPageChange(e){this.paginationOptions.pageNumber=e.first/e.rows,this.paginationOptions.pageSize=e.rows,this.paginationOptions.first=e.first,this.applyFilters(1)}searchUserValues(e){const t=e.query.toLowerCase();this.userValueResults=this.usernames.filter(e=>e.toLowerCase().includes(t))}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(v.c),r.Pb(Bt.a),r.Pb(ma.a),r.Pb(pa.a),r.Pb(s.k),r.Pb(r.i),r.Pb(ve.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-exceptions-report"]],decls:25,vars:5,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["class","card-block",4,"ngIf"],[1,"card-block",2,"display","flex","flex-direction","column"],[1,"pull-right","icons-list",2,"align-self","flex-end"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],["class","fa fa-search",4,"ngIf"],["class","fa fa-times",4,"ngIf"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click"],[1,"fa","fa-external-link"],[1,"no-data-found-message"],["class","ui-datatable arrangementMgrTbl",3,"value","paginator","first","lazy","rows","totalRecords","resizableColumns","rowsPerPageOptions","firstChange","onPage",4,"ngIf"],[1,"card-block"],[3,"formGroup","ngSubmit"],[1,"toggler","search_panel"],[2,"font-weight","bold"],[1,"outer",3,"click"],[1,"form-grid"],[1,"form-group"],["for","userName",1,"form-label"],["formControlName","userName","appendTo","body","placeholder","User Name","minLength","3",1,"filter-form",3,"suggestions","completeMethod"],["for","recordType",1,"form-label"],["style","color: red;",4,"ngIf"],["formControlName","recordType","placeholder","Select Record Type","appendTo","body",1,"filter-form",3,"options","filter"],["class","ui-message ui-messages-error ui-corner-all",4,"ngIf"],["for","sourceSystem",1,"form-label"],["formControlName","sourceSystem","placeholder","Select Source System","appendTo","body",1,"filter-form",3,"options","filter"],["for","startDate",1,"form-label"],["formControlName","startDate","placeholder","Select Start Date","yearRange","2000:2100","appendTo","body","dateFormat","yy-mm-dd",1,"prosp-calendar","filter-form",3,"monthNavigator","yearNavigator","showIcon","maxDate","onSelect"],["for","endDate",1,"form-label"],["formControlName","endDate","placeholder","Select End Date","yearRange","2000:2100","appendTo","body","dateFormat","yy-mm-dd",1,"prosp-calendar","filter-form",3,"monthNavigator","yearNavigator","showIcon","minDate","onSelect"],["for","exceptionEvent",1,"form-label"],["formControlName","exceptionEvent","placeholder","Select Exception Event","appendTo","body",1,"filter-form",3,"options","filter"],[1,"row","d-content"],[1,"text-right"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"disabled"],["type","reset","pButton","","label","Reset",1,"secondary-btn",3,"click"],[2,"color","red"],[1,"ui-message","ui-messages-error","ui-corner-all"],[1,"fa","fa-search"],[1,"fa","fa-times"],[1,"ui-datatable","arrangementMgrTbl",3,"value","paginator","first","lazy","rows","totalRecords","resizableColumns","rowsPerPageOptions","firstChange","onPage"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[3,"title",4,"ngIf"],[3,"title"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Kc(5,Ca,40,21,"div",5),r.Ub(),r.Vb(6,"div",4),r.Vb(7,"div",6),r.Vb(8,"h2"),r.Mc(9," Exception and Record History Log "),r.Ub(),r.Vb(10,"div",7),r.Vb(11,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(12,"em",9),r.Mc(13,"Back"),r.Ub(),r.Vb(14,"a",8),r.dc("click",(function(){return t.onClickAdvanceSearch()})),r.Kc(15,va,1,0,"em",10),r.Kc(16,Aa,1,0,"em",11),r.Mc(17," Advanced Search "),r.Ub(),r.Vb(18,"a",12),r.dc("click",(function(){return t.refreshTable(1)})),r.Qb(19,"em",13),r.Ub(),r.Vb(20,"a",14),r.dc("click",(function(){return t.exportExcel()})),r.Qb(21,"em",15),r.Ub(),r.Ub(),r.Vb(22,"div",16),r.Mc(23),r.Ub(),r.Kc(24,Na,3,9,"p-table",17),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.Eb(5),r.oc("ngIf",t.displayAdvancedSearch),r.Eb(10),r.oc("ngIf",!t.displayAdvancedSearch),r.Eb(1),r.oc("ngIf",t.displayAdvancedSearch),r.Eb(7),r.Nc(t.noDataFoundMessage),r.Eb(1),r.oc("ngIf",t.tableVisible))},directives:[s.o,v.v,v.l,v.g,A.a,v.k,v.e,oe.a,S.a,R.b,y.j,f.f,s.n],pipes:[s.f],styles:[".filter-form[_ngcontent-%COMP%]{width:100%!important;margin:6px 0!important;box-sizing:border-box}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.form-label[_ngcontent-%COMP%]{margin-left:6px!important;color:#262d74!important;font-weight:600!important}.error-message[_ngcontent-%COMP%]{color:red;font-size:.9em;margin-top:2px}input.p-inputtext[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], p-autoComplete[_ngcontent-%COMP%], p-calendar[_ngcontent-%COMP%], p-dropdown[_ngcontent-%COMP%]{width:100%!important;box-sizing:border-box!important;display:block;font-size:14px;font-family:inherit}.p-autoComplete[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]{width:100%!important;padding:.5rem!important;font-size:14px;box-sizing:border-box!important;min-height:38px;border-radius:4px;border:1px solid #ccc}p-autoComplete[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]:focus{border-color:#262d74;outline:none;box-shadow:0 0 0 .1rem rgba(38,45,116,.25)}.outer[_ngcontent-%COMP%]{width:45px;height:20px;background-color:#262d74;position:relative;display:flex;align-items:center;padding:3px;box-shadow:inset 0 0 5px #bdbdbd;margin:0 15px}.inner[_ngcontent-%COMP%], .outer[_ngcontent-%COMP%]{border-radius:10px}.inner[_ngcontent-%COMP%]{width:15px;height:15px;background-color:#fff;position:absolute;transition:transform .15s linear}.logDetails[_ngcontent-%COMP%]{transform:translateX(23px)}.toggler[_ngcontent-%COMP%]{display:flex;padding:0 10px}.no-data-found-message[_ngcontent-%COMP%]{color:#262d74;padding:3px 600px;font-weight:600}  .p-autocomplete,   .p-autocomplete-input{width:100%!important}"]}),e})()},{path:"glEntriesExceptionsRep",component:(()=>{class e{constructor(e,t,o,i,l,a,n,r,s){this.formBuilder=e,this.reportsService=t,this.rmanCustomersService=o,this.rmanFiscalPeriodsService=i,this.rmanLegalEntitiesService=l,this.loadingService=a,this.location=n,this.cd=r,this.rmanLookupsVService=s,this.logDetails=!1,this.showPaginator=!0,this.columns=[],this.displayAdvancedSearch=!0,this.filteredUserList=[],this.tableVisible=!1,this.exceptionEvents=["Modified","Reprocessed","Deleted"].map(e=>({label:e,value:e.toLowerCase()})),this.recordTypes=[],this.sourceSystemDropdown=[],this.userValueResults=[],this.usernames=[],this.data=[],this.noDataFoundMessage="",this.maxDate=new Date,this.fiscalPeriodsList=[],this.fiscalPeriodNamesList=[],this.rmanLegalEntitiesList=[],this.LegalEntityNamesList=[],this.customerNames=[],this.tempFilters={},this.paginationOptions={pageNumber:0,pageSize:10,first:0},this.buildEmptyForm(),this.columns=[{field:"entryId",header:"Entry ID"},{field:"period",header:"Period"},{field:"customerName",header:"Customer"},{field:"legalEntity",header:"Legal Entity"},{field:"orderId",header:"Order ID"},{field:"orderLineId",header:"Order Line ID"},{field:"debit",header:"Debit"},{field:"credit",header:"Credit"},{field:"variance",header:"Variance"},{field:"status",header:"Status"},{field:"exceptionMessage",header:"Exception Message"}]}buildEmptyForm(){this.filters=this.formBuilder.group({period:[""],customer:[""],legalEntity:[""],orderId:[""],orderLineId:[""]})}goToOperationReports(){this.location.back()}searchCustomerNames(e){this.rmanCustomersService.getAllRmanCustomers(this.paginationOptions,{customerName:e.query},!0).then(e=>{this.customerNames=e.content.map(e=>({customerId:e.customerId,customerName:e.customerName}))}).catch(()=>{this.customerNames=[]})}getRmanFiscalPeriods(e){this.rmanFiscalPeriodsService.getAllRmanFiscalPeriods(this.paginationOptions,{periodName:e.query}).then(e=>{this.fiscalPeriodsList=e.content,this.fiscalPeriodNamesList=this.fiscalPeriodsList.map(e=>({periodName:e.periodName}))}).catch(()=>{this.fiscalPeriodsList=[],this.fiscalPeriodNamesList=[]})}getRmanLegalEntities(e){this.rmanLegalEntitiesService.getAllRmanLegalEntities(this.paginationOptions,{name:e.query},"Y").then(e=>{this.rmanLegalEntitiesList=e.content||[],this.LegalEntityNamesList=this.rmanLegalEntitiesList.map(e=>e.name)}).catch(()=>{this.rmanLegalEntitiesList=[],this.LegalEntityNamesList=[]})}ngOnInit(){this.noDataFoundMessage=""}applyFilters(e){var t,o;(null===(t=this.filters.value.customer)||void 0===t?void 0:t.customerId)&&(this.filters.value.customer=this.filters.value.customer.customerId),(null===(o=this.filters.value.period)||void 0===o?void 0:o.periodName)&&(this.filters.value.period=this.filters.value.period.periodName),0==e?(this.paginationOptions.first=0,this.tempFilters=this.filters.value):1==e&&(this.paginationOptions.first=0),this.loadingService.setLoading(!0),this.reportsService.filterGlEntryExceptionReports(this.paginationOptions,this.tempFilters).then(e=>{e?(this.tableVisible=!1,this.filteredData=[],this.data=[],this.totalElements=e.totalElements,this.paginationOptions.pageNumber=e.pageNumber||0,this.pageSize=this.paginationOptions.pageSize||10,e.content&&e.content.length>0?(this.filteredData=e.content,this.tableVisible=!0,this.noDataFoundMessage="",this.cd.detectChanges()):this.noDataFoundMessage="No Data Found"):console.error("Failed to fetch data"),this.loadingService.setLoading(!1)}).catch(e=>{console.error("Error fetching data:",e),this.loadingService.setLoading(!1)})}exportExcel(){this.reportsService.exportGlEntryExceptionsReport(this.tempFilters).subscribe(e=>{const t=new Blob([e],{type:"text/csv;charset=utf-8"}),o=window.URL.createObjectURL(t),i=document.createElement("a");i.href=o,i.download="exceptions_report.csv",i.click(),window.URL.revokeObjectURL(o)})}onClickAdvanceSearch(){this.displayAdvancedSearch=!this.displayAdvancedSearch}refreshTable(e){1==e&&this.applyFilters(1)}onPageChange(e){this.paginationOptions.pageNumber=e.first/e.rows,this.paginationOptions.pageSize=e.rows,this.paginationOptions.first=e.first,this.applyFilters(2)}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(v.c),r.Pb(Bt.a),r.Pb(h.a),r.Pb(p.a),r.Pb(b.a),r.Pb(pa.a),r.Pb(s.k),r.Pb(r.i),r.Pb(ve.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-gl-entries-exceptions-report"]],decls:26,vars:5,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["class","card-block",4,"ngIf"],[1,"card-block",2,"display","flex","flex-direction","column"],[1,"pull-right","icons-list",2,"align-self","flex-end"],[1,"add-column",3,"click"],[1,"fa","fa-reply"],["class","fa fa-search",4,"ngIf"],["class","fa fa-times",4,"ngIf"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click"],[1,"fa","fa-external-link"],[1,"no-data-found-message"],[1,"x-scroll"],["class","ui-datatable arrangementMgrTbl","columnResizeMode","expand","scrollHeight","400px",3,"value","columns","paginator","first","rows","totalRecords","lazy","resizableColumns","scrollable","firstChange","onPage",4,"ngIf"],[1,"card-block"],[3,"formGroup","ngSubmit"],[1,"form-grid"],[1,"form-group"],["for","period",1,"form-label"],["formControlName","period","appendTo","body","placeholder","Period Type atleast 3 Characters","id","period","field","periodName",1,"filter-form",3,"suggestions","minLength","completeMethod"],["for","customers",1,"form-label"],["formControlName","customer","appendTo","body","placeholder","Customer Name Type atleast 3 Characters","id","customers","field","customerName",1,"filter-form",3,"suggestions","minLength","completeMethod"],["for","LE",1,"form-label"],["formControlName","legalEntity","appendTo","body","placeholder","LegalEntity Type atleast 3 Characters","id","LE",1,"filter-form",3,"suggestions","minLength","completeMethod"],["for","orderId",1,"form-label"],["type","text","id","orderId","placeholder","Order ID","formControlName","orderId","name","orderId",1,"filter-form"],["for","orderLineId",1,"form-label"],["type","text","id","orderLineId","placeholder","Order Line ID","formControlName","orderLineId","name","orderLineId",1,"filter-form"],[1,"row","d-content"],[1,"text-right"],["type","submit","pButton","","label","Search",1,"primary-btn",3,"disabled"],["type","reset","pButton","","label","Reset",1,"secondary-btn",3,"click"],[1,"fa","fa-search"],[1,"fa","fa-times"],["columnResizeMode","expand","scrollHeight","400px",1,"ui-datatable","arrangementMgrTbl",3,"value","columns","paginator","first","rows","totalRecords","lazy","resizableColumns","scrollable","firstChange","onPage"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[3,"width",4,"ngFor","ngForOf"],["pResizableColumn","",4,"ngFor","ngForOf"],["pResizableColumn",""],[3,"title",4,"ngFor","ngForOf"],[3,"title"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Kc(5,Fa,29,8,"div",5),r.Ub(),r.Vb(6,"div",4),r.Vb(7,"div",6),r.Vb(8,"h2"),r.Mc(9," Unbalanced Accounting Entries "),r.Ub(),r.Vb(10,"div",7),r.Vb(11,"a",8),r.dc("click",(function(){return t.goToOperationReports()})),r.Qb(12,"em",9),r.Mc(13,"Back"),r.Ub(),r.Vb(14,"a",8),r.dc("click",(function(){return t.onClickAdvanceSearch()})),r.Kc(15,xa,1,0,"em",10),r.Kc(16,Ea,1,0,"em",11),r.Mc(17," Advanced Search "),r.Ub(),r.Vb(18,"a",12),r.dc("click",(function(){return t.refreshTable(1)})),r.Qb(19,"em",13),r.Ub(),r.Vb(20,"a",14),r.dc("click",(function(){return t.exportExcel()})),r.Qb(21,"em",15),r.Ub(),r.Ub(),r.Vb(22,"div",16),r.Mc(23),r.Ub(),r.Vb(24,"div",17),r.Kc(25,Ba,4,9,"p-table",18),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.Eb(5),r.oc("ngIf",t.displayAdvancedSearch),r.Eb(10),r.oc("ngIf",!t.displayAdvancedSearch),r.Eb(1),r.oc("ngIf",t.displayAdvancedSearch),r.Eb(7),r.Nc(t.noDataFoundMessage),r.Eb(2),r.oc("ngIf",t.tableVisible))},directives:[s.o,v.v,v.l,v.g,A.a,v.k,v.e,v.b,R.b,y.j,f.f,s.n,y.g],styles:[".filter-form[_ngcontent-%COMP%]{width:100%!important;margin:6px 0!important;box-sizing:border-box}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.form-label[_ngcontent-%COMP%]{margin-left:6px!important;color:#262d74!important;font-weight:600!important}.error-message[_ngcontent-%COMP%]{color:red;font-size:.9em;margin-top:2px}input.p-inputtext[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], p-autoComplete[_ngcontent-%COMP%], p-calendar[_ngcontent-%COMP%], p-dropdown[_ngcontent-%COMP%]{width:100%!important;box-sizing:border-box!important;display:block;font-size:14px;font-family:inherit}.p-autoComplete[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]{width:100%!important;padding:.5rem!important;font-size:14px;box-sizing:border-box!important;min-height:38px;border-radius:4px;border:1px solid #ccc}p-autoComplete[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]:focus{border-color:#262d74;outline:none;box-shadow:0 0 0 .1rem rgba(38,45,116,.25)}.outer[_ngcontent-%COMP%]{width:45px;height:20px;background-color:#262d74;position:relative;display:flex;align-items:center;padding:3px;box-shadow:inset 0 0 5px #bdbdbd;margin:0 15px}.inner[_ngcontent-%COMP%], .outer[_ngcontent-%COMP%]{border-radius:10px}.inner[_ngcontent-%COMP%]{width:15px;height:15px;background-color:#fff;position:absolute;transition:transform .15s linear}.logDetails[_ngcontent-%COMP%]{transform:translateX(23px)}.toggler[_ngcontent-%COMP%]{display:flex;padding:0 10px}.no-data-found-message[_ngcontent-%COMP%]{color:#262d74;padding:3px 600px;font-weight:600}  .p-autocomplete,   .p-autocomplete-input{width:100%!important}"]}),e})()}];let Qa=(()=>{class e{}return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},providers:[ve.a],imports:[[It.a,i.k.forChild(za),Yt.b,Wi.a]]}),e})()}}]);