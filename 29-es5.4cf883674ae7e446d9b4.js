!function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{D5V3:function(t,n,i){"use strict";i.r(n),i.d(n,"ApprovalHistoryModule",(function(){return E}));var r=i("tyNb"),o=i("J7oY"),s=function t(){a(this,t),this.fieldLabels={},this.fieldLabels.approvalStatus="Approval Status",this.fieldLabels.actionBy="Action By",this.fieldLabels.actionDate="Action Date",this.fieldLabels.comments="Comments"},c=i("tk/3"),l=i("fXoL"),p=i("+yMW");new c.f({"Content-Type":"application/json"});var u,b=((u=function(){function t(e){a(this,t),this.http=e}return e(t,[{key:"getServiceUrl",value:function(t,e,a){var n=p.apiUrl+"/rmanApprovalHistoryExport?";0==a&&(n=p.apiUrl+"/ayaraRcApprovalHistoryVSearch?");var i="";return null!=e.arrangementId&&""!=e.arrangementId&&(i=i+"arrangementId:"+e.arrangementId+","),null!=e.approvalStatus&&""!=e.approvalStatus&&(i=i+"approvalStatus:"+e.approvalStatus+","),null!=e.actionBy&&""!=e.actionBy&&(i=i+"actionBy:"+e.actionBy+","),null!=e.actionDate&&""!=e.actionDate&&(i=i+"actionDate:"+e.actionDate+","),null!=e.comments&&""!=e.comments&&(i=i+"comments:"+e.comments+","),""==i?n+="search=%25":n=n+"search="+i,null==t.pageNumber||""==t.pageNumber||isNaN(t.pageNumber)||0==t.pageNumber||(n=n+"&page="+t.pageNumber+"&size="+t.pageSize),n}},{key:"getAllApprovalHistory",value:function(t,e){var a=this.getServiceUrl(t,e,0);return this.http.get(a).toPromise().then((function(t){return t}))}}]),t}()).\u0275fac=function(t){return new(t||u)(l.Zb(c.b))},u.\u0275prov=l.Lb({token:u,factory:u.\u0275fac}),u),d=i("7CaW"),m=i("rEr+"),h=i("7zfz"),g=i("ofXK");function f(t,e){1&t&&(l.Vb(0,"tr"),l.Vb(1,"th"),l.Vb(2,"a"),l.Mc(3,"Approval Status"),l.Ub(),l.Ub(),l.Vb(4,"th"),l.Vb(5,"a"),l.Mc(6,"Action By"),l.Ub(),l.Ub(),l.Vb(7,"th"),l.Vb(8,"a"),l.Mc(9,"Action Date"),l.Ub(),l.Ub(),l.Vb(10,"th"),l.Vb(11,"a"),l.Mc(12,"Comments"),l.Ub(),l.Ub(),l.Ub())}function v(t,e){if(1&t&&(l.Vb(0,"tr",8),l.Vb(1,"td",9),l.Mc(2),l.Ub(),l.Vb(3,"td",9),l.Mc(4),l.Ub(),l.Vb(5,"td",9),l.hc(6,"date"),l.Mc(7),l.hc(8,"date"),l.Ub(),l.Vb(9,"td",9),l.Mc(10),l.Ub(),l.Ub()),2&t){var a=e.$implicit;l.oc("pSelectableRow",e.$implicit),l.Eb(1),l.pc("title",a.taskStatus),l.Eb(1),l.Nc(a.taskStatus),l.Eb(1),l.pc("title",a.userId),l.Eb(1),l.Nc(a.userId),l.Eb(1),l.pc("title",l.jc(6,9,a.commentDate,"dd/MM/yyyy")),l.Eb(2),l.Nc(l.jc(8,12,a.commentDate,"dd/MM/yyyy")),l.Eb(2),l.pc("title",a.userComment),l.Eb(1),l.Nc(a.userComment)}}function y(t,e){if(1&t&&(l.Vb(0,"div",10),l.Vb(1,"p"),l.Mc(2),l.Ub(),l.Ub()),2&t){var a=l.gc();l.Eb(2),l.Nc(a.noData)}}var A,S,w=i("+yMW"),H=((A=function(){function t(e,n,i,o,s){var c=this;a(this,t),this.ref=e,this.rmanApprovalHistoryService=n,this.router=i,this.route=o,this.notificationService=s,this.noData=w.noData,this.rmanApprovalHistoryList=[],this.paginationOptions={pageNumber:0,pageSize:"10000"},this.parrangementId=i.url.split("/")[3],console.log(this.parrangementId),this.router.events.subscribe((function(t){t instanceof r.c&&(c.arrIdK=t.url.split("/")[3])})),this.cref=e}return e(t,[{key:"ngAfterViewChecked",value:function(){this.cref.detectChanges()}},{key:"ngOnInit",value:function(){var t=new s;this.columns=t.fieldLabels}},{key:"reset",value:function(t){t.reset(),this.paginationOptions={},this.getAllRmanApprovalHistory()}},{key:"getAllRmanApprovalHistory",value:function(){var t=this;this.loading=!0,this.rmanApprovalHistoryService.getAllApprovalHistory(this.paginationOptions,{arrangementId:this.parrangementId}).then((function(e){t.integrateHistoryData(e)})).catch((function(e){t.notificationService.showError("Error occured while getting data"),t.loading=!1}))}},{key:"integrateHistoryData",value:function(t){this.loading=!1,this.datasource=t.content,this.rmanApprovalHistoryList=t.content,this.totalElements=t.totalElements,this.pageSize=t.size}},{key:"getRmanApprovalHistory",value:function(t){var e=this;this.paginationOptions={pageNumber:t.first/t.rows,pageSize:this.pageSize,sortField:t.sortField,sortOrder:t.sortOrder},this.loading=!0,this.rmanApprovalHistoryService.getAllApprovalHistory(this.paginationOptions,{arrangementId:this.parrangementId}).then((function(t){e.integrateHistoryData(t)})).catch((function(t){e.notificationService.showError("Error occured while getting data"),e.loading=!1}))}}]),t}()).\u0275fac=function(t){return new(t||A)(l.Pb(l.i),l.Pb(b),l.Pb(r.g),l.Pb(r.a),l.Pb(o.a))},A.\u0275cmp=l.Jb({type:A,selectors:[["rmanApprovalHistory-data"]],features:[l.Db([b])],decls:8,vars:6,consts:[[1,"content-section","implementation"],["header","Approvals History"],[1,"x-scroll"],["id","rmanApprovalHistory-dt","selectionMode","single","scrollable","true",1,"ui-datatable","arrangementMgrTbl",3,"loading","value","lazy","paginator","rows","totalRecords","onLazyLoad"],["dt",""],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"pSelectableRow"],[3,"title"],[1,"no-results-data"]],template:function(t,e){1&t&&(l.Qb(0,"div",0),l.Vb(1,"p-panel",1),l.Vb(2,"div",2),l.Vb(3,"p-table",3,4),l.dc("onLazyLoad",(function(t){return e.getRmanApprovalHistory(t)})),l.Kc(5,f,13,0,"ng-template",5),l.Kc(6,v,11,15,"ng-template",6),l.Kc(7,y,3,1,"ng-template",7),l.Ub(),l.Ub(),l.Ub()),2&t&&(l.Eb(3),l.oc("loading",e.loading)("value",e.rmanApprovalHistoryList)("lazy",!0)("paginator",!0)("rows",e.pageSize)("totalRecords",e.totalElements))},directives:[d.a,m.j,h.f,m.i],pipes:[g.f],encapsulation:2}),A),U=i("PCNd"),V=[{path:"",component:H}],E=((S=function t(){a(this,t)}).\u0275mod=l.Nb({type:S}),S.\u0275inj=l.Mb({factory:function(t){return new(t||S)},providers:[],imports:[[U.a,r.k.forChild(V)],r.k]}),S)}}])}();