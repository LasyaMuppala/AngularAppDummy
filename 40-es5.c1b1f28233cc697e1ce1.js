!function(){function n(n,r){var o="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!o){if(Array.isArray(n)||(o=function(n,r){if(!n)return;if("string"==typeof n)return e(n,r);var o=Object.prototype.toString.call(n).slice(8,-1);"Object"===o&&n.constructor&&(o=n.constructor.name);if("Map"===o||"Set"===o)return Array.from(n);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(n,r)}(n))||r&&n&&"number"==typeof n.length){o&&(n=o);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){o=o.call(n)},n:function(){var n=o.next();return s=n.done,n},e:function(n){c=!0,a=n},f:function(){try{s||null==o.return||o.return()}finally{if(c)throw a}}}}function e(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=n[r];return o}function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function o(n,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{WsTB:function(e,t,i){"use strict";i.r(t),i.d(t,"LandingDashboardModule",(function(){return q}));var a=i("ofXK"),s=i("tk/3"),c=i("3Pt+"),d=i("tyNb"),l=i("QIUk"),u=i("arFO"),b=i("vKg+"),p=i("/8oK"),h=i("8DrR"),g=i("gJyg"),f=i("1adA"),v=i("J7oY"),m=i("kzDL"),D=i("fXoL"),w=i("puOX"),U=["dataChart"],V=function(){return{standalone:!0}};function M(n,e){if(1&n){var r=D.Wb();D.Vb(0,"p-dropdown",15),D.dc("ngModelChange",(function(n){return D.Dc(r),D.gc().rmanPeriod=n}))("onChange",(function(){return D.Dc(r),D.gc().onPeriodsChange()})),D.Ub()}if(2&n){var o=D.gc();D.oc("options",o.rmanPeriods)("ngModel",o.rmanPeriod)("ngModelOptions",D.rc(4,V))("filter",!1)}}function C(n,e){if(1&n){var r=D.Wb();D.Vb(0,"p-dropdown",16),D.dc("ngModelChange",(function(n){return D.Dc(r),D.gc().rmanQuarter=n}))("onChange",(function(){return D.Dc(r),D.gc().onPeriodsChange()})),D.Ub()}if(2&n){var o=D.gc();D.oc("options",o.rmanQuarters)("ngModel",o.rmanQuarter)("ngModelOptions",D.rc(4,V))("filter",!1)}}function O(n,e){1&n&&(D.Vb(0,"h6",17),D.Mc(1,"No data found"),D.Ub())}function L(n,e){if(1&n&&(D.Vb(0,"span",18),D.Vb(1,"div",19),D.Vb(2,"div",20),D.Vb(3,"p"),D.Mc(4,"Arrangement"),D.Qb(5,"br"),D.Mc(6,"Amount(FC)"),D.Ub(),D.Vb(7,"h6"),D.Mc(8),D.Ub(),D.Ub(),D.Ub(),D.Vb(9,"div",19),D.Vb(10,"div",20),D.Vb(11,"p"),D.Mc(12,"Allocation"),D.Qb(13,"br"),D.Mc(14,"Amount(FC)"),D.Ub(),D.Vb(15,"h6"),D.Mc(16),D.Ub(),D.Ub(),D.Ub(),D.Vb(17,"div",19),D.Vb(18,"div",20),D.Vb(19,"p"),D.Mc(20,"Delivered"),D.Qb(21,"br"),D.Mc(22,"Amount(FC)"),D.Ub(),D.Vb(23,"h6"),D.Mc(24),D.Ub(),D.Ub(),D.Ub(),D.Vb(25,"div",19),D.Vb(26,"div",20),D.Vb(27,"p"),D.Mc(28,"Billed"),D.Qb(29,"br"),D.Mc(30,"Amout(FC)"),D.Ub(),D.Vb(31,"h6"),D.Mc(32),D.Ub(),D.Ub(),D.Ub(),D.Vb(33,"div",19),D.Vb(34,"div",20),D.Vb(35,"p"),D.Mc(36,"Delivered Allocated Amout(FC)"),D.Ub(),D.Vb(37,"h6"),D.Mc(38),D.Ub(),D.Ub(),D.Ub(),D.Vb(39,"div",19),D.Vb(40,"div",20),D.Vb(41,"p"),D.Mc(42,"Revenue"),D.Qb(43,"br"),D.Mc(44,"Amount(FC)"),D.Ub(),D.Vb(45,"h6"),D.Mc(46),D.Ub(),D.Ub(),D.Ub(),D.Vb(47,"div",19),D.Vb(48,"div",20),D.Vb(49,"p"),D.Mc(50,"Revenue Deferred Amount(FC)"),D.Ub(),D.Vb(51,"h6"),D.Mc(52),D.Ub(),D.Ub(),D.Ub(),D.Vb(53,"div",19),D.Vb(54,"div",20),D.Vb(55,"p"),D.Mc(56,"Variable Consideration Amount(FC)"),D.Ub(),D.Vb(57,"h6"),D.Mc(58),D.Ub(),D.Ub(),D.Ub(),D.Ub()),2&n){var r=e.$implicit,o=D.gc();D.Eb(8),D.Oc("$ ",o.transformValues(r.ARRG_AMOUNT),""),D.Eb(8),D.Oc("$ ",o.transformValues(r.ALLOCATION_AMOUNT),""),D.Eb(8),D.Oc("$ ",o.transformValues(r.DELIVERED_AMOUNT),""),D.Eb(8),D.Oc("$ ",o.transformValues(r.BILLED_AMOUNT),""),D.Eb(6),D.Oc("$ ",o.transformValues(r.DEL_ALLOC_AMT),""),D.Eb(8),D.Oc("$ ",o.transformValues(r.REVENUE_AMOUNT),""),D.Eb(6),D.Oc("$ ",o.transformValues(r.DEF_REV_AMOUNT),""),D.Eb(6),D.Oc("$ ",o.transformValues(r.DEF_CONT_AMOUNT),"")}}function y(n,e){1&n&&D.Qb(0,"p-progressSpinner",21)}function k(n,e){if(1&n){var r=D.Wb();D.Vb(0,"a",29),D.dc("click",(function(n){return D.Dc(r),D.gc(2).onAddingReports(n)})),D.Qb(1,"em",30),D.Mc(2,"List of Reports"),D.Ub()}}function E(n,e){if(1&n){var r=D.Wb();D.Vb(0,"ol"),D.Vb(1,"li"),D.Vb(2,"input",39),D.dc("change",(function(){D.Dc(r);var n=e.$implicit;return D.gc(3).onReportChange(n)})),D.Ub(),D.Vb(3,"label",40),D.Mc(4),D.Ub(),D.Ub(),D.Ub()}if(2&n){var o=e.$implicit;D.Eb(2),D.oc("checked","Y"==o.showOnDashbaord),D.Eb(1),D.pc("for",o.id),D.Eb(1),D.Nc(o.reportName)}}function F(n,e){1&n&&D.Qb(0,"p-progressSpinner",41)}function A(n,e){if(1&n){var r=D.Wb();D.Vb(0,"div",31),D.Vb(1,"div",32),D.Vb(2,"div",33),D.Vb(3,"a",34),D.dc("click",(function(n){return D.Dc(r),D.gc(2).closeAddReports(n)})),D.Mc(4,"\xd7"),D.Ub(),D.Kc(5,E,5,3,"ol",35),D.Ub(),D.Vb(6,"div",36),D.Vb(7,"a",37),D.dc("click",(function(){return D.Dc(r),D.gc(2).saveDashboardReports()})),D.Mc(8," Save "),D.Ub(),D.Ub(),D.Kc(9,F,1,0,"p-progressSpinner",38),D.Ub(),D.Ub()}if(2&n){var o=D.gc(2);D.Eb(5),D.oc("ngForOf",o.reportsList),D.Eb(4),D.oc("ngIf",o.saveLoading)}}function P(n,e){1&n&&D.Qb(0,"p-progressSpinner",42)}function S(n,e){1&n&&(D.Vb(0,"div"),D.Vb(1,"strong",43),D.Mc(2,"No reports found"),D.Ub(),D.Ub())}function I(n,e){if(1&n&&D.Qb(0,"data-chart",53,54),2&n){var r=D.gc(3).$implicit,o=D.gc(2);D.oc("columnData",r.columnData)("routeUrl",o.currentUrl)("reportId",r.id)}}function R(n,e){if(1&n&&D.Qb(0,"pie-data-chart",53,55),2&n){var r=D.gc(3).$implicit,o=D.gc(2);D.oc("columnData",r.columnData)("routeUrl",o.currentUrl)("reportId",r.id)}}function Q(n,e){if(1&n&&(D.Tb(0),D.Kc(1,I,2,3,"data-chart",52),D.Kc(2,R,2,3,"pie-data-chart",52),D.Sb()),2&n){var r=D.gc(2).$implicit,o=D.gc(2);D.Eb(1),D.oc("ngIf",!r.switchChart&&o.drillDownService.showChart),D.Eb(1),D.oc("ngIf",r.switchChart)}}function N(n,e){1&n&&D.Qb(0,"p-progressSpinner",56)}var K=function(n){return["/reports","analytical","report",n]};function Y(n,e){if(1&n){var r=D.Wb();D.Vb(0,"div",46),D.Vb(1,"div",20),D.Vb(2,"h6",47),D.Vb(3,"span",48),D.Mc(4),D.Ub(),D.Vb(5,"div",49),D.dc("click",(function(){D.Dc(r);var n=D.gc().$implicit;return n.switchChart=!n.switchChart})),D.Qb(6,"em",50),D.Ub(),D.Ub(),D.Kc(7,Q,3,2,"ng-container",27),D.Kc(8,N,1,0,"p-progressSpinner",51),D.Ub(),D.Ub()}if(2&n){var o=D.gc().$implicit;D.Eb(3),D.oc("routerLink",D.sc(5,K,o.id)),D.Eb(1),D.Nc(o.reportName),D.Eb(2),D.oc("ngClass",o.switchChart?"fa fa-bar-chart":"fa fa-pie-chart"),D.Eb(1),D.oc("ngIf",!o.showLoading),D.Eb(1),D.oc("ngIf",o.showLoading)}}function T(n,e){if(1&n&&(D.Vb(0,"div",44),D.Kc(1,Y,9,7,"div",45),D.Ub()),2&n){var r=e.$implicit;D.Eb(1),D.oc("ngIf",r.showChart&&"Y"==r.showOnDashbaord)}}function $(n,e){if(1&n&&(D.Vb(0,"div",1),D.Vb(1,"div",2),D.Vb(2,"div",3),D.Vb(3,"div",4),D.Vb(4,"div",22),D.Vb(5,"p-card"),D.Vb(6,"h2"),D.Mc(7,"Reports"),D.Ub(),D.Vb(8,"div",23),D.Kc(9,k,3,0,"a",24),D.Kc(10,A,10,2,"div",25),D.Ub(),D.Kc(11,P,1,0,"p-progressSpinner",26),D.Kc(12,S,3,0,"div",27),D.Kc(13,T,2,1,"div",28),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub()),2&n){var r=D.gc();D.Eb(9),D.oc("ngIf",!r.noReports),D.Eb(1),D.oc("ngIf",r.addReports),D.Eb(1),D.oc("ngIf",r.showLoading),D.Eb(1),D.oc("ngIf",r.noReports),D.Eb(1),D.oc("ngForOf",r.reportsList)}}var W,J,_=i("+yMW"),x=((W=function(){function e(o,t,i,a,s){var c=this;r(this,e),this.drillDownService=o,this.router=t,this.landingDashboardService=i,this.rmanFiscalPeriodsService=a,this.notificationService=s,this.addReports=!1,this.showChart=!1,this.currentUrl="",this.reportsList=[],this.checkedReportsList=[],this.showLoading=!1,this.saveLoading=!1,this.noReports=!1,this.rmanFYList=[],this.rmanPeriodDimensionsList=[],this.overviewDataLoading=!1,this.noOverviewData=!1,this.paginationOptions={pageNumber:0,pageSize:"10000"},this.router.events.subscribe((function(n){n instanceof d.c&&(c.currentUrl=n.url)})),this.overviewDataLoading=!0,this.rmanFiscalPeriodsService.getFinancialYears().then((function(n){c.rmanFYList=n;for(var e=[{label:_.dropDownOptions.selectYear,value:null}],r=0;r<c.rmanFYList.length;r++)e.push({label:c.rmanFYList[r],value:c.rmanFYList[r]});c.rmanFYears=e})),this.rmanFiscalPeriodsService.getPeriodDimensions().then((function(n){c.rmanPeriodDimensionsList=n,c.currentPeriodDimension=c.rmanPeriodDimensionsList[0];for(var e=[{label:_.dropDownOptions.selectPeriod,value:null}],r=0;r<c.rmanPeriodDimensionsList.length;r++)e.push({label:c.rmanPeriodDimensionsList[r],value:c.rmanPeriodDimensionsList[r]});c.rmanPeriodDimensions=e,c.loadArrangementData()})),this.showLoading=!0,this.drillDownService.getReports(this.paginationOptions,!1).then((function(e){c.reportsList=e.content,0==c.reportsList.length&&(c.noReports=!0),c.showLoading=!1;var r,o=n(c.reportsList);try{var t=function(){var n=r.value;c.checkedReportsList.push(n),c.drillDownService.getReport(n.id).then((function(e){c.showLoading=!1;var r=JSON.parse(e.clob);r.id=e.id,n.columnData=r.columnData,n.datetimepickerfrom=new Date(r.dateRange.endDate),n.datetimepickerto=new Date(r.dateRange.startDate),n.reportName=r.reportName,n.switchChart=!1,n.showChart=!0,c.drillDownService.showChart=!0;var o={startDate:n.datetimepickerto,endDate:n.datetimepickerfrom};n.showLoading=!0,c.drillDownService.getArrangementData(o,r.id).then((function(e){n.showLoading=!1}))}))};for(o.s();!(r=o.n()).done;)t()}catch(i){o.e(i)}finally{o.f()}}))}var t,i,a;return t=e,(i=[{key:"loadArrangementData",value:function(){var n=this;this.landingDashboardService.getOverviewFigures(this.currentFY,this.currentPeriodDimension,this.rmanPeriod,this.rmanQuarter).then((function(e){null==e?(n.overviewDataLoading=!1,n.noOverviewData=!0,n.notificationService.showError("Failed to load Overview Data")):(n.overviewFigures=e.Content,n.overviewDataLoading=!1)}))}},{key:"ngOnInit",value:function(){}},{key:"onAddingReports",value:function(n){this.addReports=!this.addReports}},{key:"closeAddReports",value:function(n){this.addReports=!1}},{key:"onReportChange",value:function(n){"Y"==n.showOnDashbaord?(n.showOnDashbaord="N",this.checkedReportsList.splice(this.checkedReportsList.indexOf(n),1)):(n.showOnDashbaord="Y",this.checkedReportsList.push(n))}},{key:"saveDashboardReports",value:function(){var n=this;this.saveLoading=!0,this.landingDashboardService.saveDashboardReportsLayout(this.reportsList).then((function(e){n.saveLoading=!1,n.notificationService.showSuccess("Reports Updated Successfully")})).catch((function(e){n.saveLoading=!1,n.notificationService.showError("Error occured while updating Data")}))}},{key:"transformValues",value:function(n){return null!=n?Math.round(n):0}},{key:"onSelectChange",value:function(){null!=this.currentFY?(this.preparePeriods(this.currentFY),this.prepareQuarters(this.currentFY),this.rmanPeriod=null,this.rmanQuarter=null,this.overviewDataLoading=!1,this.loadArrangementData()):null!=this.currentPeriodDimension&&(this.rmanPeriod=null,this.rmanQuarter=null,this.overviewDataLoading=!1,this.loadArrangementData())}},{key:"onDimensionChange",value:function(){this.rmanPeriod=null,this.rmanQuarter=null,this.onPeriodsChange()}},{key:"onPeriodsChange",value:function(){this.overviewDataLoading=!1,this.loadArrangementData()}},{key:"prepareQuarters",value:function(n){if(null!=n){for(var e=[{label:_.dropDownOptions.selectQuarterName,value:null}],r=0;r<4;r++)e.push({label:0==r?"Q1-"+n:1==r?"Q2-"+n:2==r?"Q3-"+n:3==r?"Q4-"+n:"",value:0==r?"Q1-"+n:1==r?"Q2-"+n:2==r?"Q3-"+n:3==r?"Q4-"+n:""});this.rmanQuarters=e}}},{key:"preparePeriods",value:function(n){if(null!=n){for(var e=n.toString().substr(2,4),r=[{label:_.dropDownOptions.selectedPeriodName,value:null}],o=0;o<12;o++)r.push({label:0==o?"Jan-"+e:1==o?"Feb-"+e:2==o?"Mar-"+e:3==o?"Apr-"+e:4==o?"May-"+e:5==o?"Jun-"+e:6==o?"Jul-"+e:7==o?"Aug-"+e:8==o?"Sep-"+e:9==o?"Oct-"+e:10==o?"Nov-"+e:11==o?"Dec-"+e:"",value:0==o?"Jan-"+e:1==o?"Feb-"+e:2==o?"Mar-"+e:3==o?"Apr-"+e:4==o?"May-"+e:5==o?"Jun-"+e:6==o?"Jul-"+e:7==o?"Aug-"+e:8==o?"Sep-"+e:9==o?"Oct-"+e:10==o?"Nov-"+e:11==o?"Dec-"+e:""});this.rmanPeriods=r}}}])&&o(t.prototype,i),a&&o(t,a),e}()).\u0275fac=function(n){return new(n||W)(D.Pb(f.a),D.Pb(d.g),D.Pb(m.a),D.Pb(p.a),D.Pb(v.a))},W.\u0275cmp=D.Jb({type:W,selectors:[["app-landing-dashboard"]],viewQuery:function(n,e){var r;1&n&&D.Qc(U,!0,g.a),2&n&&D.Ac(r=D.ec())&&(e.dataChart=r.first)},decls:19,vars:16,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block","card-padding","card-overview"],[1,"cardHeader","row","mx-0"],["name","FYear",1,"ml-auto",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","periodDimension",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","periodName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange",4,"ngIf"],["name","quarterName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange",4,"ngIf"],["class","no-data-found",4,"ngIf"],["class","card-container row mx-0",4,"ngFor","ngForOf"],["class","overviewFigures-load-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],["class","card-wrapper",4,"ngIf"],["name","periodName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","quarterName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],[1,"no-data-found"],[1,"card-container","row","mx-0"],[1,"col","card-main-"],[1,"card"],["styleClass","custom-spinner","strokeWidth","4",1,"overviewFigures-load-spinner"],[1,"card-block","card-padding","d-flex"],[1,"pull-right","icons-list"],["class","add-column",3,"click",4,"ngIf"],["id","add-column-popup","class","dashboard-reports-popup",4,"ngIf"],["class","reports-load-splinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],[4,"ngIf"],["class","dashboard-graphs-row",4,"ngFor","ngForOf"],[1,"add-column",3,"click"],[1,"fa","fa-plus-circle"],["id","add-column-popup",1,"dashboard-reports-popup"],[1,"user-popup","right-align"],[1,"content","overflow"],["title","Close",1,"close",3,"click"],[4,"ngFor","ngForOf"],[1,"add-column-btns"],[1,"primary-btn","pointer",3,"click"],["class","save-dialog-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],["type","checkbox","name","column",3,"checked","change"],[3,"for"],["styleClass","custom-spinner","strokeWidth","4",1,"save-dialog-spinner"],["styleClass","custom-spinner","strokeWidth","4",1,"reports-load-splinner"],[2,"text-align","center"],[1,"dashboard-graphs-row"],["class","col-md-4 reports-card-main",4,"ngIf"],[1,"col-md-4","reports-card-main"],[1,"dashboard-report-name"],[3,"routerLink"],[1,"pull-right","chart-switch",3,"click"],[3,"ngClass"],["class","graph-load-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],[3,"columnData","title","desc","routeUrl","reportId",4,"ngIf"],[3,"columnData","title","desc","routeUrl","reportId"],["dataChart",""],["pieDataChart",""],["styleClass","custom-spinner","strokeWidth","4",1,"graph-load-spinner"]],template:function(n,e){1&n&&(D.Qb(0,"div",0),D.Vb(1,"div",1),D.Vb(2,"div",2),D.Vb(3,"div",3),D.Vb(4,"div",4),D.Vb(5,"div",5),D.Vb(6,"p-card"),D.Vb(7,"div",6),D.Vb(8,"h2"),D.Mc(9,"Overview"),D.Ub(),D.Vb(10,"p-dropdown",7),D.dc("ngModelChange",(function(n){return e.currentFY=n}))("onChange",(function(){return e.onSelectChange()})),D.Ub(),D.Vb(11,"p-dropdown",8),D.dc("ngModelChange",(function(n){return e.currentPeriodDimension=n}))("onChange",(function(){return e.onDimensionChange()})),D.Ub(),D.Kc(12,M,1,5,"p-dropdown",9),D.Kc(13,C,1,5,"p-dropdown",10),D.Ub(),D.Vb(14,"div",3),D.Kc(15,O,2,0,"h6",11),D.Kc(16,L,59,8,"span",12),D.Kc(17,y,1,0,"p-progressSpinner",13),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Kc(18,$,14,5,"div",14)),2&n&&(D.Eb(10),D.oc("options",e.rmanFYears)("ngModel",e.currentFY)("ngModelOptions",D.rc(14,V))("filter",!1),D.Eb(1),D.oc("options",e.rmanPeriodDimensions)("ngModel",e.currentPeriodDimension)("ngModelOptions",D.rc(15,V))("filter",!1),D.Eb(1),D.oc("ngIf",null!=e.currentFY&&"PTD"==e.currentPeriodDimension),D.Eb(1),D.oc("ngIf",null!=e.currentFY&&"QTD"==e.currentPeriodDimension),D.Eb(2),D.oc("ngIf",e.noOverviewData),D.Eb(1),D.oc("ngForOf",e.overviewFigures),D.Eb(1),D.oc("ngIf",e.overviewDataLoading),D.Eb(1),D.oc("ngIf",e.reportsList))},directives:[l.a,u.a,c.k,c.n,a.o,a.n,b.a,d.h,a.m,g.a,w.a],encapsulation:2}),W),j=i("uwUq"),X=[{path:"",component:x}],q=((J=function n(){r(this,n)}).\u0275mod=D.Nb({type:J}),J.\u0275inj=D.Mb({factory:function(n){return new(n||J)},providers:[m.a,p.a,{provide:s.a,useClass:j.a,multi:!0}],imports:[[l.b,u.b,c.h,a.c,b.b,h.a,s.c,d.k.forChild(X),s.d.withOptions({cookieName:"CSRF-TOKEN",headerName:"X-CSRF-TOKEN"})],l.b,u.b,c.h,b.b]}),J)}}])}();