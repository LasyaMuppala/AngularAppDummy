!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var c=0;c<e.length;c++){var i=e[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,c,i){return c&&e(t.prototype,c),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{vG1C:function(e,i,n){"use strict";n.r(i),n.d(i,"RevenueAnalyticsModule",(function(){return Et}));var l,o=n("tyNb"),a=n("JSOo"),r=n("J7oY"),s=n("fXoL"),d=n("tk/3"),u=n("+yMW"),g=((l=function(){function e(c){t(this,e),this.http=c}return c(e,[{key:"setArrangementId",value:function(t){this.arrgId=t}},{key:"getArrangementId",value:function(){return this.arrgId}},{key:"getAllRevenueAnalytics",value:function(t){return this.arrgId?this.http.get(u.apiUrl+"/fetchContractTotals?arrgId="+this.arrgId,{headers:{"Content-Type":"application/json",Accept:"application/json"},responseType:"json"}).toPromise().then((function(e){if(!e)return{content:[],totalElements:0,size:t.pageSize||10,contractTotals:{}};try{var c=e.contractLines||[],i=e.contractTotals||{};console.log("Contract Lines:",c),console.log("Contract Totals:",i);var n=c.map((function(t){return{lineNumber:t.dealLineNumber||t.lineNumber,productName:t.productName,chargeType:t.chargeType,quantity:t.quantity,unitListPrice:t.unitListPrice,unitNetPrice:t.unitSellingPrice||t.unitNetPrice,netPrice:t.netPrice,tcv:t.tcv,tcvRecurring:t.tcvRecurring,tcvNonRecurring:t.tcvNonRecurring,acv:t.acv,arrYear1:t.arrYear1,arrYear2:t.arrYear2,arrYear3:t.arrYear3,arrYear4:t.arrYear4,arrYear5:t.arrYear5,atr:t.atr,totalContractLength:t.tcl||t.totalContractLength,mrr:t.mrr,rpo:t.rpo,allocatedAcv:t.allocatedAcv,allocatedMrr:t.allocatedMrr,allocationAmount:t.allocationAmount||0,revenueAmount:t.revenueAmount||0}})),l=t.pageSize||10;return{content:n,totalElements:e.totalElements||n.length,size:e.size||l,contractTotals:i}}catch(o){return{content:[],totalElements:0,size:t.pageSize||10,contractTotals:{}}}})).catch((function(t){return{content:[],totalElements:0,size:10,contractTotals:{}}})):Promise.resolve({content:[],totalElements:0,size:10})}}]),e}()).\u0275fac=function(t){return new(t||l)(s.Zb(d.b))},l.\u0275prov=s.Lb({token:l,factory:l.\u0275fac}),l),h=n("7CaW"),b=n("7zfz"),f=n("ofXK"),p=n("rEr+"),y=n("+07z"),v=n("TjhJ"),m=n("3Pt+"),A=n("pqzn"),E=["dt"];function S(t,e){if(1&t){var c=s.Wb();s.Vb(0,"a",17),s.dc("click",(function(){return s.Dc(c),s.gc().exportExcel()})),s.Qb(1,"em",18),s.Ub()}}function C(t,e){if(1&t){var c=s.Wb();s.Vb(0,"div"),s.Vb(1,"div",31),s.dc("onDragStart",(function(){s.Dc(c);var t=s.gc().index;return s.gc(2).onDragStart(t)}))("onDrop",(function(){s.Dc(c);var t=s.gc().index;return s.gc(2).onDrop(t)})),s.Vb(2,"div",32),s.Vb(3,"input",33),s.dc("ngModelChange",(function(t){return s.Dc(c),s.gc().$implicit.showField=t}))("change",(function(){s.Dc(c);var t=s.gc().$implicit;return s.gc(2).selectColumns(t)})),s.Ub(),s.Vb(4,"label"),s.Mc(5),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){var i=s.gc().$implicit;s.Eb(3),s.oc("checked",i.showField)("ngModel",i.showField),s.Eb(2),s.Nc(i.header)}}var w=function(){return{color:"grey"}};function R(t,e){if(1&t){var c=s.Wb();s.Vb(0,"div"),s.Vb(1,"div",34),s.Vb(2,"div"),s.Vb(3,"input",35),s.dc("ngModelChange",(function(t){return s.Dc(c),s.gc().$implicit.showField=t}))("change",(function(){s.Dc(c);var t=s.gc().$implicit;return s.gc(2).selectColumns(t)})),s.Ub(),s.Vb(4,"label",36),s.Mc(5),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){var i=s.gc().$implicit;s.Eb(3),s.oc("checked",i.showField)("ngModel",i.showField)("disabled",!i.drag),s.Eb(1),s.oc("ngStyle",s.rc(5,w)),s.Eb(1),s.Nc(i.header)}}function T(t,e){if(1&t&&(s.Kc(0,C,6,3,"div",30),s.Kc(1,R,6,6,"div",30)),2&t){var c=e.$implicit;s.oc("ngIf",c.drag),s.Eb(1),s.oc("ngIf",!c.drag)}}var I=function(){return{width:"100%",height:"100%"}};function M(t,e){if(1&t){var c=s.Wb();s.Vb(0,"div",19),s.Vb(1,"div",20),s.Vb(2,"div",21),s.Vb(3,"input",22),s.dc("click",(function(){return s.Dc(c),s.gc().onSelectAll()})),s.Ub(),s.Vb(4,"label",23),s.Mc(5,"Select All"),s.Ub(),s.Vb(6,"a",24),s.dc("click",(function(t){return s.Dc(c),s.gc().closeConfigureColumns(t)})),s.Mc(7,"\xd7"),s.Ub(),s.Vb(8,"p-listbox",25),s.Kc(9,T,2,2,"ng-template",26),s.Ub(),s.Ub(),s.Vb(10,"div",27),s.Vb(11,"a",28),s.dc("click",(function(){return s.Dc(c),s.gc().saveColumns()})),s.Mc(12,"Save"),s.Ub(),s.Vb(13,"a",29),s.dc("click",(function(t){return s.Dc(c),s.gc().closeConfigureColumns(t)})),s.Mc(14,"Cancel"),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&t){var i=s.gc();s.Eb(3),s.oc("checked",i.isSelectAllChecked),s.Eb(5),s.Ic(s.rc(4,I)),s.oc("options",i.globalCols)}}function V(t,e){1&t&&s.Qb(0,"col")}function k(t,e){if(1&t&&(s.Vb(0,"colgroup"),s.Kc(1,V,1,0,"col",37),s.Ub()),2&t){var c=e.$implicit;s.Eb(1),s.oc("ngForOf",c)}}var U=function(t){return{display:t}};function Y(t,e){if(1&t&&(s.Vb(0,"th",40),s.Mc(1),s.Ub()),2&t){var c=s.gc().$implicit;s.pc("title",c.header),s.oc("ngStyle",s.sc(3,U,c.display)),s.Eb(1),s.Nc(c.header)}}function K(t,e){if(1&t&&(s.Vb(0,"th",41),s.Mc(1),s.Ub()),2&t){var c=s.gc().$implicit;s.pc("title",c.header),s.oc("ngStyle",s.sc(3,U,c.display)),s.Eb(1),s.Nc(c.header)}}function N(t,e){if(1&t&&(s.Tb(0),s.Kc(1,Y,2,5,"th",38),s.Kc(2,K,2,5,"th",39),s.Sb()),2&t){var c=e.$implicit;s.Eb(1),s.oc("ngIf","text"==c.type||"date"==c.type),s.Eb(1),s.oc("ngIf","number"==c.type||"round"==c.type)}}function $(t,e){if(1&t&&(s.Vb(0,"tr"),s.Kc(1,N,3,2,"ng-container",37),s.Ub()),2&t){var c=s.gc();s.Eb(1),s.oc("ngForOf",c.columns)}}function F(t,e){if(1&t&&(s.Vb(0,"td",45),s.Mc(1),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc().$implicit;s.pc("title",i[c.field]),s.oc("ngStyle",s.sc(3,U,c.display)),s.Eb(1),s.Oc(" ",i[c.field]," ")}}function O(t,e){if(1&t&&(s.Vb(0,"td",46),s.Mc(1),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc().$implicit;s.pc("title",i[c.field]),s.oc("ngStyle",s.sc(3,U,c.display)),s.Eb(1),s.Oc(" ",i[c.field]," ")}}function x(t,e){if(1&t&&(s.Vb(0,"td",45),s.hc(1,"date"),s.Mc(2),s.hc(3,"date"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc().$implicit;s.pc("title",s.jc(1,3,i[c.field],"MM/dd/yyyy")),s.oc("ngStyle",s.sc(9,U,c.display)),s.Eb(2),s.Oc(" ",s.jc(3,6,i[c.field],"MM/dd/yyyy")," ")}}function P(t,e){if(1&t&&(s.Vb(0,"td",46),s.hc(1,"round"),s.Mc(2),s.hc(3,"round"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc().$implicit;s.pc("title",s.ic(1,3,i[c.field])),s.oc("ngStyle",s.sc(7,U,c.display)),s.Eb(2),s.Oc(" ",s.ic(3,5,i[c.field])," ")}}function z(t,e){if(1&t&&(s.Tb(0),s.Kc(1,F,2,5,"td",43),s.Kc(2,O,2,5,"td",44),s.Kc(3,x,4,11,"td",43),s.Kc(4,P,4,9,"td",44),s.Sb()),2&t){var c=e.$implicit;s.Eb(1),s.oc("ngIf","text"==c.type),s.Eb(1),s.oc("ngIf","number"==c.type),s.Eb(1),s.oc("ngIf","date"==c.type),s.Eb(1),s.oc("ngIf","round"==c.type)}}function D(t,e){if(1&t&&(s.Vb(0,"tr",42),s.Kc(1,z,5,4,"ng-container",37),s.Ub()),2&t){var c=e.columns;s.oc("pSelectableRow",e.$implicit),s.Eb(1),s.oc("ngForOf",c)}}function j(t,e){if(1&t&&s.Qb(0,"td",36),2&t){var c=s.gc().$implicit;s.oc("ngStyle",s.sc(1,U,c.display))}}function L(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1,"Totals:"),s.Ub()),2&t){var c=s.gc().$implicit;s.oc("ngStyle",s.sc(1,U,c.display))}}function Q(t,e){if(1&t&&s.Qb(0,"td",36),2&t){var c=s.gc().$implicit;s.oc("ngStyle",s.sc(1,U,c.display))}}function J(t,e){if(1&t&&s.Qb(0,"td",49),2&t){var c=s.gc().$implicit;s.oc("ngStyle",s.sc(1,U,c.display))}}function W(t,e){if(1&t&&s.Qb(0,"td",49),2&t){var c=s.gc().$implicit;s.oc("ngStyle",s.sc(1,U,c.display))}}function q(t,e){if(1&t&&s.Qb(0,"td",36),2&t){var c=s.gc().$implicit;s.oc("ngStyle",s.sc(1,U,c.display))}}function _(t,e){if(1&t&&s.Qb(0,"td",36),2&t){var c=s.gc().$implicit;s.oc("ngStyle",s.sc(1,U,c.display))}}function B(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalNetPrice,"1.2-2")," ")}}function X(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalTcv,"1.2-2")," ")}}function G(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalTcvRecurring,"1.2-2")," ")}}function H(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalTcvNonRecurring,"1.2-2")," ")}}function Z(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalAcv,"1.2-2")," ")}}function tt(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalAtr,"1.2-2")," ")}}function et(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalArrYear1,"1.2-2")," ")}}function ct(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalArrYear2,"1.2-2")," ")}}function it(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalArrYear3,"1.2-2")," ")}}function nt(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalArrYear4,"1.2-2")," ")}}function lt(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalArrYear5,"1.2-2")," ")}}function ot(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalMrr,"1.2-2")," ")}}function at(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalRpo,"1.2-2")," ")}}function rt(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalAllocatedAcv,"1.2-2")," ")}}function st(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalAllocatedMrr,"1.2-2")," ")}}function dt(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalAllocationAmount,"1.2-2")," ")}}function ut(t,e){if(1&t&&(s.Vb(0,"td",49),s.Mc(1),s.hc(2,"number"),s.Ub()),2&t){var c=s.gc().$implicit,i=s.gc(2);s.oc("ngStyle",s.sc(5,U,c.display)),s.Eb(1),s.Oc(" ",s.jc(2,2,i.totalRevenueAmount,"1.2-2")," ")}}function gt(t,e){if(1&t&&(s.Tb(0),s.Kc(1,j,1,3,"td",47),s.Kc(2,L,2,3,"td",48),s.Kc(3,Q,1,3,"td",47),s.Kc(4,J,1,3,"td",48),s.Kc(5,W,1,3,"td",48),s.Kc(6,q,1,3,"td",47),s.Kc(7,_,1,3,"td",47),s.Kc(8,B,3,7,"td",48),s.Kc(9,X,3,7,"td",48),s.Kc(10,G,3,7,"td",48),s.Kc(11,H,3,7,"td",48),s.Kc(12,Z,3,7,"td",48),s.Kc(13,tt,3,7,"td",48),s.Kc(14,et,3,7,"td",48),s.Kc(15,ct,3,7,"td",48),s.Kc(16,it,3,7,"td",48),s.Kc(17,nt,3,7,"td",48),s.Kc(18,lt,3,7,"td",48),s.Kc(19,ot,3,7,"td",48),s.Kc(20,at,3,7,"td",48),s.Kc(21,rt,3,7,"td",48),s.Kc(22,st,3,7,"td",48),s.Kc(23,dt,3,7,"td",48),s.Kc(24,ut,3,7,"td",48),s.Sb()),2&t){var c=e.$implicit;s.Eb(1),s.oc("ngIf","text"==c.type&&"lineNumber"!=c.field),s.Eb(1),s.oc("ngIf","text"==c.type&&"lineNumber"==c.field),s.Eb(1),s.oc("ngIf","date"==c.type),s.Eb(1),s.oc("ngIf","number"==c.type&&"quantity"==c.field),s.Eb(1),s.oc("ngIf","number"==c.type&&"totalContractLength"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"unitListPrice"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"unitNetPrice"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"netPrice"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"tcv"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"tcvRecurring"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"tcvNonRecurring"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"acv"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"atr"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"arrYear1"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"arrYear2"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"arrYear3"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"arrYear4"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"arrYear5"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"mrr"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"rpo"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"allocatedAcv"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"allocatedMrr"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"allocationAmount"==c.field),s.Eb(1),s.oc("ngIf","round"==c.type&&"revenueAmount"==c.field)}}function ht(t,e){if(1&t&&(s.Vb(0,"tr"),s.Kc(1,gt,25,24,"ng-container",37),s.Ub()),2&t){var c=s.gc();s.Eb(1),s.oc("ngForOf",c.columns)}}function bt(t,e){if(1&t&&(s.Vb(0,"div",50),s.Vb(1,"p"),s.Mc(2),s.Ub(),s.Ub()),2&t){var c=s.gc();s.Eb(2),s.Nc(c.noData)}}var ft,pt,yt=n("+yMW"),vt=((ft=function(){function e(c,i,n,l){var a=this;t(this,e),this.rmanRevenueAnalyticsService=c,this.commonSharedService=i,this.notificationService=n,this.router=l,this.noData=yt.noData,this.loading=!0,this.revenueAnalyticsList=[],this.showAddColumns=!0,this.isSelectAllChecked=!0,this.showPaginator=!0,this.exportCols=[],this.disableExport=!0,this.totalNetPrice=0,this.totalTcv=0,this.totalTcvRecurring=0,this.totalTcvNonRecurring=0,this.totalAcv=0,this.totalArrYear1=0,this.totalArrYear2=0,this.totalArrYear3=0,this.totalArrYear4=0,this.totalArrYear5=0,this.totalAtr=0,this.totalMrr=0,this.totalRpo=0,this.totalAllocatedAcv=0,this.totalAllocatedMrr=0,this.totalAllocationAmount=0,this.totalRevenueAmount=0,this.paginationOptions={pageNumber:0,pageSize:"100"};var r=l.url.split("/")[3];r&&this.rmanRevenueAnalyticsService.setArrangementId(r),this.router.events.subscribe((function(t){if(t instanceof o.c){var e=t.url.split("/")[3];e&&a.rmanRevenueAnalyticsService.setArrangementId(e)}}))}return c(e,[{key:"ngOnInit",value:function(){this.rmanRevenueAnalyticsService.getArrangementId()||this.notificationService.showError("No arrangement ID found. Please select a valid arrangement."),this.globalCols=[{field:"lineNumber",header:"Line Number",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"productName",header:"Product Name",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"chargeType",header:"Charge Type",showField:!0,drag:!0,display:"table-cell",type:"text"},{field:"quantity",header:"Qty",showField:!0,drag:!0,display:"table-cell",type:"number"},{field:"unitListPrice",header:"Unit List Price",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"netPrice",header:"Net Price",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"tcv",header:"TCV",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"tcvRecurring",header:"TCV Recurring",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"tcvNonRecurring",header:"TCV Non Recurring",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"acv",header:" Annualised ACV",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"atr",header:"ATR",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"arrYear1",header:"ARR Year 1",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"arrYear2",header:"ARR Year 2",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"arrYear3",header:"ARR Year 3",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"arrYear4",header:"ARR Year 4",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"arrYear5",header:"ARR Year 5",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"totalContractLength",header:"Total Contract Length",showField:!0,drag:!0,display:"table-cell",type:"number"},{field:"mrr",header:"MRR",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"rpo",header:"RPO",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"allocatedAcv",header:"Allocated ACV",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"allocatedMrr",header:"Allocated MRR",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"allocationAmount",header:"Allocation Amt ",showField:!0,drag:!0,display:"table-cell",type:"round"},{field:"revenueAmount",header:"Revenue Amt",showField:!0,drag:!0,display:"table-cell",type:"round"}],this.columns=[],this.getTableColumns("rmanRevenueAnalytics","Revenue Analytics")}},{key:"getTableColumns",value:function(t,e){var c=this;this.isSelectAllChecked=!0,this.commonSharedService.getConfiguredColDetails(t,e).then((function(t){if(t&&null!=t&&t.userId){c.columns=[];var e=t.tableColumns.split(",");e.length>0&&e.forEach((function(t,e){t&&(c.startIndex=c.globalCols.findIndex((function(e){return e.field==t})),c.onDrop(e))})),c.globalCols.forEach((function(t){-1!==e.indexOf(t.field)?c.columns.push(t):t.showField=!1})),c.columns.length!=c.globalCols.length&&(c.isSelectAllChecked=!1),c.showPaginator=0!==c.columns.length,c.userId=t.userId}else c.columns=c.globalCols;0===c.columns.length&&(c.columns=c.globalCols),c.getAllRevenueAnalytics()})).catch((function(t){c.notificationService.showError("Error occurred while getting table columns data"),c.loading=!1,c.columns=c.globalCols,c.getAllRevenueAnalytics()}))}},{key:"getAllRevenueAnalytics",value:function(){var t=this;if(!this.rmanRevenueAnalyticsService.getArrangementId())return this.loading=!1,void this.notificationService.showError("Network failed / service is down.");this.loading=!0,this.rmanRevenueAnalyticsService.getAllRevenueAnalytics(this.paginationOptions).then((function(e){if(!e)return t.loading=!1,void t.notificationService.showError("Error occurred while getting data");t.revenueAnalyticsList=e.content||[],t.totalElements=e.totalElements||0,t.pageSize=e.size||10,t.contractTotals=e.contractTotals||{},t.calculateTotals(),t.loading=!1,t.disableExport=!1})).catch((function(e){t.notificationService.showError("Error occurred while getting data"),t.loading=!1}))}},{key:"getRevenueAnalytics",value:function(t){var e=this;if(!this.rmanRevenueAnalyticsService.getArrangementId())return this.loading=!1,void this.notificationService.showError("Network failed / service is down.");this.paginationOptions={pageNumber:t.first/t.rows,pageSize:this.pageSize,sortField:t.sortField,sortOrder:t.sortOrder},this.loading=!0,this.rmanRevenueAnalyticsService.getAllRevenueAnalytics(this.paginationOptions).then((function(t){if(!t)return e.loading=!1,void e.notificationService.showError("Error occurred while getting data: Invalid response");e.revenueAnalyticsList=t.content||[],e.totalElements=t.totalElements||0,e.pageSize=t.size||10,e.contractTotals=t.contractTotals||{},e.calculateTotals(),e.loading=!1})).catch((function(t){e.notificationService.showError("Error occurred while getting data"),e.loading=!1}))}},{key:"calculateTotals",value:function(){this.totalNetPrice=0,this.totalTcv=0,this.totalTcvRecurring=0,this.totalTcvNonRecurring=0,this.totalAcv=0,this.totalArrYear1=0,this.totalArrYear2=0,this.totalArrYear3=0,this.totalArrYear4=0,this.totalArrYear5=0,this.totalAtr=0,this.totalMrr=0,this.totalRpo=0,this.totalAllocatedAcv=0,this.totalAllocatedMrr=0,this.totalAllocationAmount=0,this.totalRevenueAmount=0,this.contractTotals&&Object.keys(this.contractTotals).length>0&&(this.totalNetPrice=this.contractTotals.totalNetPrice||0,this.totalTcv=this.contractTotals.totalTcv||0,this.totalTcvRecurring=this.contractTotals.totalTcvRecurring||0,this.totalTcvNonRecurring=this.contractTotals.totalTcvNonRecurring||0,this.totalAcv=this.contractTotals.totalAcv||0,this.totalArrYear1=this.contractTotals.totalArrYear1||0,this.totalArrYear2=this.contractTotals.totalArrYear2||0,this.totalArrYear3=this.contractTotals.totalArrYear3||0,this.totalArrYear4=this.contractTotals.totalArrYear4||0,this.totalArrYear5=this.contractTotals.totalArrYear5||0,this.totalAtr=this.contractTotals.totalAtr||0,this.totalMrr=this.contractTotals.totalMrr||0,this.totalRpo=this.contractTotals.totalRpo||0,this.totalAllocatedAcv=this.contractTotals.totalAllocatedAcv||0,this.totalAllocatedMrr=this.contractTotals.totalAllocatedMrr||0,this.totalAllocationAmount=this.contractTotals.totalAllocationAmount||0,this.totalRevenueAmount=this.contractTotals.totalRevenueAmount||0)}},{key:"saveColumns",value:function(){var t=this,e="";this.showAddColumns=!this.showAddColumns;var c=this.globalCols.length-1;this.globalCols.forEach((function(t,i){t.showField&&(e+=t.field,i<c&&(e+=","))})),this.loading=!0,this.commonSharedService.saveOrUpdateTableColumns("rmanRevenueAnalytics","Revenue Analytics",e,this.userId).then((function(e){t.columns=t.globalCols.filter((function(t){return t.showField})),t.userId=e.userId,t.showPaginator=0!==t.columns.length,t.loading=!1})).catch((function(){t.notificationService.showError("Error occurred while saving columns"),t.loading=!1}))}},{key:"onDragStart",value:function(t){this.startIndex=t}},{key:"onDrop",value:function(t){var e=this.globalCols[this.startIndex];this.globalCols.splice(this.startIndex,1),this.globalCols.splice(t,0,e)}},{key:"selectColumns",value:function(t){var e=this.globalCols.filter((function(t){return!t.showField}));this.isSelectAllChecked=!(e.length>0)}},{key:"onSelectAll",value:function(){var t=this;this.isSelectAllChecked=!this.isSelectAllChecked,this.globalCols.forEach((function(e){t.isSelectAllChecked?e.showField=!0:e.drag&&(e.showField=!1)}))}},{key:"onConfiguringColumns",value:function(t){this.clonedCols=JSON.parse(JSON.stringify(this.globalCols)),this.showAddColumns=!1}},{key:"closeConfigureColumns",value:function(t){this.showAddColumns=!0,this.globalCols=this.clonedCols;var e=this.globalCols.filter((function(t){return!t.showField}));this.isSelectAllChecked=!(e.length>0)}},{key:"exportExcel",value:function(){this.dt?this.dt.exportCSV():this.notificationService.showError("Error while Exporting")}},{key:"reset",value:function(t){this.rmanRevenueAnalyticsService.getArrangementId()?(this.paginationOptions={},t.reset(),this.getAllRevenueAnalytics()):this.notificationService.showError("Network failed / service is down.")}}]),e}()).\u0275fac=function(t){return new(t||ft)(s.Pb(g),s.Pb(a.a),s.Pb(r.a),s.Pb(o.g))},ft.\u0275cmp=s.Jb({type:ft,selectors:[["rmanRevenueAnalytics-data"]],viewQuery:function(t,e){var c;1&t&&s.Qc(E,!0),2&t&&s.Ac(c=s.ec())&&(e.dt=c.first)},features:[s.Db([g])],decls:19,vars:11,consts:[[1,"content-section","implementation"],["header","Revenue Analytics",1,"mb-1em"],[1,"pull-right","icons-list"],[1,"add-column",3,"click"],[1,"fa","fa-cog"],["title","Reset",3,"click"],[1,"fa","fa-refresh"],["title","Export",3,"click",4,"ngIf"],["id","add-column-popup","class","contracts_add_column",4,"ngIf"],[1,"x-scroll"],["id","revenue-analytics-dt","selectionMode","single","scrollable","true","columnResizeMode","expand","exportFilename","Revenue Analytics ",1,"ui-datatable","arrangementMgrTbl","custom-datatable",3,"loading","columns","value","metaKeySelection","lazy","paginator","rows","totalRecords","resizableColumns","onLazyLoad"],["dt",""],["pTemplate","colgroup"],["pTemplate","header","class","arrangementMgrTblHead"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],["title","Export",3,"click"],[1,"fa","fa-external-link"],["id","add-column-popup",1,"contracts_add_column"],[1,"user-popup"],[1,"content","overflow"],["type","checkbox","id","selectall","name","selectall",3,"checked","click"],["for","selectall"],["title","Close",1,"close",3,"click"],[3,"options"],["pTemplate","item"],[1,"pull-right"],[1,"configColBtn",3,"click"],[1,"configColBtn","conf-cancel",3,"click"],[4,"ngIf"],["pDraggable","gens","pDroppable","gens",1,"ui-helper-clearfix",3,"onDragStart","onDrop"],[1,"drag"],["type","checkbox",3,"checked","ngModel","ngModelChange","change"],[1,"ui-helper-clearfix"],["type","checkbox",3,"checked","ngModel","disabled","ngModelChange","change"],[3,"ngStyle"],[4,"ngFor","ngForOf"],["pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["class","number","pResizableColumn","",3,"ngStyle","title",4,"ngIf"],["pResizableColumn","",3,"ngStyle","title"],["pResizableColumn","",1,"number",3,"ngStyle","title"],[3,"pSelectableRow"],[3,"title","ngStyle",4,"ngIf"],["class","number",3,"title","ngStyle",4,"ngIf"],[3,"title","ngStyle"],[1,"number",3,"title","ngStyle"],[3,"ngStyle",4,"ngIf"],["class","number",3,"ngStyle",4,"ngIf"],[1,"number",3,"ngStyle"],[1,"no-results-data"]],template:function(t,e){if(1&t){var c=s.Wb();s.Qb(0,"div",0),s.Vb(1,"p-panel",1),s.Vb(2,"p-header"),s.Vb(3,"div",2),s.Vb(4,"a",3),s.dc("click",(function(t){return e.onConfiguringColumns(t)})),s.Qb(5,"em",4),s.Mc(6,"Columns"),s.Ub(),s.Vb(7,"a",5),s.dc("click",(function(){s.Dc(c);var t=s.Bc(13);return e.reset(t)})),s.Qb(8,"em",6),s.Ub(),s.Kc(9,S,2,0,"a",7),s.Kc(10,M,15,5,"div",8),s.Ub(),s.Ub(),s.Vb(11,"div",9),s.Vb(12,"p-table",10,11),s.dc("onLazyLoad",(function(t){return e.getRevenueAnalytics(t)})),s.Kc(14,k,2,1,"ng-template",12),s.Kc(15,$,2,1,"ng-template",13),s.Kc(16,D,2,2,"ng-template",14),s.Kc(17,ht,2,1,"ng-template",15),s.Kc(18,bt,3,1,"ng-template",16),s.Ub(),s.Ub(),s.Ub()}2&t&&(s.Eb(9),s.oc("ngIf",!e.disableExport),s.Eb(1),s.oc("ngIf",!e.showAddColumns),s.Eb(2),s.oc("loading",e.loading)("columns",e.columns)("value",e.revenueAnalyticsList)("metaKeySelection",!1)("lazy",!0)("paginator",e.showPaginator)("rows",e.pageSize)("totalRecords",e.totalElements)("resizableColumns",!0))},directives:[h.a,b.c,f.o,p.j,b.f,y.a,v.b,v.c,m.a,m.k,m.n,f.p,f.n,p.g,p.i],pipes:[f.f,A.a,f.g],encapsulation:2}),ft),mt=n("PCNd"),At=[{path:"",component:vt}],Et=((pt=function e(){t(this,e)}).\u0275mod=s.Nb({type:pt}),pt.\u0275inj=s.Mb({factory:function(t){return new(t||pt)},providers:[],imports:[[mt.a,o.k.forChild(At)],o.k]}),pt)}}])}();