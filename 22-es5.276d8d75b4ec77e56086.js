!function(){function e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/2n1":function(e,t,a){"use strict";a.r(t),a.d(t,"DealDashboardModule",(function(){return ae}));var r,n=a("ofXK"),s=a("QIUk"),c=a("arFO"),l=a("3Pt+"),d=a("vKg+"),u=a("8DrR"),h=a("tk/3"),p=a("tyNb"),b=a("kzDL"),g=a("/8oK"),f=a("uwUq"),v=a("gJyg"),m=a("1adA"),y=a("J7oY"),D=a("fXoL"),w=a("+yMW"),M={headers:new h.f({"Content-Type":"application/json"})},C=((r=function(){function e(t){o(this,e),this.http=t,this.reportUrls={dealGuidanceReport:"/reports/dealGuidanceReport",dealsByQuarter:"/reports/dealsByQuarter",allocatedMarginGuidancePercentByAllocatedGMGuidance:"/reports/allocatedMarginGuidancePercentByAllocatedGMGuidance",allocatedMarginGuidanceDeals:"/reports/allocatedMarginGuidanceDeals",allocatedMarginPercentByProduct:"/reports/allocatedMarginPercentByProduct",allocationAmtByRegion:"/reports/allocationAmtByRegion",allocationAmtByPeriod:"/reports/allocationAmtByPeriod",allocationAmtByAccount:"/reports/allocationAmtByAccount",allocationAmtByProductCategory:"/reports/allocationAmtByProductCategory",allocationGuidanceDeals:"/reports/allocationGuidanceDeals",allocationMarginPercentByAllocationGuidance:"/reports/allocationMarginPercentByAllocationGuidance",discountGuidanceDeals:"/reports/discountGuidanceDeals",discountPercentByDiscountGuidance:"/reports/discountPercentByDiscountGuidance",allocatedmarginPercentByRegion:"/reports/allocatedmarginPercentByRegion",allocatedmarginPercentByAccount:"/reports/allocatedmarginPercentByAccount",allocatedmarginPercentByProductCategory:"/reports/allocatedmarginPercentByProductCategory"},this.otherUrls={getListOfReports:"/ayaraDealDashboardReports?search=%25page=0&size=100"}}return i(e,[{key:"saveDashboardReportsLayout",value:function(e){return this.http.post(w.apiUrl+"/saveayaraDealDashboardReports",e,M).toPromise().then((function(e){return e}),(function(e){console.log(e)}))}},{key:"getOverviewFigures",value:function(e,t,a,r){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===a&&(a=""),void 0===r&&(r=""),!a&&r&&(a=r),this.http.get(w.apiUrl+"/dealDashBoardOverView?periodType="+t+"&period="+a+"&fiscalYear="+e).toPromise().then((function(e){return e}))}},{key:"getListOfReports",value:function(){return this.http.get(w.apiUrl+this.otherUrls.getListOfReports)}},{key:"dealGuidanceReport",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.dealGuidanceReport+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"dealsByQuarter",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.dealsByQuarter+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocatedMarginGuidancePercentByAllocatedGMGuidance",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocatedMarginGuidancePercentByAllocatedGMGuidance+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocatedMarginGuidanceDeals",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocatedMarginGuidanceDeals+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocatedMarginPercentByProduct",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocatedMarginPercentByProduct+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocationAmtByRegion",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocationAmtByRegion+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocationAmtByPeriod",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocationAmtByPeriod+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocationAmtByAccount",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocationAmtByAccount+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocationAmtByProductCategory",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocationAmtByProductCategory+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocationGuidanceDeals",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocationGuidanceDeals+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocationMarginPercentByAllocationGuidance",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocationMarginPercentByAllocationGuidance+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"discountGuidanceDeals",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.discountGuidanceDeals+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"discountPercentByDiscountGuidance",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.discountPercentByDiscountGuidance+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocatedmarginPercentByRegion",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocatedmarginPercentByRegion+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocatedmarginPercentByAccount",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocatedmarginPercentByAccount+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}},{key:"allocatedmarginPercentByProductCategory",value:function(e,t,a){return this.http.get(w.apiUrl+this.reportUrls.allocatedmarginPercentByProductCategory+"?periodType="+t+"&period="+a+"&fiscalYear="+e)}}]),e}()).\u0275fac=function(e){return new(e||r)(D.Zb(h.b))},r.\u0275prov=D.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),P=a("JSOo"),U=a("LPYB"),R=["dataChart"],G=function(){return{standalone:!0}};function A(e,t){if(1&e){var a=D.Wb();D.Vb(0,"p-dropdown",15),D.dc("ngModelChange",(function(e){return D.Dc(a),D.gc().rmanPeriod=e}))("onChange",(function(){return D.Dc(a),D.gc().onPeriodsChange()})),D.Ub()}if(2&e){var r=D.gc();D.oc("options",r.rmanPeriods)("ngModel",r.rmanPeriod)("ngModelOptions",D.rc(4,G))("filter",!1)}}function O(e,t){if(1&e){var a=D.Wb();D.Vb(0,"p-dropdown",16),D.dc("ngModelChange",(function(e){return D.Dc(a),D.gc().rmanQuarter=e}))("onChange",(function(){return D.Dc(a),D.gc().onPeriodsChange()})),D.Ub()}if(2&e){var r=D.gc();D.oc("options",r.rmanQuarters)("ngModel",r.rmanQuarter)("ngModelOptions",D.rc(4,G))("filter",!1)}}function B(e,t){1&e&&(D.Vb(0,"h6",17),D.Mc(1,"No data found"),D.Ub())}function V(e,t){1&e&&(D.Vb(0,"h6"),D.Mc(1,"\xa0"),D.Ub())}function k(e,t){1&e&&(D.Vb(0,"h6"),D.Mc(1,"\xa0"),D.Ub())}function S(e,t){1&e&&(D.Vb(0,"h6"),D.Mc(1,"\xa0"),D.Ub())}function x(e,t){if(1&e&&D.Kc(0,S,2,0,"h6",23),2&e){var a=D.gc(2);D.oc("ngIf",0===(null==a.overviewFigures.dealGuidance?null:a.overviewFigures.dealGuidance.length)||!a.overviewFigures.dealGuidance)}}function N(e,t){if(1&e){var a=D.Wb();D.Vb(0,"h6"),D.Vb(1,"a",29),D.dc("click",(function(){D.Dc(a);var e=t.$implicit;return D.gc(2).gotoPage(e)})),D.Mc(2),D.Ub(),D.Ub()}if(2&e){var r=t.$implicit,o=D.gc(2);D.Eb(1),D.Jc("color",r.guidance),D.Eb(1),D.Pc("",r.guidance," - ",o.transformValues(r.noOfGuidance),"")}}function F(e,t){if(1&e&&(D.Vb(0,"span",18),D.Vb(1,"div",19),D.Vb(2,"div",20),D.Vb(3,"p",21),D.Mc(4,"Cumulative Deal Value"),D.Ub(),D.Vb(5,"h6"),D.Mc(6,"\xa0"),D.Ub(),D.Vb(7,"h6"),D.Mc(8),D.hc(9,"number"),D.Ub(),D.Ub(),D.Ub(),D.Vb(10,"div",19),D.Vb(11,"div",20),D.Vb(12,"p",21),D.Mc(13,"Count of Deals"),D.Ub(),D.Vb(14,"h6"),D.Mc(15,"\xa0"),D.Ub(),D.Vb(16,"h6"),D.Mc(17),D.Ub(),D.Ub(),D.Ub(),D.Vb(18,"div",19),D.Vb(19,"div",20),D.Vb(20,"p",21),D.Mc(21,"Count of Quotes"),D.Ub(),D.Vb(22,"h6"),D.Mc(23,"\xa0"),D.Ub(),D.Vb(24,"h6"),D.Mc(25),D.Ub(),D.Ub(),D.Ub(),D.Vb(26,"div",19),D.Vb(27,"div",22),D.Vb(28,"p",21),D.Mc(29,"Deal Guidance"),D.Ub(),D.Kc(30,V,2,0,"h6",23),D.Kc(31,k,2,0,"h6",24),D.Kc(32,x,1,1,"ng-template",null,25,D.Lc),D.Vb(34,"div",26),D.Kc(35,N,3,4,"h6",27),D.Ub(),D.Ub(),D.Ub(),D.Vb(36,"div",19),D.Vb(37,"div",20),D.Vb(38,"p",21),D.Mc(39,"Cumulative Allocated Margin"),D.Ub(),D.Vb(40,"h6"),D.Mc(41),D.hc(42,"number"),D.Ub(),D.Vb(43,"h6"),D.Mc(44),D.Ub(),D.Ub(),D.Ub(),D.Vb(45,"div",28),D.Vb(46,"div",20),D.Vb(47,"p",21),D.Mc(48,"Cumulative Gross Margin"),D.Ub(),D.Vb(49,"h6"),D.Mc(50),D.hc(51,"number"),D.Ub(),D.Vb(52,"h6"),D.Mc(53),D.Ub(),D.Ub(),D.Ub(),D.Ub()),2&e){var a=D.Bc(33),r=D.gc();D.Eb(8),D.Oc("$ ",D.jc(9,15,r.transformValues(r.overviewFigures.totalDealValue),"1.0-2"),""),D.Eb(9),D.Oc(" ",r.transformValues(r.overviewFigures.noOfDeals),""),D.Eb(8),D.Oc(" ",r.transformValues(r.overviewFigures.noOfQuotes),""),D.Eb(5),D.oc("ngIf",0===(null==r.overviewFigures.dealGuidance?null:r.overviewFigures.dealGuidance.length)||!r.overviewFigures.dealGuidance),D.Eb(1),D.oc("ngIf",1===(null==r.overviewFigures.dealGuidance?null:r.overviewFigures.dealGuidance.length)||!r.overviewFigures.dealGuidance)("ngIfElse",a),D.Eb(4),D.oc("ngForOf",r.overviewFigures.dealGuidance),D.Eb(6),D.Oc("$ ",D.jc(42,18,r.transformValues(r.overviewFigures.totalGrossMarginAmt),"1.0-2"),""),D.Eb(2),D.Jc("color","#262d74"),D.Eb(1),D.Oc(" ",r.transformValues(r.overviewFigures.totalGrossMarginPercent)," %"),D.Eb(6),D.Oc("$ ",D.jc(51,21,r.transformValues(r.overviewFigures.totalAllocatedGrossMarginAmt),"1.0-2"),""),D.Eb(2),D.Jc("color","#262d74"),D.Eb(1),D.Oc(" ",r.transformValues(r.overviewFigures.totalAllocatedGrossMarginPercent)," %")}}function L(e,t){1&e&&D.Qb(0,"p-progressSpinner",30)}function I(e,t){if(1&e){var a=D.Wb();D.Vb(0,"a",37),D.dc("click",(function(e){return D.Dc(a),D.gc(2).onAddingReports(e)})),D.Qb(1,"em",38),D.Mc(2,"List of Reports"),D.Ub()}}function E(e,t){if(1&e){var a=D.Wb();D.Vb(0,"ol"),D.Vb(1,"li"),D.Vb(2,"input",46),D.dc("change",(function(){D.Dc(a);var e=t.$implicit;return D.gc(3).onReportChange(e)})),D.Ub(),D.Vb(3,"label",47),D.Mc(4),D.Ub(),D.Ub(),D.Ub()}if(2&e){var r=t.$implicit;D.Eb(2),D.oc("checked","Y"==r.showOnDashboard),D.Eb(1),D.pc("for",r.id),D.Eb(1),D.Nc(r.reportName)}}function T(e,t){1&e&&D.Qb(0,"p-progressSpinner",48)}function Y(e,t){if(1&e){var a=D.Wb();D.Vb(0,"div",39),D.Vb(1,"div",40),D.Vb(2,"div",41),D.Vb(3,"a",42),D.dc("click",(function(e){return D.Dc(a),D.gc(2).closeAddReports(e)})),D.Mc(4,"\xd7"),D.Ub(),D.Kc(5,E,5,3,"ol",27),D.Ub(),D.Vb(6,"div",43),D.Vb(7,"a",44),D.dc("click",(function(){return D.Dc(a),D.gc(2).saveDashboardReports()})),D.Mc(8," Save "),D.Ub(),D.Ub(),D.Kc(9,T,1,0,"p-progressSpinner",45),D.Ub(),D.Ub()}if(2&e){var r=D.gc(2);D.Eb(5),D.oc("ngForOf",r.dropdownReportList),D.Eb(4),D.oc("ngIf",r.saveLoading)}}function Q(e,t){1&e&&D.Qb(0,"p-progressSpinner",49)}function K(e,t){1&e&&(D.Vb(0,"div"),D.Vb(1,"strong",50),D.Mc(2,"No reports found"),D.Ub(),D.Ub())}function W(e,t){if(1&e&&D.Qb(0,"canvas",60),2&e){var a=D.gc(2).$implicit;D.oc("datasets",a.chartData)("labels",a.chartLabels)("options",a.chartOptions)("legend",a.chartLegend)("chartType",a.chartType)}}function J(e,t){1&e&&(D.Vb(0,"div",61),D.Mc(1," No Transaction Exist in the Selected Period Range "),D.Ub())}function $(e,t){if(1&e&&D.Qb(0,"canvas",62),2&e){var a=D.gc(2).$implicit;D.oc("options",a.pieChartOptions)("data",a.pieChartData)("labels",a.pieChartLabels)("chartType","doughnut")}}function _(e,t){1&e&&(D.Vb(0,"div",61),D.Mc(1," No Transaction Exist in the Selected Period Range "),D.Ub())}function j(e,t){if(1&e){var a=D.Wb();D.Vb(0,"div",53),D.Vb(1,"div",20),D.Vb(2,"h6",54),D.Vb(3,"span"),D.Mc(4),D.Ub(),D.Vb(5,"div",55),D.dc("click",(function(){D.Dc(a);var e=D.gc().$implicit,t=D.gc(3);return"bar"===e.chartType?t.toggleData(e,"pie",!0):t.toggleData(e,"bar",!1)})),D.Qb(6,"em",56),D.Ub(),D.Ub(),D.Kc(7,W,1,5,"canvas",57),D.Kc(8,J,2,0,"div",58),D.Kc(9,$,1,4,"canvas",59),D.Kc(10,_,2,0,"div",58),D.Ub(),D.Ub()}if(2&e){var r=D.gc().$implicit;D.Eb(4),D.Nc(r.name),D.Eb(2),D.oc("ngClass","pie"===r.chartType?"fa fa-bar-chart":"fa fa-pie-chart"),D.Eb(1),D.oc("ngIf","bar"===r.chartType&&r.chartData.length>0),D.Eb(1),D.oc("ngIf","bar"===r.chartType&&0===r.chartData.length),D.Eb(1),D.oc("ngIf","pie"===r.chartType&&r.pieChartData.length>0),D.Eb(1),D.oc("ngIf","pie"===r.chartType&&0===r.pieChartData.length)}}function q(e,t){if(1&e&&(D.Vb(0,"div"),D.Kc(1,j,11,6,"div",52),D.Ub()),2&e){var a=t.$implicit;D.Eb(1),D.oc("ngIf","Y"===a.showOnDashboard)}}function z(e,t){if(1&e&&(D.Vb(0,"div",51),D.Kc(1,q,2,1,"div",27),D.Ub()),2&e){var a=D.gc(2);D.Eb(1),D.oc("ngForOf",a.reportsDataArray)}}function H(e,t){if(1&e&&(D.Vb(0,"div",1),D.Vb(1,"div",2),D.Vb(2,"div",3),D.Vb(3,"div",4),D.Vb(4,"div",31),D.Vb(5,"p-card"),D.Vb(6,"h2"),D.Mc(7,"Reports"),D.Ub(),D.Vb(8,"div",32),D.Kc(9,I,3,0,"a",33),D.Kc(10,Y,10,2,"div",34),D.Ub(),D.Kc(11,Q,1,0,"p-progressSpinner",35),D.Kc(12,K,3,0,"div",23),D.Kc(13,z,2,1,"div",36),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub()),2&e){var a=D.gc();D.Eb(9),D.oc("ngIf",!a.noReports),D.Eb(1),D.oc("ngIf",a.addReports),D.Eb(1),D.oc("ngIf",a.showLoading),D.Eb(1),D.oc("ngIf",a.noReports),D.Eb(1),D.oc("ngIf",a.dealGuidanceBarReportReady)}}var X,Z,ee=a("+yMW"),te=[{path:"",component:(X=function(){function e(t,a,r,n,i,s){var c=this;o(this,e),this.drillDownService=t,this.router=a,this.dealDashboardService=r,this.rmanFiscalPeriodsService=n,this.notificationService=i,this.commonSharedService=s,this.addReports=!1,this.showChart=!1,this.currentUrl="",this.reportsList=[],this.showLoading=!1,this.saveLoading=!1,this.noReports=!1,this.rmanFYList=[],this.rmanPeriodDimensionsList=[],this.noOverviewData=!1,this.overviewDataLoading=!1,this.overviewFigures=null,this.dealGuidanceBarReportReady=!1,this.reportsDataArray=[],this.dropdownReportList=[],this.paginationOptions={pageNumber:0,pageSize:"10000"},this.router.events.subscribe((function(e){e instanceof p.c&&(c.currentUrl=e.url)})),this.overviewDataLoading=!0,this.rmanFiscalPeriodsService.getFinancialYears().then((function(e){c.rmanFYList=e;for(var t=[{label:ee.dropDownOptions.selectYear,value:null}],a=0;a<c.rmanFYList.length;a++)t.push({label:c.rmanFYList[a],value:c.rmanFYList[a]});c.rmanFYears=t})),this.rmanFiscalPeriodsService.getPeriodDimensions().then((function(e){c.rmanPeriodDimensionsList=e,c.currentPeriodDimension=c.rmanPeriodDimensionsList[0];for(var t=[{label:ee.dropDownOptions.selectPeriod,value:null}],a=0;a<c.rmanPeriodDimensionsList.length;a++)t.push({label:c.rmanPeriodDimensionsList[a],value:c.rmanPeriodDimensionsList[a]});c.rmanPeriodDimensions=t,c.rmanFiscalPeriodsService.getCurrentfiscalperiod().then((function(e){c.currentFY=e.periodYear,c.rmanPeriod=e.periodName,c.preparePeriods(c.currentFY),c.loadArrangementData(),c.dealDashboardService.getListOfReports().subscribe((function(e){c.dropdownReportList=e.content,0===c.dropdownReportList.length?c.noReports=!0:c.loadReports()}))}))}))}return i(e,[{key:"ngOnInit",value:function(){}},{key:"loadReports",value:function(){var e=this,t=this.currentFY,a=this.currentPeriodDimension,r=this.rmanPeriod,o=this.rmanQuarter;void 0===t&&(t=""),void 0===a&&(a=""),void 0===r&&(r=""),void 0===o&&(o=""),!r&&o&&(r=o),this.reportsDataArray=[],this.dropdownReportList.forEach((function(o){"dealsByQuarter"===o.reportCode&&e.dealDashboardService.dealsByQuarter(t,a,r).subscribe((function(t){e.buildReports(t,"quarter","noOfDeals",o.reportName,!1,"Number of Deals",o.reportCode,o.showOnDashboard,"",!1),e.dealGuidanceBarReportReady=!0})),"allocatedMarginGuidanceDeals"===o.reportCode&&e.dealDashboardService.allocatedMarginGuidanceDeals(t,a,r).subscribe((function(t){e.buildReports(t,"guidance","noOfDeals",o.reportName,!1,"Number of Deals(Margin Guidance) ",o.reportCode,o.showOnDashboard,"",!1),e.dealGuidanceBarReportReady=!0})),"allocatedMarginGuidancePercentByAllocatedGMGuidance"===o.reportCode&&e.dealDashboardService.allocatedMarginGuidancePercentByAllocatedGMGuidance(t,a,r).subscribe((function(t){e.buildReports(t,"allocatedMarginGuidance","allocatedMarginPercent",o.reportName,!1,"Margin Guidance",o.reportCode,o.showOnDashboard,"%",!1),e.dealGuidanceBarReportReady=!0})),"allocatedMarginPercentByProduct"===o.reportCode&&e.dealDashboardService.allocatedMarginPercentByProduct(t,a,r).subscribe((function(t){e.buildReports(t,"product","allocatedMarginPercent",o.reportName,!1,"Product",o.reportCode,o.showOnDashboard,"%",!1),e.dealGuidanceBarReportReady=!0})),"allocationAmtByRegion"===o.reportCode&&e.dealDashboardService.allocationAmtByRegion(t,a,r).subscribe((function(t){e.buildReports(t,"region","allocationAmount",o.reportName,!1,"Amount by Regions",o.reportCode,o.showOnDashboard,"",!0),e.dealGuidanceBarReportReady=!0})),"allocationAmtByPeriod"===o.reportCode&&e.dealDashboardService.allocationAmtByPeriod(t,a,r).subscribe((function(t){e.buildReports(t,"period","allocationAmount",o.reportName,!1,"Amount by Periods",o.reportCode,o.showOnDashboard,"",!0),e.dealGuidanceBarReportReady=!0})),"allocationAmtByAccount"===o.reportCode&&e.dealDashboardService.allocationAmtByAccount(t,a,r).subscribe((function(t){e.buildReports(t,"account","allocationAmount",o.reportName,!1,"Amount by Accounts",o.reportCode,o.showOnDashboard,"",!0),e.dealGuidanceBarReportReady=!0})),"allocationAmtByProductCategory"===o.reportCode&&e.dealDashboardService.allocationAmtByProductCategory(t,a,r).subscribe((function(t){e.buildReports(t,"productCategory","allocationAmount",o.reportName,!1,"Revenue Amount ",o.reportCode,o.showOnDashboard,"",!0),e.dealGuidanceBarReportReady=!0})),"allocationGuidanceDeals"===o.reportCode&&e.dealDashboardService.allocationGuidanceDeals(t,a,r).subscribe((function(t){e.buildReports(t,"guidance","noOfDeals",o.reportName,!1,"Number of Deals(Allocation Guidance)",o.reportCode,o.showOnDashboard,"",!1),e.dealGuidanceBarReportReady=!0})),"discountGuidanceDeals"===o.reportCode&&e.dealDashboardService.discountGuidanceDeals(t,a,r).subscribe((function(t){e.buildReports(t,"guidance","noOfDeals",o.reportName,!1,"Number of Deals(Discount Guidance)",o.reportCode,o.showOnDashboard,"",!1),e.dealGuidanceBarReportReady=!0})),"allocationMarginPercentByAllocationGuidance"===o.reportCode&&e.dealDashboardService.allocationMarginPercentByAllocationGuidance(t,a,r).subscribe((function(t){e.buildReports(t,"allocationGuidance","allocationGuidancePercent",o.reportName,!1,"Allocation Guidance",o.reportCode,o.showOnDashboard,"%",!1),e.dealGuidanceBarReportReady=!0})),"discountPercentByDiscountGuidance"===o.reportCode&&e.dealDashboardService.discountPercentByDiscountGuidance(t,a,r).subscribe((function(t){e.buildReports(t,"discountGuidance","discountGuidancePercent",o.reportName,!1,"Discount Guidance",o.reportCode,o.showOnDashboard,"%",!1),e.dealGuidanceBarReportReady=!0})),"dealGuidanceReport"===o.reportCode&&e.dealDashboardService.dealGuidanceReport(t,a,r).subscribe((function(t){e.buildReports(t,"guidance","noOfGuidances",o.reportName,!1,"Number of Deals",o.reportCode,o.showOnDashboard,"",!1),e.dealGuidanceBarReportReady=!0})),"allocatedmarginPercentByRegion"===o.reportCode&&e.dealDashboardService.allocatedmarginPercentByRegion(t,a,r).subscribe((function(t){e.buildReports(t,"region","allocatedMarginPercent",o.reportName,!1,"Region",o.reportCode,o.showOnDashboard,"%",!1),e.dealGuidanceBarReportReady=!0})),"allocatedmarginPercentByAccount"===o.reportCode&&e.dealDashboardService.allocatedmarginPercentByAccount(t,a,r).subscribe((function(t){e.buildReports(t,"account","allocatedMarginPercent",o.reportName,!1,"Account Name",o.reportCode,o.showOnDashboard,"%",!1),e.dealGuidanceBarReportReady=!0})),"allocatedmarginPercentByProductCategory"===o.reportCode&&e.dealDashboardService.allocatedmarginPercentByProductCategory(t,a,r).subscribe((function(t){e.buildReports(t,"productCategory","allocatedMarginPercent",o.reportName,!1,"Product Category",o.reportCode,o.showOnDashboard,"%",!1),e.dealGuidanceBarReportReady=!0}))}))}},{key:"loadArrangementData",value:function(){var e=this;this.dealDashboardService.getOverviewFigures(this.currentFY,this.currentPeriodDimension,this.rmanPeriod,this.rmanQuarter).then((function(t){null==t?(e.overviewDataLoading=!1,e.noOverviewData=!0,e.overviewFigures=null,e.notificationService.showError("Failed to load Overview Data")):(e.overviewFigures=t,e.overviewDataLoading=!1)}))}},{key:"onAddingReports",value:function(e){this.addReports=!this.addReports}},{key:"closeAddReports",value:function(e){this.addReports=!1}},{key:"onReportChange",value:function(e){this.reportsDataArray.forEach((function(t){t.reportCode===e.reportCode&&("Y"===e.showOnDashboard?(t.showOnDashboard="N",e.showOnDashboard="N"):(t.showOnDashboard="Y",e.showOnDashboard="Y"))}))}},{key:"saveDashboardReports",value:function(){var e=this;this.saveLoading=!0,this.dealDashboardService.saveDashboardReportsLayout(this.dropdownReportList).then((function(t){e.saveLoading=!1,e.notificationService.showSuccess("Reports Updated Successfully")})).catch((function(t){e.saveLoading=!1,e.notificationService.showError("Error occurred while updating Data")}))}},{key:"transformValues",value:function(e){return null!=e?Math.round(e):0}},{key:"onSelectChange",value:function(){null!=this.currentFY?(this.preparePeriods(this.currentFY),this.prepareQuarters(this.currentFY),this.rmanPeriod=null,this.rmanQuarter=null,this.overviewDataLoading=!1,this.loadArrangementData(),this.loadReports()):null!=this.currentPeriodDimension&&(this.rmanPeriod=null,this.rmanQuarter=null,this.overviewDataLoading=!1,this.loadArrangementData(),this.loadReports())}},{key:"onDimensionChange",value:function(){this.rmanPeriod=null,this.rmanQuarter=null,this.onPeriodsChange()}},{key:"onPeriodsChange",value:function(){this.overviewDataLoading=!1,this.loadArrangementData(),this.loadReports()}},{key:"prepareQuarters",value:function(e){if(null!=e){for(var t=[{label:ee.dropDownOptions.selectQuarterName,value:null}],a=0;a<4;a++)t.push({label:0===a?"Q1-"+e:1===a?"Q2-"+e:2===a?"Q3-"+e:3===a?"Q4-"+e:"",value:0===a?"Q1-"+e:1===a?"Q2-"+e:2===a?"Q3-"+e:3===a?"Q4-"+e:""});this.rmanQuarters=t}}},{key:"preparePeriods",value:function(e){if(null!=e){for(var t=e.toString().substr(2,4),a=[{label:ee.dropDownOptions.selectedPeriodName,value:null}],r=0;r<12;r++)a.push({label:0===r?"Jan-"+t:1===r?"Feb-"+t:2===r?"Mar-"+t:3===r?"Apr-"+t:4===r?"May-"+t:5===r?"Jun-"+t:6===r?"Jul-"+t:7===r?"Aug-"+t:8===r?"Sep-"+t:9===r?"Oct-"+t:10===r?"Nov-"+t:11===r?"Dec-"+t:"",value:0===r?"Jan-"+t:1===r?"Feb-"+t:2===r?"Mar-"+t:3===r?"Apr-"+t:4===r?"May-"+t:5===r?"Jun-"+t:6===r?"Jul-"+t:7===r?"Aug-"+t:8===r?"Sep-"+t:9===r?"Oct-"+t:10===r?"Nov-"+t:11===r?"Dec-"+t:""});this.rmanPeriods=a}}},{key:"gotoPage",value:function(e){this.commonSharedService.guidance=e.guidance,this.router.navigate(["/deal-manager"])}},{key:"buildReports",value:function(e,t,a,r,o,n,i,s,c,l){var d=[],u=[],h=[],p=this;e.forEach((function(e){d.push({data:[e[a]],label:e[t]}),u.push(e[a]),h.push([e[t]])})),this.reportsDataArray.push({name:r,chartType:"bar",chartLabels:[n],chartData:d,chartOptions:{scaleShowVerticalLines:!1,responsive:!0,legend:{display:!0,position:"bottom"},title:{display:o,text:n},scales:{yAxes:[{ticks:{suggestedMin:0,callback:function(e,t,a){if(c)return e+c;if(l){var r=Math.sign(Number(e));return"$"+p.formatAmounts(e,r)}return e}}}]},tooltips:{enabled:!0,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];if(c)return a+c;if(l){var r=Math.sign(Number(a));return"$"+(Math.abs(Number(a))>=1e9?(r*(Math.abs(Number(a))/1e9)).toFixed(2)+" Bn":Math.abs(Number(a))>=1e6?(r*(Math.abs(Number(a))/1e6)).toFixed(2)+" Mn":Math.abs(Number(a))>=1e3?(r*(Math.abs(Number(a))/1e3)).toFixed(2)+" K":Math.abs(Number(a)))}return a}}}},chartLegend:!0,pieChartData:u,pieChartLabels:h,reportCode:i,showOnDashboard:s,pieChartOptions:{legend:{display:!0,position:"bottom"},tooltips:{enabled:!0,callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];if(c)return a+c;if(l){var r=Math.sign(Number(a));return"$"+(Math.abs(Number(a))>=1e9?(r*(Math.abs(Number(a))/1e9)).toFixed(2)+" Bn":Math.abs(Number(a))>=1e6?(r*(Math.abs(Number(a))/1e6)).toFixed(2)+" Mn":Math.abs(Number(a))>=1e3?(r*(Math.abs(Number(a))/1e3)).toFixed(2)+" K":Math.abs(Number(a)))}return a}}}}})}},{key:"formatAmounts",value:function(e,t){return Math.abs(Number(e))>=1e9?t*(Math.abs(Number(e))/1e9).toPrecision(2)+" Bn":Math.abs(Number(e))>=1e6?t*(Math.abs(Number(e))/1e6).toPrecision(2)+" Mn":Math.abs(Number(e))>=1e3?t*(Math.abs(Number(e))/1e3).toPrecision(2)+" K":Math.abs(Number(e)).toPrecision(2)}},{key:"toggleData",value:function(e,t,a){e.chartType=t,e.chartOptions.title.display=a}}]),e}(),X.\u0275fac=function(e){return new(e||X)(D.Pb(m.a),D.Pb(p.g),D.Pb(C),D.Pb(g.a),D.Pb(y.a),D.Pb(P.a))},X.\u0275cmp=D.Jb({type:X,selectors:[["app-deal-dashboard"]],viewQuery:function(e,t){var a;1&e&&D.Qc(R,!0,v.a),2&e&&D.Ac(a=D.ec())&&(t.dataChart=a.first)},decls:19,vars:16,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block","card-padding","card-overview"],[1,"cardHeader","row","mx-0"],["name","FYear",1,"ml-auto",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","periodDimension",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","periodName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange",4,"ngIf"],["name","quarterName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange",4,"ngIf"],["class","no-data-found",4,"ngIf"],["class","card-container row mx-0 width-100 height-135",4,"ngIf"],["class","overviewFigures-load-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],["class","card-wrapper",4,"ngIf"],["name","periodName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","quarterName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],[1,"no-data-found"],[1,"card-container","row","mx-0","width-100","height-135"],[1,"col",2,"padding-right","10px!important"],[1,"card"],[1,"font-12"],[1,"card","text-right"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loggedOut",""],[1,"justify-content-end"],[4,"ngFor","ngForOf"],[1,"col"],[1,"pointer",2,"text-decoration","underline!important",3,"click"],["styleClass","custom-spinner","strokeWidth","4",1,"overviewFigures-load-spinner"],[1,"card-block","card-padding","d-flex"],[1,"pull-right","icons-list"],["class","add-column",3,"click",4,"ngIf"],["id","add-column-popup","class","dashboard-reports-popup",4,"ngIf"],["class","reports-load-splinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],["class","dashboard-graphs-row",4,"ngIf"],[1,"add-column",3,"click"],[1,"fa","fa-plus-circle"],["id","add-column-popup",1,"dashboard-reports-popup"],[1,"user-popup","right-align"],[1,"content","overflow"],["title","Close",1,"close",3,"click"],[1,"add-column-btns"],[1,"primary-btn","pointer",3,"click"],["class","save-dialog-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],["type","checkbox","name","column",3,"checked","change"],[3,"for"],["styleClass","custom-spinner","strokeWidth","4",1,"save-dialog-spinner"],["styleClass","custom-spinner","strokeWidth","4",1,"reports-load-splinner"],[2,"text-align","center"],[1,"dashboard-graphs-row"],["class","col-md-4 reports-card-main",4,"ngIf"],[1,"col-md-4","reports-card-main"],[1,"dashboard-report-name"],[1,"pull-right","chart-switch",3,"click"],[3,"ngClass"],["baseChart","","height","200",3,"datasets","labels","options","legend","chartType",4,"ngIf"],["class","no_chartData",4,"ngIf"],["baseChart","","height","200",3,"options","data","labels","chartType",4,"ngIf"],["baseChart","","height","200",3,"datasets","labels","options","legend","chartType"],[1,"no_chartData"],["baseChart","","height","200",3,"options","data","labels","chartType"]],template:function(e,t){1&e&&(D.Qb(0,"div",0),D.Vb(1,"div",1),D.Vb(2,"div",2),D.Vb(3,"div",3),D.Vb(4,"div",4),D.Vb(5,"div",5),D.Vb(6,"p-card"),D.Vb(7,"div",6),D.Vb(8,"h2"),D.Mc(9,"Overview"),D.Ub(),D.Vb(10,"p-dropdown",7),D.dc("ngModelChange",(function(e){return t.currentFY=e}))("onChange",(function(){return t.onSelectChange()})),D.Ub(),D.Vb(11,"p-dropdown",8),D.dc("ngModelChange",(function(e){return t.currentPeriodDimension=e}))("onChange",(function(){return t.onDimensionChange()})),D.Ub(),D.Kc(12,A,1,5,"p-dropdown",9),D.Kc(13,O,1,5,"p-dropdown",10),D.Ub(),D.Vb(14,"div",3),D.Kc(15,B,2,0,"h6",11),D.Kc(16,F,54,24,"span",12),D.Kc(17,L,1,0,"p-progressSpinner",13),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Kc(18,H,14,5,"div",14)),2&e&&(D.Eb(10),D.oc("options",t.rmanFYears)("ngModel",t.currentFY)("ngModelOptions",D.rc(14,G))("filter",!1),D.Eb(1),D.oc("options",t.rmanPeriodDimensions)("ngModel",t.currentPeriodDimension)("ngModelOptions",D.rc(15,G))("filter",!1),D.Eb(1),D.oc("ngIf",null!=t.currentFY&&"PTD"==t.currentPeriodDimension),D.Eb(1),D.oc("ngIf",null!=t.currentFY&&"QTD"==t.currentPeriodDimension),D.Eb(2),D.oc("ngIf",null===t.overviewFigures),D.Eb(1),D.oc("ngIf",!t.overviewDataLoading&&null!==t.overviewFigures),D.Eb(1),D.oc("ngIf",t.overviewDataLoading),D.Eb(1),D.oc("ngIf",t.reportsList))},directives:[s.a,c.a,l.k,l.n,n.o,n.n,d.a,n.m,U.a],pipes:[n.g],styles:[".col[_ngcontent-%COMP%]{padding-left:5px!important;padding-right:10px!important}.font-12[_ngcontent-%COMP%]{font-weight:700;font-size:12px!important}.height-135[_ngcontent-%COMP%]{height:135px!important}.width-100[_ngcontent-%COMP%]{width:100%!important}.dashboard-report-name[_ngcontent-%COMP%]{cursor:unset;text-decoration:unset}.no_chartData[_ngcontent-%COMP%]{height:308px;justify-content:center;align-items:center;display:inline-flex;font-weight:700;color:#767676}@media (min-width:1420px) and (max-width:1600px){.no_chartData[_ngcontent-%COMP%]{height:255px}}@media (min-width:1700px) and (max-width:2100px){.no_chartData[_ngcontent-%COMP%]{height:360px}}@media (min-width:2400px) and (max-width:3500px){.no_chartData[_ngcontent-%COMP%]{height:502px}}"]}),X)}],ae=((Z=function e(){o(this,e)}).\u0275mod=D.Nb({type:Z}),Z.\u0275inj=D.Mb({factory:function(e){return new(e||Z)},providers:[b.a,g.a,{provide:h.a,useClass:f.a,multi:!0}],imports:[[s.b,c.b,l.h,n.c,d.b,u.a,h.c,p.k.forChild(te),h.d.withOptions({cookieName:"CSRF-TOKEN",headerName:"X-CSRF-TOKEN"})],s.b,c.b,l.h,d.b]}),Z)},gJyg:function(a,r,n){"use strict";n.d(r,"a",(function(){return g}));var s=n("cBSm"),c=n("1adA"),l=n("JSOo"),d=n("fXoL"),u=n("ofXK"),h=n("LPYB"),p=["chart"];function b(e,t){if(1&e){var a=d.Wb();d.Vb(0,"canvas",1),d.dc("chartClick",(function(e){return d.Dc(a),d.gc().onBarClick(e)})),d.Ub()}if(2&e){var r=d.gc();d.oc("datasets",r.barChartData)("labels",r.barChartLabels)("options",r.barChartOptions)("plugins",r.barChartPlugins)("legend",r.barChartLegend)("chartType",r.barChartType)}}var g=function(){var a=function(){function a(e,t){o(this,a),this.drillDownService=e,this.commonSharedService=t,this.chartData=[],this.currentUrl="",this.isDrillDown=null,this.month="month",this.quarter="quarter",this.year="year",this.ShowHideChart=!0,this.values=[],this.legends=[],this.barChartLabels=[],this.barChartData=[],this.barChartOptions={responsive:!0,legend:{position:"bottom"}},this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.chartReady=!1,this.clicksCount=0,this.reachedYear=!1,this.type="",this.orientation="",this.flipChart=!1,this.showLegend=!0,this.caption="",this.description="",this.padding={left:10,top:5,right:25,bottom:0},this.titlePadding={left:90,top:0,right:0,bottom:10},this.dataSource=this.chartData,this.colorScheme="scheme29",this.animationDuration=400,this.xAxis={dataField:"",unitInterval:1,textRotationAngle:0,valuesOnTicks:!0,tickMarks:{visible:!0,unitInterval:1,color:"#888888"},gridLines:{visible:!1,unitInterval:1,color:"#888888"}},this.valueAxis={unitInterval:10,minValue:0,maxValue:1e10,visible:!0,axisSize:"auto",flip:!1,textRotationAngle:0,tickMarks:{color:"#888888"},gridLines:{color:"#888888"},formatSettings:{decimalPlaces:0}},this.seriesGroups=[]}return i(a,[{key:"ngOnInit",value:function(){this.getChartData()}},{key:"onBarClick",value:function(e){e.active.length>0&&null==e.detail&&(this.columnData.rowGroup[0]==this.year?(this.isDrillDown=!0,localStorage.setItem("reachedYear","true"),this.getChartData()):this.columnData.rowGroup[0]==this.quarter?("true"==localStorage.getItem("reachedYear")?(this.isDrillDown=!0,localStorage.setItem("reachedYear","false")):this.isDrillDown=!1,this.getChartData()):(this.isDrillDown=!1,this.getChartData()))}},{key:"getChartData",value:function(){var a=this;this.legends=[],this.barChartData=[],this.caption=this.title?this.title.dataset.value:"",this.desc=this.desc?this.desc.dataset.value:"","/"==this.routeUrl||"/dashboard"==this.routeUrl?(this.chartdynamicWidth="385px",this.chartDynamicHeight="350px",this.leftPadding="-15px"):(this.chartdynamicWidth="1350px",this.chartDynamicHeight="500px");var r=[];this.columnData.rowGroup&&(this.isDrillDown?this.columnData.rowGroup[0]==this.year?this.columnData.rowGroup[0]=this.quarter:this.columnData.rowGroup[0]==this.quarter&&(this.columnData.rowGroup[0]=this.month):!1===this.isDrillDown&&(this.columnData.rowGroup[0]==this.month?this.columnData.rowGroup[0]=this.quarter:this.columnData.rowGroup[0]==this.quarter&&(this.columnData.rowGroup[0]=this.year)),r.push.apply(r,t(this.columnData.rowGroup))),this.columnData.pivot&&r.push.apply(r,t(this.columnData.pivot));for(var o=["year","quarter","month","customer"],n=null,i=[],s=0;s<r.length;s++)if(-1!=o.indexOf(r[s])){n=r[s],i=this.columnData.rowGroup||s<this.columnData.rowGroup.length-1?this.columnData.pivot:this.columnData.rowGroup;break}var c={};if(("/"==this.routeUrl||"/dashboard"==this.routeUrl)&&this.drillDownService.reportsArrangementData.length>0){var l=this.drillDownService.reportsArrangementData.filter((function(e){return e.id===a.reportId}));this.drillDownService.arrangementsData=null==l[0].data?[]:l[0].data}this.drillDownService.arrangementsData.forEach((function(t){c[t[n]]||(c[t[n]]={});var r,o=c[t[n]],s=e(a.columnData.summary);try{for(s.s();!(r=s.n()).done;){var l=r.value;o[l.label]||(o[l.label]={});var d=o[l.label];i&&i.length||(i=["All"]);var u,h=e(i);try{for(h.s();!(u=h.n()).done;){var p=t[u.value];d[p]||(d[p]=0),d[p]+=t[l.name]}}catch(b){h.e(b)}finally{h.f()}}}catch(b){s.e(b)}finally{s.f()}}));var d=0,u=[],h=[];if("/"==this.routeUrl||"/dashboard"==this.routeUrl){var p=0,b=0,g=0;for(var f in c){var v=3;if("customer"==n&&(v=4),p<=v){var m={};for(var y in m[n]=f,g=0,c[f]){if(0==g)for(var D in b=0,c[f][y]){if(b<=1){var w=c[f][y][D];m[y+D]=w,w>d&&(d=w),h[y]||(h[y]={}),h[y][D]=""}b++}g++}u.push(m)}p++}}else for(var M in c){var C={};for(var P in C[n]=M,c[M])for(var U in c[M][P]){var R=c[M][P][U];C[P+U]=R,R>d&&(d=R),h[P]||(h[P]={}),h[P][U]=""}u.push(C)}if("/"!=this.routeUrl&&"/dashboard"!=this.routeUrl&&"customer"==n&&u){var G=u.length;if(G>10){var A=30*G;A>500&&(this.chartDynamicHeight=A+"px")}}for(var O in h){"customer"==n&&(this.orientation="horizontal");var B=!1;this.columnData.pivot||(B=!1);var V={type:"stackedcolumn",orientation:this.orientation,columnsMinWidth:15,columnsMaxWidth:15,columnsGapPercent:50,seriesGapPercent:1e3,series:[],showLabels:B};for(var k in h[O]){var S=void 0,x=void 0;this.columnData.pivot||(S="customer"==n?{visible:!0,horizontalAlignment:"right",offset:{x:50,y:0}}:{visible:!0,verticalAlignment:"top",offset:{x:0,y:-20}},x=function(e){var t;return Number.isNaN(e)?null:0==e?0:e<1e3?Math.floor(e).toFixed(2):(t=Math.floor(Math.log(e)/Math.log(1e3)),(e/Math.pow(1e3,t)).toFixed(2)+["K","M","G","T","P","E"][t-1])}),V.series.push({dataField:O+k,displayText:("undefined"!=k?k:"")+" "+O,labels:S,formatFunction:x}),this.legends.push(O+k)}this.seriesGroups.push(V)}this.xAxis.dataField=n,this.dataSource=u,this.valueAxis.minValue=0,this.valueAxis.maxValue=d,this.valueAxis.axisSize="auto","customer"==n?(this.valueAxis.flip=!0,this.xAxis.textRotationAngle=90,this.valueAxis.textRotationAngle=-75):this.valueAxis.flip=!1;var N=Math.ceil(d)/10;this.valueAxis.unitInterval=Math.ceil(d+(N+N/2))/10,(this.isDrillDown||!1===this.isDrillDown)&&(this.drillDownService.showChart=!1,setTimeout((function(){a.drillDownService.showChart=!0}),0));for(var F=[],L=n,I=0;I<this.dataSource.length;I++)F.push(this.dataSource[I][L]);this.barChartLabels=F;for(var E={},T=0;T<this.legends.length;T++){this.values=[];for(var Y=0;Y<u.length;)this.values.push(null!=u[Y][this.legends[T]]?u[Y][this.legends[T]]:0),Y++;E[T]={data:this.values,label:this.legends[T]},this.barChartData.push(E[T])}this.chartReady=!0}}]),a}();return a.\u0275fac=function(e){return new(e||a)(d.Pb(c.a),d.Pb(l.a))},a.\u0275cmp=d.Jb({type:a,selectors:[["data-chart"]],viewQuery:function(e,t){var a;1&e&&d.Qc(p,!0,s.a),2&e&&d.Ac(a=d.ec())&&(t.chart=a.first)},inputs:{columnData:"columnData",title:"title",desc:"desc",routeUrl:"routeUrl",reportId:"reportId"},features:[d.Db([l.a])],decls:1,vars:1,consts:[["id","barchart","baseChart","","height","200",3,"datasets","labels","options","plugins","legend","chartType","chartClick",4,"ngIf"],["id","barchart","baseChart","","height","200",3,"datasets","labels","options","plugins","legend","chartType","chartClick"]],template:function(e,t){1&e&&d.Kc(0,b,1,6,"canvas",0),2&e&&d.oc("ngIf",t.chartReady&&0!=t.barChartLabels.length)},directives:[u.o,h.a],encapsulation:2}),a}()}}])}();