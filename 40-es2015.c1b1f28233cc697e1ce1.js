(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{WsTB:function(n,e,r){"use strict";r.r(e),r.d(e,"LandingDashboardModule",(function(){return J}));var t=r("ofXK"),o=r("tk/3"),i=r("3Pt+"),a=r("tyNb"),s=r("QIUk"),c=r("arFO"),d=r("vKg+"),l=r("/8oK"),b=r("8DrR"),h=r("gJyg"),p=r("1adA"),u=r("J7oY"),g=r("kzDL"),m=r("fXoL"),f=r("puOX");const v=["dataChart"],D=function(){return{standalone:!0}};function U(n,e){if(1&n){const n=m.Wb();m.Vb(0,"p-dropdown",15),m.dc("ngModelChange",(function(e){return m.Dc(n),m.gc().rmanPeriod=e}))("onChange",(function(){return m.Dc(n),m.gc().onPeriodsChange()})),m.Ub()}if(2&n){const n=m.gc();m.oc("options",n.rmanPeriods)("ngModel",n.rmanPeriod)("ngModelOptions",m.rc(4,D))("filter",!1)}}function w(n,e){if(1&n){const n=m.Wb();m.Vb(0,"p-dropdown",16),m.dc("ngModelChange",(function(e){return m.Dc(n),m.gc().rmanQuarter=e}))("onChange",(function(){return m.Dc(n),m.gc().onPeriodsChange()})),m.Ub()}if(2&n){const n=m.gc();m.oc("options",n.rmanQuarters)("ngModel",n.rmanQuarter)("ngModelOptions",m.rc(4,D))("filter",!1)}}function V(n,e){1&n&&(m.Vb(0,"h6",17),m.Mc(1,"No data found"),m.Ub())}function M(n,e){if(1&n&&(m.Vb(0,"span",18),m.Vb(1,"div",19),m.Vb(2,"div",20),m.Vb(3,"p"),m.Mc(4,"Arrangement"),m.Qb(5,"br"),m.Mc(6,"Amount(FC)"),m.Ub(),m.Vb(7,"h6"),m.Mc(8),m.Ub(),m.Ub(),m.Ub(),m.Vb(9,"div",19),m.Vb(10,"div",20),m.Vb(11,"p"),m.Mc(12,"Allocation"),m.Qb(13,"br"),m.Mc(14,"Amount(FC)"),m.Ub(),m.Vb(15,"h6"),m.Mc(16),m.Ub(),m.Ub(),m.Ub(),m.Vb(17,"div",19),m.Vb(18,"div",20),m.Vb(19,"p"),m.Mc(20,"Delivered"),m.Qb(21,"br"),m.Mc(22,"Amount(FC)"),m.Ub(),m.Vb(23,"h6"),m.Mc(24),m.Ub(),m.Ub(),m.Ub(),m.Vb(25,"div",19),m.Vb(26,"div",20),m.Vb(27,"p"),m.Mc(28,"Billed"),m.Qb(29,"br"),m.Mc(30,"Amout(FC)"),m.Ub(),m.Vb(31,"h6"),m.Mc(32),m.Ub(),m.Ub(),m.Ub(),m.Vb(33,"div",19),m.Vb(34,"div",20),m.Vb(35,"p"),m.Mc(36,"Delivered Allocated Amout(FC)"),m.Ub(),m.Vb(37,"h6"),m.Mc(38),m.Ub(),m.Ub(),m.Ub(),m.Vb(39,"div",19),m.Vb(40,"div",20),m.Vb(41,"p"),m.Mc(42,"Revenue"),m.Qb(43,"br"),m.Mc(44,"Amount(FC)"),m.Ub(),m.Vb(45,"h6"),m.Mc(46),m.Ub(),m.Ub(),m.Ub(),m.Vb(47,"div",19),m.Vb(48,"div",20),m.Vb(49,"p"),m.Mc(50,"Revenue Deferred Amount(FC)"),m.Ub(),m.Vb(51,"h6"),m.Mc(52),m.Ub(),m.Ub(),m.Ub(),m.Vb(53,"div",19),m.Vb(54,"div",20),m.Vb(55,"p"),m.Mc(56,"Variable Consideration Amount(FC)"),m.Ub(),m.Vb(57,"h6"),m.Mc(58),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&n){const n=e.$implicit,r=m.gc();m.Eb(8),m.Oc("$ ",r.transformValues(n.ARRG_AMOUNT),""),m.Eb(8),m.Oc("$ ",r.transformValues(n.ALLOCATION_AMOUNT),""),m.Eb(8),m.Oc("$ ",r.transformValues(n.DELIVERED_AMOUNT),""),m.Eb(8),m.Oc("$ ",r.transformValues(n.BILLED_AMOUNT),""),m.Eb(6),m.Oc("$ ",r.transformValues(n.DEL_ALLOC_AMT),""),m.Eb(8),m.Oc("$ ",r.transformValues(n.REVENUE_AMOUNT),""),m.Eb(6),m.Oc("$ ",r.transformValues(n.DEF_REV_AMOUNT),""),m.Eb(6),m.Oc("$ ",r.transformValues(n.DEF_CONT_AMOUNT),"")}}function C(n,e){1&n&&m.Qb(0,"p-progressSpinner",21)}function O(n,e){if(1&n){const n=m.Wb();m.Vb(0,"a",29),m.dc("click",(function(e){return m.Dc(n),m.gc(2).onAddingReports(e)})),m.Qb(1,"em",30),m.Mc(2,"List of Reports"),m.Ub()}}function L(n,e){if(1&n){const n=m.Wb();m.Vb(0,"ol"),m.Vb(1,"li"),m.Vb(2,"input",39),m.dc("change",(function(){m.Dc(n);const r=e.$implicit;return m.gc(3).onReportChange(r)})),m.Ub(),m.Vb(3,"label",40),m.Mc(4),m.Ub(),m.Ub(),m.Ub()}if(2&n){const n=e.$implicit;m.Eb(2),m.oc("checked","Y"==n.showOnDashbaord),m.Eb(1),m.pc("for",n.id),m.Eb(1),m.Nc(n.reportName)}}function E(n,e){1&n&&m.Qb(0,"p-progressSpinner",41)}function F(n,e){if(1&n){const n=m.Wb();m.Vb(0,"div",31),m.Vb(1,"div",32),m.Vb(2,"div",33),m.Vb(3,"a",34),m.dc("click",(function(e){return m.Dc(n),m.gc(2).closeAddReports(e)})),m.Mc(4,"\xd7"),m.Ub(),m.Kc(5,L,5,3,"ol",35),m.Ub(),m.Vb(6,"div",36),m.Vb(7,"a",37),m.dc("click",(function(){return m.Dc(n),m.gc(2).saveDashboardReports()})),m.Mc(8," Save "),m.Ub(),m.Ub(),m.Kc(9,E,1,0,"p-progressSpinner",38),m.Ub(),m.Ub()}if(2&n){const n=m.gc(2);m.Eb(5),m.oc("ngForOf",n.reportsList),m.Eb(4),m.oc("ngIf",n.saveLoading)}}function P(n,e){1&n&&m.Qb(0,"p-progressSpinner",42)}function k(n,e){1&n&&(m.Vb(0,"div"),m.Vb(1,"strong",43),m.Mc(2,"No reports found"),m.Ub(),m.Ub())}function R(n,e){if(1&n&&m.Qb(0,"data-chart",53,54),2&n){const n=m.gc(3).$implicit,e=m.gc(2);m.oc("columnData",n.columnData)("routeUrl",e.currentUrl)("reportId",n.id)}}function A(n,e){if(1&n&&m.Qb(0,"pie-data-chart",53,55),2&n){const n=m.gc(3).$implicit,e=m.gc(2);m.oc("columnData",n.columnData)("routeUrl",e.currentUrl)("reportId",n.id)}}function I(n,e){if(1&n&&(m.Tb(0),m.Kc(1,R,2,3,"data-chart",52),m.Kc(2,A,2,3,"pie-data-chart",52),m.Sb()),2&n){const n=m.gc(2).$implicit,e=m.gc(2);m.Eb(1),m.oc("ngIf",!n.switchChart&&e.drillDownService.showChart),m.Eb(1),m.oc("ngIf",n.switchChart)}}function Q(n,e){1&n&&m.Qb(0,"p-progressSpinner",56)}const S=function(n){return["/reports","analytical","report",n]};function N(n,e){if(1&n){const n=m.Wb();m.Vb(0,"div",46),m.Vb(1,"div",20),m.Vb(2,"h6",47),m.Vb(3,"span",48),m.Mc(4),m.Ub(),m.Vb(5,"div",49),m.dc("click",(function(){m.Dc(n);const e=m.gc().$implicit;return e.switchChart=!e.switchChart})),m.Qb(6,"em",50),m.Ub(),m.Ub(),m.Kc(7,I,3,2,"ng-container",27),m.Kc(8,Q,1,0,"p-progressSpinner",51),m.Ub(),m.Ub()}if(2&n){const n=m.gc().$implicit;m.Eb(3),m.oc("routerLink",m.sc(5,S,n.id)),m.Eb(1),m.Nc(n.reportName),m.Eb(2),m.oc("ngClass",n.switchChart?"fa fa-bar-chart":"fa fa-pie-chart"),m.Eb(1),m.oc("ngIf",!n.showLoading),m.Eb(1),m.oc("ngIf",n.showLoading)}}function K(n,e){if(1&n&&(m.Vb(0,"div",44),m.Kc(1,N,9,7,"div",45),m.Ub()),2&n){const n=e.$implicit;m.Eb(1),m.oc("ngIf",n.showChart&&"Y"==n.showOnDashbaord)}}function Y(n,e){if(1&n&&(m.Vb(0,"div",1),m.Vb(1,"div",2),m.Vb(2,"div",3),m.Vb(3,"div",4),m.Vb(4,"div",22),m.Vb(5,"p-card"),m.Vb(6,"h2"),m.Mc(7,"Reports"),m.Ub(),m.Vb(8,"div",23),m.Kc(9,O,3,0,"a",24),m.Kc(10,F,10,2,"div",25),m.Ub(),m.Kc(11,P,1,0,"p-progressSpinner",26),m.Kc(12,k,3,0,"div",27),m.Kc(13,K,2,1,"div",28),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&n){const n=m.gc();m.Eb(9),m.oc("ngIf",!n.noReports),m.Eb(1),m.oc("ngIf",n.addReports),m.Eb(1),m.oc("ngIf",n.showLoading),m.Eb(1),m.oc("ngIf",n.noReports),m.Eb(1),m.oc("ngForOf",n.reportsList)}}const y=r("+yMW");let $=(()=>{class n{constructor(n,e,r,t,o){this.drillDownService=n,this.router=e,this.landingDashboardService=r,this.rmanFiscalPeriodsService=t,this.notificationService=o,this.addReports=!1,this.showChart=!1,this.currentUrl="",this.reportsList=[],this.checkedReportsList=[],this.showLoading=!1,this.saveLoading=!1,this.noReports=!1,this.rmanFYList=[],this.rmanPeriodDimensionsList=[],this.overviewDataLoading=!1,this.noOverviewData=!1,this.paginationOptions={pageNumber:0,pageSize:"10000"},this.router.events.subscribe(n=>{n instanceof a.c&&(this.currentUrl=n.url)}),this.overviewDataLoading=!0,this.rmanFiscalPeriodsService.getFinancialYears().then(n=>{this.rmanFYList=n;let e=[{label:y.dropDownOptions.selectYear,value:null}];for(let r=0;r<this.rmanFYList.length;r++)e.push({label:this.rmanFYList[r],value:this.rmanFYList[r]});this.rmanFYears=e}),this.rmanFiscalPeriodsService.getPeriodDimensions().then(n=>{this.rmanPeriodDimensionsList=n,this.currentPeriodDimension=this.rmanPeriodDimensionsList[0];let e=[{label:y.dropDownOptions.selectPeriod,value:null}];for(let r=0;r<this.rmanPeriodDimensionsList.length;r++)e.push({label:this.rmanPeriodDimensionsList[r],value:this.rmanPeriodDimensionsList[r]});this.rmanPeriodDimensions=e,this.loadArrangementData()}),this.showLoading=!0,this.drillDownService.getReports(this.paginationOptions,!1).then(n=>{this.reportsList=n.content,0==this.reportsList.length&&(this.noReports=!0),this.showLoading=!1;for(let e of this.reportsList)this.checkedReportsList.push(e),this.drillDownService.getReport(e.id).then(n=>{this.showLoading=!1;let r=JSON.parse(n.clob);r.id=n.id,e.columnData=r.columnData,e.datetimepickerfrom=new Date(r.dateRange.endDate),e.datetimepickerto=new Date(r.dateRange.startDate),e.reportName=r.reportName,e.switchChart=!1,e.showChart=!0,this.drillDownService.showChart=!0;let t={startDate:e.datetimepickerto,endDate:e.datetimepickerfrom};e.showLoading=!0,this.drillDownService.getArrangementData(t,r.id).then(n=>{e.showLoading=!1})})})}loadArrangementData(){this.landingDashboardService.getOverviewFigures(this.currentFY,this.currentPeriodDimension,this.rmanPeriod,this.rmanQuarter).then(n=>{null==n?(this.overviewDataLoading=!1,this.noOverviewData=!0,this.notificationService.showError("Failed to load Overview Data")):(this.overviewFigures=n.Content,this.overviewDataLoading=!1)})}ngOnInit(){}onAddingReports(n){this.addReports=!this.addReports}closeAddReports(n){this.addReports=!1}onReportChange(n){"Y"==n.showOnDashbaord?(n.showOnDashbaord="N",this.checkedReportsList.splice(this.checkedReportsList.indexOf(n),1)):(n.showOnDashbaord="Y",this.checkedReportsList.push(n))}saveDashboardReports(){this.saveLoading=!0,this.landingDashboardService.saveDashboardReportsLayout(this.reportsList).then(n=>{this.saveLoading=!1,this.notificationService.showSuccess("Reports Updated Successfully")}).catch(n=>{this.saveLoading=!1,this.notificationService.showError("Error occured while updating Data")})}transformValues(n){return null!=n?Math.round(n):0}onSelectChange(){null!=this.currentFY?(this.preparePeriods(this.currentFY),this.prepareQuarters(this.currentFY),this.rmanPeriod=null,this.rmanQuarter=null,this.overviewDataLoading=!1,this.loadArrangementData()):null!=this.currentPeriodDimension&&(this.rmanPeriod=null,this.rmanQuarter=null,this.overviewDataLoading=!1,this.loadArrangementData())}onDimensionChange(){this.rmanPeriod=null,this.rmanQuarter=null,this.onPeriodsChange()}onPeriodsChange(){this.overviewDataLoading=!1,this.loadArrangementData()}prepareQuarters(n){if(null!=n){let r=[{label:y.dropDownOptions.selectQuarterName,value:null}];for(var e=0;e<4;e++)r.push({label:0==e?"Q1-"+n:1==e?"Q2-"+n:2==e?"Q3-"+n:3==e?"Q4-"+n:"",value:0==e?"Q1-"+n:1==e?"Q2-"+n:2==e?"Q3-"+n:3==e?"Q4-"+n:""});this.rmanQuarters=r}}preparePeriods(n){if(null!=n){var e=n.toString().substr(2,4);let t=[{label:y.dropDownOptions.selectedPeriodName,value:null}];for(var r=0;r<12;r++)t.push({label:0==r?"Jan-"+e:1==r?"Feb-"+e:2==r?"Mar-"+e:3==r?"Apr-"+e:4==r?"May-"+e:5==r?"Jun-"+e:6==r?"Jul-"+e:7==r?"Aug-"+e:8==r?"Sep-"+e:9==r?"Oct-"+e:10==r?"Nov-"+e:11==r?"Dec-"+e:"",value:0==r?"Jan-"+e:1==r?"Feb-"+e:2==r?"Mar-"+e:3==r?"Apr-"+e:4==r?"May-"+e:5==r?"Jun-"+e:6==r?"Jul-"+e:7==r?"Aug-"+e:8==r?"Sep-"+e:9==r?"Oct-"+e:10==r?"Nov-"+e:11==r?"Dec-"+e:""});this.rmanPeriods=t}}}return n.\u0275fac=function(e){return new(e||n)(m.Pb(p.a),m.Pb(a.g),m.Pb(g.a),m.Pb(l.a),m.Pb(u.a))},n.\u0275cmp=m.Jb({type:n,selectors:[["app-landing-dashboard"]],viewQuery:function(n,e){var r;1&n&&m.Qc(v,!0,h.a),2&n&&m.Ac(r=m.ec())&&(e.dataChart=r.first)},decls:19,vars:16,consts:[[1,"content-section","implementation"],[1,"card-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card-block","card-padding","card-overview"],[1,"cardHeader","row","mx-0"],["name","FYear",1,"ml-auto",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","periodDimension",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","periodName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange",4,"ngIf"],["name","quarterName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange",4,"ngIf"],["class","no-data-found",4,"ngIf"],["class","card-container row mx-0",4,"ngFor","ngForOf"],["class","overviewFigures-load-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],["class","card-wrapper",4,"ngIf"],["name","periodName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],["name","quarterName",3,"options","ngModel","ngModelOptions","filter","ngModelChange","onChange"],[1,"no-data-found"],[1,"card-container","row","mx-0"],[1,"col","card-main-"],[1,"card"],["styleClass","custom-spinner","strokeWidth","4",1,"overviewFigures-load-spinner"],[1,"card-block","card-padding","d-flex"],[1,"pull-right","icons-list"],["class","add-column",3,"click",4,"ngIf"],["id","add-column-popup","class","dashboard-reports-popup",4,"ngIf"],["class","reports-load-splinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],[4,"ngIf"],["class","dashboard-graphs-row",4,"ngFor","ngForOf"],[1,"add-column",3,"click"],[1,"fa","fa-plus-circle"],["id","add-column-popup",1,"dashboard-reports-popup"],[1,"user-popup","right-align"],[1,"content","overflow"],["title","Close",1,"close",3,"click"],[4,"ngFor","ngForOf"],[1,"add-column-btns"],[1,"primary-btn","pointer",3,"click"],["class","save-dialog-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],["type","checkbox","name","column",3,"checked","change"],[3,"for"],["styleClass","custom-spinner","strokeWidth","4",1,"save-dialog-spinner"],["styleClass","custom-spinner","strokeWidth","4",1,"reports-load-splinner"],[2,"text-align","center"],[1,"dashboard-graphs-row"],["class","col-md-4 reports-card-main",4,"ngIf"],[1,"col-md-4","reports-card-main"],[1,"dashboard-report-name"],[3,"routerLink"],[1,"pull-right","chart-switch",3,"click"],[3,"ngClass"],["class","graph-load-spinner","styleClass","custom-spinner","strokeWidth","4",4,"ngIf"],[3,"columnData","title","desc","routeUrl","reportId",4,"ngIf"],[3,"columnData","title","desc","routeUrl","reportId"],["dataChart",""],["pieDataChart",""],["styleClass","custom-spinner","strokeWidth","4",1,"graph-load-spinner"]],template:function(n,e){1&n&&(m.Qb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"div",2),m.Vb(3,"div",3),m.Vb(4,"div",4),m.Vb(5,"div",5),m.Vb(6,"p-card"),m.Vb(7,"div",6),m.Vb(8,"h2"),m.Mc(9,"Overview"),m.Ub(),m.Vb(10,"p-dropdown",7),m.dc("ngModelChange",(function(n){return e.currentFY=n}))("onChange",(function(){return e.onSelectChange()})),m.Ub(),m.Vb(11,"p-dropdown",8),m.dc("ngModelChange",(function(n){return e.currentPeriodDimension=n}))("onChange",(function(){return e.onDimensionChange()})),m.Ub(),m.Kc(12,U,1,5,"p-dropdown",9),m.Kc(13,w,1,5,"p-dropdown",10),m.Ub(),m.Vb(14,"div",3),m.Kc(15,V,2,0,"h6",11),m.Kc(16,M,59,8,"span",12),m.Kc(17,C,1,0,"p-progressSpinner",13),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Kc(18,Y,14,5,"div",14)),2&n&&(m.Eb(10),m.oc("options",e.rmanFYears)("ngModel",e.currentFY)("ngModelOptions",m.rc(14,D))("filter",!1),m.Eb(1),m.oc("options",e.rmanPeriodDimensions)("ngModel",e.currentPeriodDimension)("ngModelOptions",m.rc(15,D))("filter",!1),m.Eb(1),m.oc("ngIf",null!=e.currentFY&&"PTD"==e.currentPeriodDimension),m.Eb(1),m.oc("ngIf",null!=e.currentFY&&"QTD"==e.currentPeriodDimension),m.Eb(2),m.oc("ngIf",e.noOverviewData),m.Eb(1),m.oc("ngForOf",e.overviewFigures),m.Eb(1),m.oc("ngIf",e.overviewDataLoading),m.Eb(1),m.oc("ngIf",e.reportsList))},directives:[s.a,c.a,i.k,i.n,t.o,t.n,d.a,a.h,t.m,h.a,f.a],encapsulation:2}),n})();var T=r("uwUq");const W=[{path:"",component:$}];let J=(()=>{class n{}return n.\u0275mod=m.Nb({type:n}),n.\u0275inj=m.Mb({factory:function(e){return new(e||n)},providers:[g.a,l.a,{provide:o.a,useClass:T.a,multi:!0}],imports:[[s.b,c.b,i.h,t.c,d.b,b.a,o.c,a.k.forChild(W),o.d.withOptions({cookieName:"CSRF-TOKEN",headerName:"X-CSRF-TOKEN"})],s.b,c.b,i.h,d.b]}),n})()}}]);